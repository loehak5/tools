INFO:     Started server process [38562]
INFO:     Waiting for application startup.
2026-02-11 00:22:34,372 INFO sqlalchemy.engine.Engine SELECT DATABASE()
2026-02-11 00:22:34,373 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,383 INFO sqlalchemy.engine.Engine SELECT @@sql_mode
2026-02-11 00:22:34,383 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,394 INFO sqlalchemy.engine.Engine SELECT @@lower_case_table_names
2026-02-11 00:22:34,394 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,411 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:22:34,416 INFO sqlalchemy.engine.Engine DESCRIBE `insta-manager`.`users`
2026-02-11 00:22:34,416 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,424 INFO sqlalchemy.engine.Engine DESCRIBE `insta-manager`.`fingerprints`
2026-02-11 00:22:34,424 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,432 INFO sqlalchemy.engine.Engine DESCRIBE `insta-manager`.`accounts`
2026-02-11 00:22:34,435 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,447 INFO sqlalchemy.engine.Engine DESCRIBE `insta-manager`.`tasks`
2026-02-11 00:22:34,447 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,462 INFO sqlalchemy.engine.Engine DESCRIBE `insta-manager`.`task_batches`
2026-02-11 00:22:34,462 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,490 INFO sqlalchemy.engine.Engine DESCRIBE `insta-manager`.`proxy_templates`
2026-02-11 00:22:34,491 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,496 INFO sqlalchemy.engine.Engine DESCRIBE `insta-manager`.`subscription_plans`
2026-02-11 00:22:34,496 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,500 INFO sqlalchemy.engine.Engine DESCRIBE `insta-manager`.`subscriptions`
2026-02-11 00:22:34,500 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,506 INFO sqlalchemy.engine.Engine DESCRIBE `insta-manager`.`subscription_addons`
2026-02-11 00:22:34,506 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,514 INFO sqlalchemy.engine.Engine DESCRIBE `insta-manager`.`proxy_assignments`
2026-02-11 00:22:34,514 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,526 INFO sqlalchemy.engine.Engine DESCRIBE `insta-manager`.`tickets`
2026-02-11 00:22:34,526 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,531 INFO sqlalchemy.engine.Engine DESCRIBE `insta-manager`.`ticket_messages`
2026-02-11 00:22:34,532 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,555 INFO sqlalchemy.engine.Engine SHOW CREATE TABLE `users`
2026-02-11 00:22:34,555 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,561 INFO sqlalchemy.engine.Engine UPDATE users SET is_password_set = TRUE WHERE hashed_password IS NOT NULL AND hashed_password != '' AND (is_password_set = FALSE OR is_password_set IS NULL)
2026-02-11 00:22:34,561 INFO sqlalchemy.engine.Engine [generated in 0.00034s] ()
2026-02-11 00:22:34,569 INFO sqlalchemy.engine.Engine SHOW CREATE TABLE `accounts`
2026-02-11 00:22:34,569 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,584 INFO sqlalchemy.engine.Engine SHOW CREATE TABLE `proxy_templates`
2026-02-11 00:22:34,586 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-11 00:22:34,597 INFO sqlalchemy.engine.Engine UPDATE tickets SET status = 'answered' WHERE status = 'pending'
2026-02-11 00:22:34,597 INFO sqlalchemy.engine.Engine [generated in 0.00073s] ()
2026-02-11 00:22:34,603 INFO sqlalchemy.engine.Engine UPDATE tickets SET status = 'closed' WHERE status = 'resolved'
2026-02-11 00:22:34,603 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ()
âœ… Migration: Updated ticket statuses (pending->answered, resolved->closed)
2026-02-11 00:22:34,607 INFO sqlalchemy.engine.Engine COMMIT
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:49534 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
âœ… Response: GET /api/v1/tickets/ -> 401
INFO:     127.0.0.1:49534 - "GET /api/v1/tickets/ HTTP/1.1" 401 Unauthorized
INFO:     127.0.0.1:49566 - "OPTIONS /api/v1/accounts/auth/google HTTP/1.1" 200 OK
ðŸ” Incoming: POST /api/v1/accounts/auth/google
2026-02-11 00:23:01,456 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:01,481 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.google_id = %s OR users.email = %s
2026-02-11 00:23:01,482 INFO sqlalchemy.engine.Engine [generated in 0.00057s] ('104879972716164294665', 'gurinonyoman@gmail.com')
2026-02-11 00:23:01,492 INFO sqlalchemy.engine.Engine COMMIT
2026-02-11 00:23:01,541 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:01,543 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.id = %s
2026-02-11 00:23:01,543 INFO sqlalchemy.engine.Engine [generated in 0.00018s] (7,)
2026-02-11 00:23:01,557 INFO sqlalchemy.engine.Engine UPDATE users SET last_jti=%s WHERE users.id = %s
2026-02-11 00:23:01,557 INFO sqlalchemy.engine.Engine [generated in 0.00023s] ('4b3fb765-3dfa-43cd-8b94-fa4ccfbc98bc', 7)
2026-02-11 00:23:01,562 INFO sqlalchemy.engine.Engine COMMIT
âœ… Response: POST /api/v1/accounts/auth/google -> 200
INFO:     127.0.0.1:49566 - "POST /api/v1/accounts/auth/google HTTP/1.1" 200 OK
INFO:     127.0.0.1:49566 - "OPTIONS /api/v1/accounts/auth/me HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:23:01,616 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:01,617 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:23:01,617 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('gurinonyoman',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:49566 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:23:01,623 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49566 - "OPTIONS /api/v1/dashboard/stats HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:23:01,666 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:01,666 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:23:01,666 INFO sqlalchemy.engine.Engine [cached since 0.04883s ago] ('gurinonyoman',)
2026-02-11 00:23:01,674 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:23:01,674 INFO sqlalchemy.engine.Engine [generated in 0.00015s] (7,)
2026-02-11 00:23:01,679 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:23:01,679 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('active', 7)
2026-02-11 00:23:01,684 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:23:01,684 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:23:01,689 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:01,689 INFO sqlalchemy.engine.Engine [generated in 0.00016s] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 1, 673184, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:01,694 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:01,694 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 1, 673184, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:01,698 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:23:01,698 INFO sqlalchemy.engine.Engine [generated in 0.00007s] (7,)
2026-02-11 00:23:01,703 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:23:01,703 INFO sqlalchemy.engine.Engine [generated in 0.00010s] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 1, 673184, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:01,711 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:23:01,711 INFO sqlalchemy.engine.Engine [generated in 0.00027s] ('pending', 'running', 7, 10)
2026-02-11 00:23:01,718 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:23:01,718 INFO sqlalchemy.engine.Engine [generated in 0.00013s] (7,)
2026-02-11 00:23:01,724 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:01,724 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 1, 673184, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:01,732 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:23:01,732 INFO sqlalchemy.engine.Engine [generated in 0.00021s] (7, 'active', datetime.datetime(2026, 2, 11, 0, 23, 1, 729780, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49566 - "GET /api/v1/dashboard/stats HTTP/1.1" 200 OK
2026-02-11 00:23:01,736 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /health
âœ… Response: GET /health -> 200
INFO:     127.0.0.1:49578 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49566 - "OPTIONS /api/v1/accounts/auth/sso-token HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
ðŸ” Incoming: GET /api/v1/accounts/auth/sso-token
2026-02-11 00:23:04,562 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:04,562 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:23:04,562 INFO sqlalchemy.engine.Engine [cached since 2.945s ago] ('gurinonyoman',)
2026-02-11 00:23:04,562 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:04,562 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:23:04,562 INFO sqlalchemy.engine.Engine [cached since 2.945s ago] ('gurinonyoman',)
âœ… Response: GET /api/v1/accounts/auth/sso-token -> 200
INFO:     127.0.0.1:49566 - "GET /api/v1/accounts/auth/sso-token HTTP/1.1" 200 OK
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:49590 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:23:04,570 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:23:04,570 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49590 - "OPTIONS /api/v1/accounts/auth/sync HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
ðŸ” Incoming: POST /api/v1/accounts/auth/sync
2026-02-11 00:23:06,964 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:06,965 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:23:06,965 INFO sqlalchemy.engine.Engine [cached since 5.348s ago] ('gurinonyoman',)
2026-02-11 00:23:06,966 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:06,966 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:23:06,966 INFO sqlalchemy.engine.Engine [cached since 5.349s ago] ('gurinonyoman',)
2026-02-11 00:23:06,972 INFO sqlalchemy.engine.Engine COMMIT
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:49566 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:23:06,975 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:23:07,022 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:07,023 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.id = %s
2026-02-11 00:23:07,023 INFO sqlalchemy.engine.Engine [cached since 5.48s ago] (7,)
2026-02-11 00:23:07,030 INFO sqlalchemy.engine.Engine UPDATE users SET last_jti=%s WHERE users.id = %s
2026-02-11 00:23:07,031 INFO sqlalchemy.engine.Engine [cached since 5.474s ago] ('f34160fc-f558-49d1-b2ea-7614837fb770', 7)
2026-02-11 00:23:07,035 INFO sqlalchemy.engine.Engine COMMIT
âœ… Response: POST /api/v1/accounts/auth/sync -> 200
INFO:     127.0.0.1:49590 - "POST /api/v1/accounts/auth/sync HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:23:07,141 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:07,141 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:23:07,141 INFO sqlalchemy.engine.Engine [cached since 5.524s ago] ('gurinonyoman',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:49590 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:23:07,147 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
INFO:     127.0.0.1:49566 - "OPTIONS /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:23:07,278 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:07,279 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:23:07,279 INFO sqlalchemy.engine.Engine [cached since 5.662s ago] ('gurinonyoman',)
2026-02-11 00:23:07,286 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:23:07,287 INFO sqlalchemy.engine.Engine [cached since 5.612s ago] (7,)
2026-02-11 00:23:07,287 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:07,287 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:23:07,287 INFO sqlalchemy.engine.Engine [cached since 5.67s ago] ('gurinonyoman',)
2026-02-11 00:23:07,294 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:23:07,294 INFO sqlalchemy.engine.Engine [cached since 5.615s ago] ('active', 7)
2026-02-11 00:23:07,294 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:23:07,294 INFO sqlalchemy.engine.Engine [cached since 5.62s ago] (7,)
2026-02-11 00:23:07,299 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:23:07,299 INFO sqlalchemy.engine.Engine [cached since 5.615s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:23:07,299 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:23:07,299 INFO sqlalchemy.engine.Engine [cached since 5.621s ago] ('active', 7)
2026-02-11 00:23:07,304 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:23:07,304 INFO sqlalchemy.engine.Engine [cached since 5.62s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:23:07,304 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:07,304 INFO sqlalchemy.engine.Engine [cached since 5.615s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 7, 286649, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:07,308 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:07,309 INFO sqlalchemy.engine.Engine [cached since 5.62s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 7, 294734, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:07,309 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:07,309 INFO sqlalchemy.engine.Engine [cached since 5.616s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 7, 286649, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:07,314 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:07,314 INFO sqlalchemy.engine.Engine [cached since 5.62s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 7, 294734, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:07,314 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:23:07,314 INFO sqlalchemy.engine.Engine [cached since 5.616s ago] (7,)
2026-02-11 00:23:07,319 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:23:07,319 INFO sqlalchemy.engine.Engine [cached since 5.621s ago] (7,)
2026-02-11 00:23:07,319 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:23:07,319 INFO sqlalchemy.engine.Engine [cached since 5.617s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 7, 286649, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:07,325 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:23:07,325 INFO sqlalchemy.engine.Engine [cached since 5.613s ago] ('pending', 'running', 7, 10)
2026-02-11 00:23:07,325 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:23:07,325 INFO sqlalchemy.engine.Engine [cached since 5.622s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 7, 294734, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:07,329 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:23:07,329 INFO sqlalchemy.engine.Engine [cached since 5.618s ago] ('pending', 'running', 7, 10)
2026-02-11 00:23:07,330 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:23:07,330 INFO sqlalchemy.engine.Engine [cached since 5.612s ago] (7,)
2026-02-11 00:23:07,341 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:07,341 INFO sqlalchemy.engine.Engine [cached since 5.617s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 7, 286649, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:07,342 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:23:07,342 INFO sqlalchemy.engine.Engine [cached since 5.624s ago] (7,)
2026-02-11 00:23:07,346 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:23:07,346 INFO sqlalchemy.engine.Engine [cached since 5.615s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 23, 7, 346548, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:23:07,347 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:07,347 INFO sqlalchemy.engine.Engine [cached since 5.623s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 7, 294734, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:07,352 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:23:07,352 INFO sqlalchemy.engine.Engine [cached since 5.621s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 23, 7, 352097, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49590 - "GET /api/v1/dashboard/stats HTTP/1.1" 200 OK
2026-02-11 00:23:07,352 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49566 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:23:07,358 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:23:17,219 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:17,221 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:23:17,221 INFO sqlalchemy.engine.Engine [cached since 15.6s ago] ('gurinonyoman',)
2026-02-11 00:23:17,228 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:23:17,228 INFO sqlalchemy.engine.Engine [cached since 15.55s ago] (7,)
2026-02-11 00:23:17,234 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:23:17,234 INFO sqlalchemy.engine.Engine [cached since 15.56s ago] ('active', 7)
2026-02-11 00:23:17,241 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:23:17,241 INFO sqlalchemy.engine.Engine [cached since 15.56s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:23:17,247 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:17,247 INFO sqlalchemy.engine.Engine [cached since 15.56s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 17, 227643, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:17,253 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:17,253 INFO sqlalchemy.engine.Engine [cached since 15.56s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 17, 227643, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:17,258 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:23:17,258 INFO sqlalchemy.engine.Engine [cached since 15.56s ago] (7,)
2026-02-11 00:23:17,262 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:23:17,262 INFO sqlalchemy.engine.Engine [cached since 15.56s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 17, 227643, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:17,267 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:23:17,268 INFO sqlalchemy.engine.Engine [cached since 15.56s ago] ('pending', 'running', 7, 10)
2026-02-11 00:23:17,275 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:23:17,275 INFO sqlalchemy.engine.Engine [cached since 15.56s ago] (7,)
2026-02-11 00:23:17,281 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:17,281 INFO sqlalchemy.engine.Engine [cached since 15.56s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 17, 227643, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:17,288 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:23:17,288 INFO sqlalchemy.engine.Engine [cached since 15.56s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 23, 17, 287664, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49630 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:23:17,295 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:23:27,230 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:27,231 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:23:27,231 INFO sqlalchemy.engine.Engine [cached since 25.61s ago] ('gurinonyoman',)
2026-02-11 00:23:27,240 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:23:27,240 INFO sqlalchemy.engine.Engine [cached since 25.57s ago] (7,)
2026-02-11 00:23:27,245 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:23:27,245 INFO sqlalchemy.engine.Engine [cached since 25.57s ago] ('active', 7)
2026-02-11 00:23:27,250 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:23:27,250 INFO sqlalchemy.engine.Engine [cached since 25.57s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:23:27,254 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:27,254 INFO sqlalchemy.engine.Engine [cached since 25.56s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 27, 239720, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:27,258 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:27,258 INFO sqlalchemy.engine.Engine [cached since 25.56s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 27, 239720, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:27,263 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:23:27,263 INFO sqlalchemy.engine.Engine [cached since 25.57s ago] (7,)
2026-02-11 00:23:27,270 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:23:27,270 INFO sqlalchemy.engine.Engine [cached since 25.57s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 27, 239720, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:27,277 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:23:27,277 INFO sqlalchemy.engine.Engine [cached since 25.57s ago] ('pending', 'running', 7, 10)
2026-02-11 00:23:27,290 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:23:27,290 INFO sqlalchemy.engine.Engine [cached since 25.57s ago] (7,)
2026-02-11 00:23:27,296 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:27,296 INFO sqlalchemy.engine.Engine [cached since 25.57s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 27, 239720, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:27,303 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:23:27,304 INFO sqlalchemy.engine.Engine [cached since 25.57s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 23, 27, 302727, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49648 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:23:27,311 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:23:37,217 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:37,217 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:23:37,217 INFO sqlalchemy.engine.Engine [cached since 35.6s ago] ('gurinonyoman',)
2026-02-11 00:23:37,223 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:23:37,224 INFO sqlalchemy.engine.Engine [cached since 35.55s ago] (7,)
2026-02-11 00:23:37,229 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:23:37,229 INFO sqlalchemy.engine.Engine [cached since 35.55s ago] ('active', 7)
2026-02-11 00:23:37,234 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:23:37,234 INFO sqlalchemy.engine.Engine [cached since 35.55s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:23:37,239 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:37,240 INFO sqlalchemy.engine.Engine [cached since 35.55s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 37, 223079, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:37,244 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:37,245 INFO sqlalchemy.engine.Engine [cached since 35.55s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 37, 223079, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:37,249 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:23:37,249 INFO sqlalchemy.engine.Engine [cached since 35.55s ago] (7,)
2026-02-11 00:23:37,254 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:23:37,254 INFO sqlalchemy.engine.Engine [cached since 35.55s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 37, 223079, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:37,259 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:23:37,259 INFO sqlalchemy.engine.Engine [cached since 35.55s ago] ('pending', 'running', 7, 10)
2026-02-11 00:23:37,264 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:23:37,264 INFO sqlalchemy.engine.Engine [cached since 35.55s ago] (7,)
2026-02-11 00:23:37,269 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:37,269 INFO sqlalchemy.engine.Engine [cached since 35.55s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 37, 223079, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:37,278 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:23:37,278 INFO sqlalchemy.engine.Engine [cached since 35.55s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 23, 37, 277946, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49667 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:23:37,284 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:23:47,220 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:47,221 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:23:47,221 INFO sqlalchemy.engine.Engine [cached since 45.6s ago] ('gurinonyoman',)
2026-02-11 00:23:47,227 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:23:47,227 INFO sqlalchemy.engine.Engine [cached since 45.55s ago] (7,)
2026-02-11 00:23:47,232 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:23:47,232 INFO sqlalchemy.engine.Engine [cached since 45.55s ago] ('active', 7)
2026-02-11 00:23:47,236 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:23:47,236 INFO sqlalchemy.engine.Engine [cached since 45.55s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:23:47,240 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:47,241 INFO sqlalchemy.engine.Engine [cached since 45.55s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 47, 227140, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:47,246 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:47,246 INFO sqlalchemy.engine.Engine [cached since 45.55s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 47, 227140, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:47,249 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:23:47,250 INFO sqlalchemy.engine.Engine [cached since 45.55s ago] (7,)
2026-02-11 00:23:47,256 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:23:47,256 INFO sqlalchemy.engine.Engine [cached since 45.55s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 47, 227140, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:47,261 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:23:47,261 INFO sqlalchemy.engine.Engine [cached since 45.55s ago] ('pending', 'running', 7, 10)
2026-02-11 00:23:47,266 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:23:47,266 INFO sqlalchemy.engine.Engine [cached since 45.55s ago] (7,)
2026-02-11 00:23:47,271 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:47,271 INFO sqlalchemy.engine.Engine [cached since 45.55s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 47, 227140, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:47,277 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:23:47,277 INFO sqlalchemy.engine.Engine [cached since 45.55s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 23, 47, 277327, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49685 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:23:47,283 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:23:57,217 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:23:57,219 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:23:57,219 INFO sqlalchemy.engine.Engine [cached since 55.6s ago] ('gurinonyoman',)
2026-02-11 00:23:57,225 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:23:57,225 INFO sqlalchemy.engine.Engine [cached since 55.55s ago] (7,)
2026-02-11 00:23:57,230 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:23:57,230 INFO sqlalchemy.engine.Engine [cached since 55.55s ago] ('active', 7)
2026-02-11 00:23:57,234 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:23:57,235 INFO sqlalchemy.engine.Engine [cached since 55.55s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:23:57,239 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:57,240 INFO sqlalchemy.engine.Engine [cached since 55.55s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 57, 224680, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:57,245 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:57,245 INFO sqlalchemy.engine.Engine [cached since 55.55s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 57, 224680, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:57,250 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:23:57,250 INFO sqlalchemy.engine.Engine [cached since 55.55s ago] (7,)
2026-02-11 00:23:57,255 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:23:57,255 INFO sqlalchemy.engine.Engine [cached since 55.55s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 57, 224680, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:57,260 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:23:57,260 INFO sqlalchemy.engine.Engine [cached since 55.55s ago] ('pending', 'running', 7, 10)
2026-02-11 00:23:57,267 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:23:57,267 INFO sqlalchemy.engine.Engine [cached since 55.55s ago] (7,)
2026-02-11 00:23:57,271 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:23:57,271 INFO sqlalchemy.engine.Engine [cached since 55.55s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 23, 57, 224680, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:23:57,277 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:23:57,278 INFO sqlalchemy.engine.Engine [cached since 55.55s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 23, 57, 277401, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49700 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:23:57,285 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:24:00,375 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:00,376 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:00,376 INFO sqlalchemy.engine.Engine [cached since 58.76s ago] ('gurinonyoman',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:49700 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:24:00,390 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:24:00,461 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:00,461 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:00,461 INFO sqlalchemy.engine.Engine [cached since 58.84s ago] ('gurinonyoman',)
2026-02-11 00:24:00,462 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:00,462 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:00,462 INFO sqlalchemy.engine.Engine [cached since 58.84s ago] ('gurinonyoman',)
2026-02-11 00:24:00,469 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:00,469 INFO sqlalchemy.engine.Engine [cached since 58.79s ago] (7,)
2026-02-11 00:24:00,469 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:00,469 INFO sqlalchemy.engine.Engine [cached since 58.79s ago] (7,)
2026-02-11 00:24:00,475 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:00,475 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] ('active', 7)
2026-02-11 00:24:00,476 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:00,476 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] ('active', 7)
2026-02-11 00:24:00,481 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:00,481 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:00,481 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:00,481 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:00,486 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:00,486 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 0, 468796, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:00,486 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:00,486 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 0, 469289, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:00,492 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:00,492 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 0, 469289, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:00,492 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:00,492 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 0, 468796, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:00,497 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:00,497 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] (7,)
2026-02-11 00:24:00,498 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:00,498 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] (7,)
2026-02-11 00:24:00,502 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:00,502 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 0, 468796, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:00,503 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:00,503 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 0, 469289, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:00,509 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:00,509 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:00,509 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:00,510 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:00,515 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:00,516 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] (7,)
2026-02-11 00:24:00,517 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:00,517 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] (7,)
2026-02-11 00:24:00,520 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:00,520 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 0, 468796, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:00,520 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:00,520 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 0, 469289, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:00,529 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:00,529 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 0, 529076, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:24:00,529 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:00,529 INFO sqlalchemy.engine.Engine [cached since 58.8s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 0, 529804, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49700 - "GET /api/v1/dashboard/stats HTTP/1.1" 200 OK
2026-02-11 00:24:00,535 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49715 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:24:00,536 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:24:01,448 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:01,449 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:01,449 INFO sqlalchemy.engine.Engine [cached since 59.83s ago] ('gurinonyoman',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:49715 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:24:01,455 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:24:01,510 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:01,510 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:01,510 INFO sqlalchemy.engine.Engine [cached since 59.89s ago] ('gurinonyoman',)
2026-02-11 00:24:01,511 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:01,511 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:01,511 INFO sqlalchemy.engine.Engine [cached since 59.89s ago] ('gurinonyoman',)
2026-02-11 00:24:01,516 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:01,517 INFO sqlalchemy.engine.Engine [cached since 59.84s ago] (7,)
2026-02-11 00:24:01,518 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:01,519 INFO sqlalchemy.engine.Engine [cached since 59.84s ago] (7,)
2026-02-11 00:24:01,521 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:01,521 INFO sqlalchemy.engine.Engine [cached since 59.84s ago] ('active', 7)
2026-02-11 00:24:01,522 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:01,522 INFO sqlalchemy.engine.Engine [cached since 59.84s ago] ('active', 7)
2026-02-11 00:24:01,529 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:01,529 INFO sqlalchemy.engine.Engine [cached since 59.84s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:01,530 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:01,530 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:01,535 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:01,535 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 1, 516030, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:01,536 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:01,536 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 1, 518457, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:01,542 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:01,542 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 1, 516030, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:01,543 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:01,543 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 1, 518457, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:01,546 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:01,546 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] (7,)
2026-02-11 00:24:01,547 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:01,548 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] (7,)
2026-02-11 00:24:01,551 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:01,551 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 1, 516030, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:01,552 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:01,552 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 1, 518457, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:01,557 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:01,557 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:01,558 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:01,558 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:01,563 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:01,563 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] (7,)
2026-02-11 00:24:01,565 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:01,565 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] (7,)
2026-02-11 00:24:01,569 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:01,570 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 1, 516030, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:01,571 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:01,571 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 1, 518457, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:01,577 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:01,577 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 1, 577278, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:24:01,579 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:01,579 INFO sqlalchemy.engine.Engine [cached since 59.85s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 1, 578556, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49700 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49715 - "GET /api/v1/dashboard/stats HTTP/1.1" 200 OK
2026-02-11 00:24:01,585 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:24:01,586 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:24:01,985 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:01,985 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:01,986 INFO sqlalchemy.engine.Engine [cached since 60.37s ago] ('gurinonyoman',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:49715 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:24:01,992 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:24:02,041 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:02,042 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:02,042 INFO sqlalchemy.engine.Engine [cached since 60.42s ago] ('gurinonyoman',)
2026-02-11 00:24:02,042 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:02,042 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:02,042 INFO sqlalchemy.engine.Engine [cached since 60.42s ago] ('gurinonyoman',)
2026-02-11 00:24:02,047 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:02,047 INFO sqlalchemy.engine.Engine [cached since 60.37s ago] (7,)
2026-02-11 00:24:02,049 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:02,049 INFO sqlalchemy.engine.Engine [cached since 60.37s ago] (7,)
2026-02-11 00:24:02,053 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:02,054 INFO sqlalchemy.engine.Engine [cached since 60.37s ago] ('active', 7)
2026-02-11 00:24:02,055 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:02,055 INFO sqlalchemy.engine.Engine [cached since 60.38s ago] ('active', 7)
2026-02-11 00:24:02,060 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:02,060 INFO sqlalchemy.engine.Engine [cached since 60.38s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:02,061 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:02,061 INFO sqlalchemy.engine.Engine [cached since 60.38s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:02,066 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,066 INFO sqlalchemy.engine.Engine [cached since 60.38s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 46964, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,067 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,067 INFO sqlalchemy.engine.Engine [cached since 60.38s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 48926, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,073 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,073 INFO sqlalchemy.engine.Engine [cached since 60.38s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 46964, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,074 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,074 INFO sqlalchemy.engine.Engine [cached since 60.38s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 48926, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,081 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:02,081 INFO sqlalchemy.engine.Engine [cached since 60.38s ago] (7,)
2026-02-11 00:24:02,082 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:02,082 INFO sqlalchemy.engine.Engine [cached since 60.38s ago] (7,)
2026-02-11 00:24:02,087 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:02,087 INFO sqlalchemy.engine.Engine [cached since 60.38s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 46964, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,088 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:02,088 INFO sqlalchemy.engine.Engine [cached since 60.39s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 48926, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,093 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:02,093 INFO sqlalchemy.engine.Engine [cached since 60.38s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:02,095 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:02,095 INFO sqlalchemy.engine.Engine [cached since 60.38s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:02,099 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:02,099 INFO sqlalchemy.engine.Engine [cached since 60.38s ago] (7,)
2026-02-11 00:24:02,105 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:02,105 INFO sqlalchemy.engine.Engine [cached since 60.39s ago] (7,)
2026-02-11 00:24:02,107 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,108 INFO sqlalchemy.engine.Engine [cached since 60.38s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 46964, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,110 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,111 INFO sqlalchemy.engine.Engine [cached since 60.39s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 48926, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,115 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:02,115 INFO sqlalchemy.engine.Engine [cached since 60.38s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 2, 114320, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:24:02,117 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:02,117 INFO sqlalchemy.engine.Engine [cached since 60.39s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 2, 116851, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
2026-02-11 00:24:02,119 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 200
2026-02-11 00:24:02,122 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:24:02,161 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:02,161 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:02,161 INFO sqlalchemy.engine.Engine [cached since 60.54s ago] ('gurinonyoman',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:49730 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:24:02,170 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:24:02,218 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:02,219 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:02,219 INFO sqlalchemy.engine.Engine [cached since 60.6s ago] ('gurinonyoman',)
2026-02-11 00:24:02,219 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:02,219 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:02,219 INFO sqlalchemy.engine.Engine [cached since 60.6s ago] ('gurinonyoman',)
2026-02-11 00:24:02,228 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:02,228 INFO sqlalchemy.engine.Engine [cached since 60.55s ago] (7,)
2026-02-11 00:24:02,229 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:02,230 INFO sqlalchemy.engine.Engine [cached since 60.56s ago] (7,)
2026-02-11 00:24:02,233 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:02,233 INFO sqlalchemy.engine.Engine [cached since 60.55s ago] ('active', 7)
2026-02-11 00:24:02,234 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:02,234 INFO sqlalchemy.engine.Engine [cached since 60.55s ago] ('active', 7)
2026-02-11 00:24:02,238 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:02,238 INFO sqlalchemy.engine.Engine [cached since 60.55s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:02,240 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:02,240 INFO sqlalchemy.engine.Engine [cached since 60.56s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:02,243 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,243 INFO sqlalchemy.engine.Engine [cached since 60.55s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 227994, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,244 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,244 INFO sqlalchemy.engine.Engine [cached since 60.56s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 229461, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,249 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,249 INFO sqlalchemy.engine.Engine [cached since 60.55s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 227994, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,251 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,251 INFO sqlalchemy.engine.Engine [cached since 60.56s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 229461, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,254 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:02,254 INFO sqlalchemy.engine.Engine [cached since 60.56s ago] (7,)
2026-02-11 00:24:02,255 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:02,255 INFO sqlalchemy.engine.Engine [cached since 60.56s ago] (7,)
2026-02-11 00:24:02,260 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:02,260 INFO sqlalchemy.engine.Engine [cached since 60.56s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 227994, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,262 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:02,262 INFO sqlalchemy.engine.Engine [cached since 60.56s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 229461, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,265 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:02,265 INFO sqlalchemy.engine.Engine [cached since 60.55s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:02,266 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:02,267 INFO sqlalchemy.engine.Engine [cached since 60.56s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:02,274 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:02,274 INFO sqlalchemy.engine.Engine [cached since 60.56s ago] (7,)
2026-02-11 00:24:02,276 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:02,276 INFO sqlalchemy.engine.Engine [cached since 60.56s ago] (7,)
2026-02-11 00:24:02,283 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,283 INFO sqlalchemy.engine.Engine [cached since 60.56s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 227994, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,284 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,284 INFO sqlalchemy.engine.Engine [cached since 60.56s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 229461, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:24:02,291 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:02,291 INFO sqlalchemy.engine.Engine [cached since 60.56s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 2, 290846, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:24:02,293 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:02,293 INFO sqlalchemy.engine.Engine [cached since 60.56s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 2, 292801, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
2026-02-11 00:24:02,296 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 200
2026-02-11 00:24:02,300 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:24:02,323 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:02,323 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:02,323 INFO sqlalchemy.engine.Engine [cached since 60.71s ago] ('gurinonyoman',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:49739 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:24:02,330 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:24:02,378 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:02,379 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:02,379 INFO sqlalchemy.engine.Engine [cached since 60.76s ago] ('gurinonyoman',)
2026-02-11 00:24:02,379 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:02,379 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:02,379 INFO sqlalchemy.engine.Engine [cached since 60.76s ago] ('gurinonyoman',)
2026-02-11 00:24:02,384 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:02,385 INFO sqlalchemy.engine.Engine [cached since 60.71s ago] (7,)
2026-02-11 00:24:02,386 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:02,386 INFO sqlalchemy.engine.Engine [cached since 60.71s ago] (7,)
2026-02-11 00:24:02,389 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:02,389 INFO sqlalchemy.engine.Engine [cached since 60.71s ago] ('active', 7)
2026-02-11 00:24:02,391 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:02,391 INFO sqlalchemy.engine.Engine [cached since 60.71s ago] ('active', 7)
2026-02-11 00:24:02,395 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:02,395 INFO sqlalchemy.engine.Engine [cached since 60.71s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:02,397 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:02,397 INFO sqlalchemy.engine.Engine [cached since 60.71s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:02,400 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,400 INFO sqlalchemy.engine.Engine [cached since 60.71s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 384178, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,402 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,402 INFO sqlalchemy.engine.Engine [cached since 60.71s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 386075, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,406 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,406 INFO sqlalchemy.engine.Engine [cached since 60.71s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 384178, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,407 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,407 INFO sqlalchemy.engine.Engine [cached since 60.71s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 386075, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:24:02,413 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:02,413 INFO sqlalchemy.engine.Engine [cached since 60.71s ago] (7,)
2026-02-11 00:24:02,414 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:02,414 INFO sqlalchemy.engine.Engine [cached since 60.72s ago] (7,)
2026-02-11 00:24:02,421 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:02,421 INFO sqlalchemy.engine.Engine [cached since 60.72s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 384178, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,422 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:02,422 INFO sqlalchemy.engine.Engine [cached since 60.72s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 386075, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,427 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:02,427 INFO sqlalchemy.engine.Engine [cached since 60.72s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:02,429 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:02,429 INFO sqlalchemy.engine.Engine [cached since 60.72s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:02,435 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:02,435 INFO sqlalchemy.engine.Engine [cached since 60.72s ago] (7,)
2026-02-11 00:24:02,441 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:02,442 INFO sqlalchemy.engine.Engine [cached since 60.72s ago] (7,)
2026-02-11 00:24:02,443 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,443 INFO sqlalchemy.engine.Engine [cached since 60.72s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 384178, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,447 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,447 INFO sqlalchemy.engine.Engine [cached since 60.72s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 386075, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,468 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:02,468 INFO sqlalchemy.engine.Engine [cached since 60.74s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 2, 468071, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:24:02,470 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:02,470 INFO sqlalchemy.engine.Engine [cached since 60.74s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 2, 469836, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:24:02,474 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:02,474 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:02,474 INFO sqlalchemy.engine.Engine [cached since 60.86s ago] ('gurinonyoman',)
âœ… Response: GET /api/v1/dashboard/stats -> 200
2026-02-11 00:24:02,475 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 200
2026-02-11 00:24:02,476 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:49747 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:24:02,481 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:24:02,524 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:02,525 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:02,525 INFO sqlalchemy.engine.Engine [cached since 60.91s ago] ('gurinonyoman',)
2026-02-11 00:24:02,528 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:02,529 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:02,529 INFO sqlalchemy.engine.Engine [cached since 60.91s ago] ('gurinonyoman',)
2026-02-11 00:24:02,530 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:02,531 INFO sqlalchemy.engine.Engine [cached since 60.86s ago] (7,)
2026-02-11 00:24:02,534 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:02,534 INFO sqlalchemy.engine.Engine [cached since 60.86s ago] (7,)
2026-02-11 00:24:02,535 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:02,535 INFO sqlalchemy.engine.Engine [cached since 60.86s ago] ('active', 7)
2026-02-11 00:24:02,538 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:02,538 INFO sqlalchemy.engine.Engine [cached since 60.86s ago] ('active', 7)
2026-02-11 00:24:02,538 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:02,538 INFO sqlalchemy.engine.Engine [cached since 60.85s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:02,544 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:02,544 INFO sqlalchemy.engine.Engine [cached since 60.86s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:02,545 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,545 INFO sqlalchemy.engine.Engine [cached since 60.86s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 530459, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,548 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,548 INFO sqlalchemy.engine.Engine [cached since 60.86s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 533577, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,549 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,549 INFO sqlalchemy.engine.Engine [cached since 60.86s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 530459, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,555 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,555 INFO sqlalchemy.engine.Engine [cached since 60.86s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 533577, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,556 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:02,556 INFO sqlalchemy.engine.Engine [cached since 60.86s ago] (7,)
2026-02-11 00:24:02,560 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:02,560 INFO sqlalchemy.engine.Engine [cached since 60.86s ago] (7,)
2026-02-11 00:24:02,561 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:02,562 INFO sqlalchemy.engine.Engine [cached since 60.86s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 530459, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,565 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:02,565 INFO sqlalchemy.engine.Engine [cached since 60.86s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 533577, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,567 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:02,567 INFO sqlalchemy.engine.Engine [cached since 60.86s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:02,579 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:02,579 INFO sqlalchemy.engine.Engine [cached since 60.87s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:02,590 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:02,590 INFO sqlalchemy.engine.Engine [cached since 60.87s ago] (7,)
2026-02-11 00:24:02,591 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:02,591 INFO sqlalchemy.engine.Engine [cached since 60.87s ago] (7,)
2026-02-11 00:24:02,595 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,596 INFO sqlalchemy.engine.Engine [cached since 60.87s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 530459, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,597 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:02,597 INFO sqlalchemy.engine.Engine [cached since 60.87s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 2, 533577, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:02,601 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:02,601 INFO sqlalchemy.engine.Engine [cached since 60.87s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 2, 600926, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:24:02,603 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:02,603 INFO sqlalchemy.engine.Engine [cached since 60.87s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 2, 602634, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49747 - "GET /api/v1/dashboard/stats HTTP/1.1" 200 OK
2026-02-11 00:24:02,610 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49750 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:24:02,611 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:24:12,531 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:12,532 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:12,532 INFO sqlalchemy.engine.Engine [cached since 70.92s ago] ('gurinonyoman',)
2026-02-11 00:24:12,539 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:12,539 INFO sqlalchemy.engine.Engine [cached since 70.87s ago] (7,)
2026-02-11 00:24:12,545 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:12,545 INFO sqlalchemy.engine.Engine [cached since 70.87s ago] ('active', 7)
2026-02-11 00:24:12,551 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:12,551 INFO sqlalchemy.engine.Engine [cached since 70.87s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:12,557 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:12,557 INFO sqlalchemy.engine.Engine [cached since 70.87s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 12, 538371, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:12,563 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:12,563 INFO sqlalchemy.engine.Engine [cached since 70.87s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 12, 538371, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:12,569 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:12,569 INFO sqlalchemy.engine.Engine [cached since 70.87s ago] (7,)
2026-02-11 00:24:12,576 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:12,576 INFO sqlalchemy.engine.Engine [cached since 70.87s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 12, 538371, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:12,582 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:12,582 INFO sqlalchemy.engine.Engine [cached since 70.87s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:12,590 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:12,590 INFO sqlalchemy.engine.Engine [cached since 70.87s ago] (7,)
2026-02-11 00:24:12,598 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:12,599 INFO sqlalchemy.engine.Engine [cached since 70.87s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 12, 538371, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:12,614 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:12,614 INFO sqlalchemy.engine.Engine [cached since 70.88s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 12, 613259, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49773 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:24:12,622 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:24:22,556 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:22,557 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:22,557 INFO sqlalchemy.engine.Engine [cached since 80.94s ago] ('gurinonyoman',)
2026-02-11 00:24:22,564 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:22,564 INFO sqlalchemy.engine.Engine [cached since 80.89s ago] (7,)
2026-02-11 00:24:22,571 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:22,571 INFO sqlalchemy.engine.Engine [cached since 80.89s ago] ('active', 7)
2026-02-11 00:24:22,576 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:22,577 INFO sqlalchemy.engine.Engine [cached since 80.89s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:22,582 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:22,582 INFO sqlalchemy.engine.Engine [cached since 80.89s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 22, 562910, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:22,588 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:22,588 INFO sqlalchemy.engine.Engine [cached since 80.89s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 22, 562910, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:22,593 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:22,593 INFO sqlalchemy.engine.Engine [cached since 80.89s ago] (7,)
2026-02-11 00:24:22,599 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:22,599 INFO sqlalchemy.engine.Engine [cached since 80.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 22, 562910, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:22,604 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:22,605 INFO sqlalchemy.engine.Engine [cached since 80.89s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:22,611 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:22,611 INFO sqlalchemy.engine.Engine [cached since 80.89s ago] (7,)
2026-02-11 00:24:22,618 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:22,618 INFO sqlalchemy.engine.Engine [cached since 80.89s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 22, 562910, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:22,625 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:22,625 INFO sqlalchemy.engine.Engine [cached since 80.89s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 22, 624569, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49790 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:24:22,632 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:24:32,531 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:32,531 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:32,531 INFO sqlalchemy.engine.Engine [cached since 90.91s ago] ('gurinonyoman',)
2026-02-11 00:24:32,543 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:32,543 INFO sqlalchemy.engine.Engine [cached since 90.87s ago] (7,)
2026-02-11 00:24:32,549 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:32,549 INFO sqlalchemy.engine.Engine [cached since 90.87s ago] ('active', 7)
2026-02-11 00:24:32,556 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:32,556 INFO sqlalchemy.engine.Engine [cached since 90.87s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:32,562 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:32,562 INFO sqlalchemy.engine.Engine [cached since 90.87s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 32, 542827, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:32,568 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:32,568 INFO sqlalchemy.engine.Engine [cached since 90.87s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 32, 542827, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:32,573 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:32,573 INFO sqlalchemy.engine.Engine [cached since 90.88s ago] (7,)
2026-02-11 00:24:32,578 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:32,578 INFO sqlalchemy.engine.Engine [cached since 90.88s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 32, 542827, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:32,584 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:32,584 INFO sqlalchemy.engine.Engine [cached since 90.87s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:32,596 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:32,596 INFO sqlalchemy.engine.Engine [cached since 90.88s ago] (7,)
2026-02-11 00:24:32,601 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:32,601 INFO sqlalchemy.engine.Engine [cached since 90.88s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 32, 542827, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:32,611 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:32,611 INFO sqlalchemy.engine.Engine [cached since 90.88s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 32, 609547, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49809 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:24:32,618 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:24:42,527 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:42,528 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:42,528 INFO sqlalchemy.engine.Engine [cached since 100.9s ago] ('gurinonyoman',)
2026-02-11 00:24:42,533 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:42,533 INFO sqlalchemy.engine.Engine [cached since 100.9s ago] (7,)
2026-02-11 00:24:42,537 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:42,537 INFO sqlalchemy.engine.Engine [cached since 100.9s ago] ('active', 7)
2026-02-11 00:24:42,542 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:42,542 INFO sqlalchemy.engine.Engine [cached since 100.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:42,548 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:42,548 INFO sqlalchemy.engine.Engine [cached since 100.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 42, 533092, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:42,553 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:42,553 INFO sqlalchemy.engine.Engine [cached since 100.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 42, 533092, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:42,557 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:42,557 INFO sqlalchemy.engine.Engine [cached since 100.9s ago] (7,)
2026-02-11 00:24:42,562 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:42,562 INFO sqlalchemy.engine.Engine [cached since 100.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 42, 533092, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:42,566 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:42,566 INFO sqlalchemy.engine.Engine [cached since 100.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:42,571 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:42,571 INFO sqlalchemy.engine.Engine [cached since 100.9s ago] (7,)
2026-02-11 00:24:42,576 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:42,576 INFO sqlalchemy.engine.Engine [cached since 100.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 42, 533092, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:42,581 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:42,581 INFO sqlalchemy.engine.Engine [cached since 100.8s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 42, 580778, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49827 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:24:42,586 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:24:52,535 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:24:52,535 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:24:52,535 INFO sqlalchemy.engine.Engine [cached since 110.9s ago] ('gurinonyoman',)
2026-02-11 00:24:52,548 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:24:52,548 INFO sqlalchemy.engine.Engine [cached since 110.9s ago] (7,)
2026-02-11 00:24:52,553 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:24:52,553 INFO sqlalchemy.engine.Engine [cached since 110.9s ago] ('active', 7)
2026-02-11 00:24:52,558 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:24:52,558 INFO sqlalchemy.engine.Engine [cached since 110.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:24:52,562 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:52,562 INFO sqlalchemy.engine.Engine [cached since 110.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 52, 547745, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:52,566 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:52,566 INFO sqlalchemy.engine.Engine [cached since 110.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 52, 547745, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:52,572 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:24:52,572 INFO sqlalchemy.engine.Engine [cached since 110.9s ago] (7,)
2026-02-11 00:24:52,578 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:24:52,578 INFO sqlalchemy.engine.Engine [cached since 110.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 52, 547745, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:52,583 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:24:52,583 INFO sqlalchemy.engine.Engine [cached since 110.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:24:52,589 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:24:52,589 INFO sqlalchemy.engine.Engine [cached since 110.9s ago] (7,)
2026-02-11 00:24:52,593 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:24:52,593 INFO sqlalchemy.engine.Engine [cached since 110.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 24, 52, 547745, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:24:52,601 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:24:52,601 INFO sqlalchemy.engine.Engine [cached since 110.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 24, 52, 601473, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49849 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:24:52,606 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:25:02,533 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:25:02,534 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:25:02,534 INFO sqlalchemy.engine.Engine [cached since 120.9s ago] ('gurinonyoman',)
2026-02-11 00:25:02,542 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:25:02,542 INFO sqlalchemy.engine.Engine [cached since 120.9s ago] (7,)
2026-02-11 00:25:02,550 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:25:02,550 INFO sqlalchemy.engine.Engine [cached since 120.9s ago] ('active', 7)
2026-02-11 00:25:02,556 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:25:02,556 INFO sqlalchemy.engine.Engine [cached since 120.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:25:02,562 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:02,562 INFO sqlalchemy.engine.Engine [cached since 120.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 2, 541842, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:02,570 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:02,570 INFO sqlalchemy.engine.Engine [cached since 120.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 2, 541842, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:02,575 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:25:02,575 INFO sqlalchemy.engine.Engine [cached since 120.9s ago] (7,)
2026-02-11 00:25:02,581 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:25:02,581 INFO sqlalchemy.engine.Engine [cached since 120.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 2, 541842, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:02,587 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:25:02,587 INFO sqlalchemy.engine.Engine [cached since 120.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:25:02,596 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:25:02,597 INFO sqlalchemy.engine.Engine [cached since 120.9s ago] (7,)
2026-02-11 00:25:02,601 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:02,601 INFO sqlalchemy.engine.Engine [cached since 120.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 2, 541842, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:02,614 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:25:02,614 INFO sqlalchemy.engine.Engine [cached since 120.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 25, 2, 614539, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49869 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:25:02,621 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:25:12,533 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:25:12,533 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:25:12,533 INFO sqlalchemy.engine.Engine [cached since 130.9s ago] ('gurinonyoman',)
2026-02-11 00:25:12,542 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:25:12,542 INFO sqlalchemy.engine.Engine [cached since 130.9s ago] (7,)
2026-02-11 00:25:12,549 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:25:12,549 INFO sqlalchemy.engine.Engine [cached since 130.9s ago] ('active', 7)
2026-02-11 00:25:12,556 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:25:12,557 INFO sqlalchemy.engine.Engine [cached since 130.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:25:12,564 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:12,564 INFO sqlalchemy.engine.Engine [cached since 130.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 12, 541108, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:12,571 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:12,571 INFO sqlalchemy.engine.Engine [cached since 130.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 12, 541108, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:12,577 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:25:12,577 INFO sqlalchemy.engine.Engine [cached since 130.9s ago] (7,)
2026-02-11 00:25:12,584 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:25:12,585 INFO sqlalchemy.engine.Engine [cached since 130.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 12, 541108, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:12,592 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:25:12,592 INFO sqlalchemy.engine.Engine [cached since 130.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:25:12,608 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:25:12,608 INFO sqlalchemy.engine.Engine [cached since 130.9s ago] (7,)
2026-02-11 00:25:12,615 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:12,615 INFO sqlalchemy.engine.Engine [cached since 130.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 12, 541108, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:12,625 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:25:12,625 INFO sqlalchemy.engine.Engine [cached since 130.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 25, 12, 623587, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49890 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:25:12,632 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: POST /api/v1/accounts/auth/sync
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:25:19,834 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:25:19,835 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:25:19,835 INFO sqlalchemy.engine.Engine [cached since 138.2s ago] ('gurinonyoman',)
2026-02-11 00:25:19,835 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:25:19,836 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:25:19,836 INFO sqlalchemy.engine.Engine [cached since 138.2s ago] ('gurinonyoman',)
2026-02-11 00:25:19,842 INFO sqlalchemy.engine.Engine COMMIT
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:49911 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:25:19,844 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:25:19,893 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:25:19,894 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.id = %s
2026-02-11 00:25:19,894 INFO sqlalchemy.engine.Engine [cached since 138.4s ago] (7,)
2026-02-11 00:25:19,911 INFO sqlalchemy.engine.Engine UPDATE users SET last_jti=%s WHERE users.id = %s
2026-02-11 00:25:19,911 INFO sqlalchemy.engine.Engine [cached since 138.4s ago] ('9922a0dd-a5e2-4e47-9b3e-4997c0c5460c', 7)
2026-02-11 00:25:19,917 INFO sqlalchemy.engine.Engine COMMIT
âœ… Response: POST /api/v1/accounts/auth/sync -> 200
INFO:     127.0.0.1:49910 - "POST /api/v1/accounts/auth/sync HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:25:20,026 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:25:20,027 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:25:20,027 INFO sqlalchemy.engine.Engine [cached since 138.4s ago] ('gurinonyoman',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:49910 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:25:20,034 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:25:20,122 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:25:20,123 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:25:20,123 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] ('gurinonyoman',)
2026-02-11 00:25:20,124 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:25:20,124 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:25:20,124 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] ('gurinonyoman',)
2026-02-11 00:25:20,129 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:25:20,129 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] (7,)
2026-02-11 00:25:20,131 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:25:20,132 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] (7,)
2026-02-11 00:25:20,136 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:25:20,136 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] ('active', 7)
2026-02-11 00:25:20,137 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:25:20,137 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] ('active', 7)
2026-02-11 00:25:20,144 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:25:20,144 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:25:20,145 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:25:20,145 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:25:20,151 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:20,151 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 20, 131172, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:20,153 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:20,153 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 20, 128725, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:20,158 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:20,158 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 20, 131172, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:20,159 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:20,159 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 20, 128725, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:20,164 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:25:20,164 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] (7,)
2026-02-11 00:25:20,165 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:25:20,165 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] (7,)
2026-02-11 00:25:20,170 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:25:20,170 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 20, 131172, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:20,172 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:25:20,172 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 20, 128725, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:20,177 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:25:20,177 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] ('pending', 'running', 7, 10)
2026-02-11 00:25:20,179 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:25:20,179 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] ('pending', 'running', 7, 10)
2026-02-11 00:25:20,182 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:25:20,182 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] (7,)
2026-02-11 00:25:20,186 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:25:20,187 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] (7,)
2026-02-11 00:25:20,188 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:20,189 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 20, 131172, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:20,193 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:20,193 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 20, 128725, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:20,197 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:25:20,197 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 25, 20, 195964, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:25:20,201 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:25:20,201 INFO sqlalchemy.engine.Engine [cached since 138.5s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 25, 20, 200356, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49910 - "GET /api/v1/dashboard/stats HTTP/1.1" 200 OK
2026-02-11 00:25:20,206 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49911 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:25:20,211 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:25:30,105 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:25:30,106 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:25:30,106 INFO sqlalchemy.engine.Engine [cached since 148.5s ago] ('gurinonyoman',)
2026-02-11 00:25:30,113 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:25:30,114 INFO sqlalchemy.engine.Engine [cached since 148.4s ago] (7,)
2026-02-11 00:25:30,121 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:25:30,121 INFO sqlalchemy.engine.Engine [cached since 148.4s ago] ('active', 7)
2026-02-11 00:25:30,130 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:25:30,130 INFO sqlalchemy.engine.Engine [cached since 148.4s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:25:30,136 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:30,136 INFO sqlalchemy.engine.Engine [cached since 148.4s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 30, 112785, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:30,142 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:30,142 INFO sqlalchemy.engine.Engine [cached since 148.4s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 30, 112785, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:30,148 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:25:30,149 INFO sqlalchemy.engine.Engine [cached since 148.5s ago] (7,)
2026-02-11 00:25:30,154 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:25:30,154 INFO sqlalchemy.engine.Engine [cached since 148.5s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 30, 112785, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:30,159 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:25:30,160 INFO sqlalchemy.engine.Engine [cached since 148.4s ago] ('pending', 'running', 7, 10)
2026-02-11 00:25:30,166 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:25:30,166 INFO sqlalchemy.engine.Engine [cached since 148.4s ago] (7,)
2026-02-11 00:25:30,171 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:30,171 INFO sqlalchemy.engine.Engine [cached since 148.4s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 30, 112785, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:30,180 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:25:30,180 INFO sqlalchemy.engine.Engine [cached since 148.4s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 25, 30, 179678, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49932 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:25:30,189 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:25:40,131 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:25:40,131 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:25:40,131 INFO sqlalchemy.engine.Engine [cached since 158.5s ago] ('gurinonyoman',)
2026-02-11 00:25:40,138 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:25:40,138 INFO sqlalchemy.engine.Engine [cached since 158.5s ago] (7,)
2026-02-11 00:25:40,144 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:25:40,145 INFO sqlalchemy.engine.Engine [cached since 158.5s ago] ('active', 7)
2026-02-11 00:25:40,150 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:25:40,150 INFO sqlalchemy.engine.Engine [cached since 158.5s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:25:40,156 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:40,156 INFO sqlalchemy.engine.Engine [cached since 158.5s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 40, 137479, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:40,162 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:40,162 INFO sqlalchemy.engine.Engine [cached since 158.5s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 40, 137479, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:40,168 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:25:40,169 INFO sqlalchemy.engine.Engine [cached since 158.5s ago] (7,)
2026-02-11 00:25:40,176 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:25:40,176 INFO sqlalchemy.engine.Engine [cached since 158.5s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 40, 137479, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:40,182 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:25:40,183 INFO sqlalchemy.engine.Engine [cached since 158.5s ago] ('pending', 'running', 7, 10)
2026-02-11 00:25:40,189 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:25:40,190 INFO sqlalchemy.engine.Engine [cached since 158.5s ago] (7,)
2026-02-11 00:25:40,197 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:40,198 INFO sqlalchemy.engine.Engine [cached since 158.5s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 40, 137479, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:40,212 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:25:40,213 INFO sqlalchemy.engine.Engine [cached since 158.5s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 25, 40, 211901, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49949 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:25:40,221 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:25:50,110 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:25:50,111 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:25:50,111 INFO sqlalchemy.engine.Engine [cached since 168.5s ago] ('gurinonyoman',)
2026-02-11 00:25:50,120 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:25:50,120 INFO sqlalchemy.engine.Engine [cached since 168.4s ago] (7,)
2026-02-11 00:25:50,126 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:25:50,127 INFO sqlalchemy.engine.Engine [cached since 168.4s ago] ('active', 7)
2026-02-11 00:25:50,133 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:25:50,134 INFO sqlalchemy.engine.Engine [cached since 168.4s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:25:50,141 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:50,141 INFO sqlalchemy.engine.Engine [cached since 168.5s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 50, 118951, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:50,148 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:50,149 INFO sqlalchemy.engine.Engine [cached since 168.5s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 50, 118951, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:50,156 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:25:50,157 INFO sqlalchemy.engine.Engine [cached since 168.5s ago] (7,)
2026-02-11 00:25:50,165 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:25:50,165 INFO sqlalchemy.engine.Engine [cached since 168.5s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 50, 118951, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:50,172 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:25:50,172 INFO sqlalchemy.engine.Engine [cached since 168.5s ago] ('pending', 'running', 7, 10)
2026-02-11 00:25:50,181 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:25:50,182 INFO sqlalchemy.engine.Engine [cached since 168.5s ago] (7,)
2026-02-11 00:25:50,188 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:25:50,189 INFO sqlalchemy.engine.Engine [cached since 168.5s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 25, 50, 118951, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:25:50,198 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:25:50,198 INFO sqlalchemy.engine.Engine [cached since 168.5s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 25, 50, 197069, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49964 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:25:50,207 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:26:00,105 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:26:00,106 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:26:00,106 INFO sqlalchemy.engine.Engine [cached since 178.5s ago] ('gurinonyoman',)
2026-02-11 00:26:00,113 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:26:00,114 INFO sqlalchemy.engine.Engine [cached since 178.4s ago] (7,)
2026-02-11 00:26:00,120 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:26:00,120 INFO sqlalchemy.engine.Engine [cached since 178.4s ago] ('active', 7)
2026-02-11 00:26:00,127 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:26:00,127 INFO sqlalchemy.engine.Engine [cached since 178.4s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:26:00,134 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:00,134 INFO sqlalchemy.engine.Engine [cached since 178.4s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 0, 112721, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:00,140 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:00,140 INFO sqlalchemy.engine.Engine [cached since 178.4s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 0, 112721, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:00,149 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:26:00,149 INFO sqlalchemy.engine.Engine [cached since 178.5s ago] (7,)
2026-02-11 00:26:00,155 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:26:00,155 INFO sqlalchemy.engine.Engine [cached since 178.5s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 0, 112721, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:00,161 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:26:00,161 INFO sqlalchemy.engine.Engine [cached since 178.4s ago] ('pending', 'running', 7, 10)
2026-02-11 00:26:00,169 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:26:00,169 INFO sqlalchemy.engine.Engine [cached since 178.5s ago] (7,)
2026-02-11 00:26:00,175 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:00,175 INFO sqlalchemy.engine.Engine [cached since 178.5s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 0, 112721, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:00,187 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:26:00,188 INFO sqlalchemy.engine.Engine [cached since 178.5s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 26, 0, 186385, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49980 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:26:00,196 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:26:10,111 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:26:10,111 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:26:10,112 INFO sqlalchemy.engine.Engine [cached since 188.5s ago] ('gurinonyoman',)
2026-02-11 00:26:10,125 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:26:10,126 INFO sqlalchemy.engine.Engine [cached since 188.5s ago] (7,)
2026-02-11 00:26:10,133 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:26:10,134 INFO sqlalchemy.engine.Engine [cached since 188.5s ago] ('active', 7)
2026-02-11 00:26:10,140 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:26:10,140 INFO sqlalchemy.engine.Engine [cached since 188.5s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:26:10,146 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:10,147 INFO sqlalchemy.engine.Engine [cached since 188.5s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 10, 125293, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:10,154 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:10,154 INFO sqlalchemy.engine.Engine [cached since 188.5s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 10, 125293, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:10,162 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:26:10,162 INFO sqlalchemy.engine.Engine [cached since 188.5s ago] (7,)
2026-02-11 00:26:10,169 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:26:10,170 INFO sqlalchemy.engine.Engine [cached since 188.5s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 10, 125293, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:10,178 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:26:10,179 INFO sqlalchemy.engine.Engine [cached since 188.5s ago] ('pending', 'running', 7, 10)
2026-02-11 00:26:10,189 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:26:10,189 INFO sqlalchemy.engine.Engine [cached since 188.5s ago] (7,)
2026-02-11 00:26:10,195 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:10,196 INFO sqlalchemy.engine.Engine [cached since 188.5s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 10, 125293, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:10,205 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:26:10,205 INFO sqlalchemy.engine.Engine [cached since 188.5s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 26, 10, 204258, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:49996 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:26:10,215 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50008 - "OPTIONS /api/v1/dashboard/stats?period=yesterday HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:26:16,928 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:26:16,929 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:26:16,929 INFO sqlalchemy.engine.Engine [cached since 195.3s ago] ('gurinonyoman',)
2026-02-11 00:26:16,937 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:26:16,937 INFO sqlalchemy.engine.Engine [cached since 195.3s ago] (7,)
2026-02-11 00:26:16,943 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:26:16,943 INFO sqlalchemy.engine.Engine [cached since 195.3s ago] ('active', 7)
2026-02-11 00:26:16,950 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:26:16,950 INFO sqlalchemy.engine.Engine [cached since 195.3s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:26:16,957 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:16,957 INFO sqlalchemy.engine.Engine [cached since 195.3s ago] (datetime.datetime(2026, 2, 10, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 10, 23, 59, 59, 999999, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:16,963 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:16,963 INFO sqlalchemy.engine.Engine [cached since 195.3s ago] ('completed', datetime.datetime(2026, 2, 10, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 10, 23, 59, 59, 999999, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:16,970 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:26:16,970 INFO sqlalchemy.engine.Engine [cached since 195.3s ago] (7,)
2026-02-11 00:26:16,978 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:26:16,978 INFO sqlalchemy.engine.Engine [cached since 195.3s ago] (datetime.datetime(2026, 2, 10, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 10, 23, 59, 59, 999999, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:16,987 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:26:16,987 INFO sqlalchemy.engine.Engine [cached since 195.3s ago] ('pending', 'running', 7, 10)
2026-02-11 00:26:16,995 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:26:16,995 INFO sqlalchemy.engine.Engine [cached since 195.3s ago] (7,)
2026-02-11 00:26:17,002 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:17,002 INFO sqlalchemy.engine.Engine [cached since 195.3s ago] ('completed', datetime.datetime(2026, 2, 10, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 10, 23, 59, 59, 999999, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:17,011 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:26:17,011 INFO sqlalchemy.engine.Engine [cached since 195.3s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 26, 17, 10503, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50008 - "GET /api/v1/dashboard/stats?period=yesterday HTTP/1.1" 200 OK
2026-02-11 00:26:17,019 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:26:18,324 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:26:18,325 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:26:18,325 INFO sqlalchemy.engine.Engine [cached since 196.7s ago] ('gurinonyoman',)
2026-02-11 00:26:18,333 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:26:18,333 INFO sqlalchemy.engine.Engine [cached since 196.7s ago] (7,)
2026-02-11 00:26:18,340 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:26:18,341 INFO sqlalchemy.engine.Engine [cached since 196.7s ago] ('active', 7)
2026-02-11 00:26:18,346 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:26:18,346 INFO sqlalchemy.engine.Engine [cached since 196.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:26:18,354 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:18,355 INFO sqlalchemy.engine.Engine [cached since 196.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 18, 332138, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:18,362 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:18,362 INFO sqlalchemy.engine.Engine [cached since 196.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 18, 332138, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:18,369 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:26:18,369 INFO sqlalchemy.engine.Engine [cached since 196.7s ago] (7,)
2026-02-11 00:26:18,377 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:26:18,377 INFO sqlalchemy.engine.Engine [cached since 196.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 18, 332138, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:18,384 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:26:18,384 INFO sqlalchemy.engine.Engine [cached since 196.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:26:18,391 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:26:18,391 INFO sqlalchemy.engine.Engine [cached since 196.7s ago] (7,)
2026-02-11 00:26:18,396 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:18,396 INFO sqlalchemy.engine.Engine [cached since 196.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 18, 332138, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:18,404 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:26:18,405 INFO sqlalchemy.engine.Engine [cached since 196.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 26, 18, 404042, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50008 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:26:18,413 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:26:28,335 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:26:28,336 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:26:28,336 INFO sqlalchemy.engine.Engine [cached since 206.7s ago] ('gurinonyoman',)
2026-02-11 00:26:28,352 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:26:28,352 INFO sqlalchemy.engine.Engine [cached since 206.7s ago] (7,)
2026-02-11 00:26:28,362 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:26:28,362 INFO sqlalchemy.engine.Engine [cached since 206.7s ago] ('active', 7)
2026-02-11 00:26:28,370 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:26:28,370 INFO sqlalchemy.engine.Engine [cached since 206.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:26:28,379 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:28,379 INFO sqlalchemy.engine.Engine [cached since 206.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 28, 350865, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:28,387 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:28,387 INFO sqlalchemy.engine.Engine [cached since 206.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 28, 350865, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:28,395 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:26:28,395 INFO sqlalchemy.engine.Engine [cached since 206.7s ago] (7,)
2026-02-11 00:26:28,402 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:26:28,403 INFO sqlalchemy.engine.Engine [cached since 206.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 28, 350865, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:28,411 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:26:28,412 INFO sqlalchemy.engine.Engine [cached since 206.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:26:28,421 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:26:28,422 INFO sqlalchemy.engine.Engine [cached since 206.7s ago] (7,)
2026-02-11 00:26:28,429 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:28,430 INFO sqlalchemy.engine.Engine [cached since 206.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 28, 350865, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:28,440 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:26:28,440 INFO sqlalchemy.engine.Engine [cached since 206.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 26, 28, 438938, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50032 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:26:28,448 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:26:38,330 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:26:38,330 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:26:38,331 INFO sqlalchemy.engine.Engine [cached since 216.7s ago] ('gurinonyoman',)
2026-02-11 00:26:38,338 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:26:38,338 INFO sqlalchemy.engine.Engine [cached since 216.7s ago] (7,)
2026-02-11 00:26:38,346 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:26:38,346 INFO sqlalchemy.engine.Engine [cached since 216.7s ago] ('active', 7)
2026-02-11 00:26:38,355 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:26:38,355 INFO sqlalchemy.engine.Engine [cached since 216.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:26:38,363 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:38,363 INFO sqlalchemy.engine.Engine [cached since 216.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 38, 337424, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:38,374 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:38,374 INFO sqlalchemy.engine.Engine [cached since 216.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 38, 337424, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:38,382 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:26:38,382 INFO sqlalchemy.engine.Engine [cached since 216.7s ago] (7,)
2026-02-11 00:26:38,390 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:26:38,390 INFO sqlalchemy.engine.Engine [cached since 216.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 38, 337424, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:38,397 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:26:38,398 INFO sqlalchemy.engine.Engine [cached since 216.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:26:38,408 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:26:38,408 INFO sqlalchemy.engine.Engine [cached since 216.7s ago] (7,)
2026-02-11 00:26:38,417 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:38,417 INFO sqlalchemy.engine.Engine [cached since 216.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 38, 337424, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:38,426 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:26:38,426 INFO sqlalchemy.engine.Engine [cached since 216.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 26, 38, 424799, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50057 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:26:38,434 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:26:48,326 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:26:48,327 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:26:48,327 INFO sqlalchemy.engine.Engine [cached since 226.7s ago] ('gurinonyoman',)
2026-02-11 00:26:48,334 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:26:48,334 INFO sqlalchemy.engine.Engine [cached since 226.7s ago] (7,)
2026-02-11 00:26:48,339 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:26:48,339 INFO sqlalchemy.engine.Engine [cached since 226.7s ago] ('active', 7)
2026-02-11 00:26:48,344 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:26:48,344 INFO sqlalchemy.engine.Engine [cached since 226.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:26:48,349 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:48,349 INFO sqlalchemy.engine.Engine [cached since 226.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 48, 332987, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:48,354 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:48,354 INFO sqlalchemy.engine.Engine [cached since 226.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 48, 332987, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:48,362 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:26:48,362 INFO sqlalchemy.engine.Engine [cached since 226.7s ago] (7,)
2026-02-11 00:26:48,368 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:26:48,369 INFO sqlalchemy.engine.Engine [cached since 226.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 48, 332987, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:48,378 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:26:48,378 INFO sqlalchemy.engine.Engine [cached since 226.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:26:48,386 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:26:48,387 INFO sqlalchemy.engine.Engine [cached since 226.7s ago] (7,)
2026-02-11 00:26:48,394 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:48,394 INFO sqlalchemy.engine.Engine [cached since 226.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 48, 332987, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:48,404 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:26:48,404 INFO sqlalchemy.engine.Engine [cached since 226.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 26, 48, 402997, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50073 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:26:48,413 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:26:58,353 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:26:58,354 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:26:58,355 INFO sqlalchemy.engine.Engine [cached since 236.7s ago] ('gurinonyoman',)
2026-02-11 00:26:58,361 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:26:58,361 INFO sqlalchemy.engine.Engine [cached since 236.7s ago] (7,)
2026-02-11 00:26:58,367 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:26:58,368 INFO sqlalchemy.engine.Engine [cached since 236.7s ago] ('active', 7)
2026-02-11 00:26:58,373 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:26:58,374 INFO sqlalchemy.engine.Engine [cached since 236.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:26:58,380 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:58,381 INFO sqlalchemy.engine.Engine [cached since 236.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 58, 360899, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:58,387 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:58,387 INFO sqlalchemy.engine.Engine [cached since 236.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 58, 360899, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:58,392 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:26:58,392 INFO sqlalchemy.engine.Engine [cached since 236.7s ago] (7,)
2026-02-11 00:26:58,397 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:26:58,398 INFO sqlalchemy.engine.Engine [cached since 236.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 58, 360899, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:58,403 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:26:58,403 INFO sqlalchemy.engine.Engine [cached since 236.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:26:58,410 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:26:58,410 INFO sqlalchemy.engine.Engine [cached since 236.7s ago] (7,)
2026-02-11 00:26:58,418 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:26:58,418 INFO sqlalchemy.engine.Engine [cached since 236.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 26, 58, 360899, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:26:58,427 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:26:58,428 INFO sqlalchemy.engine.Engine [cached since 236.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 26, 58, 426572, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50091 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:26:58,435 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:27:08,323 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:27:08,324 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:27:08,324 INFO sqlalchemy.engine.Engine [cached since 246.7s ago] ('gurinonyoman',)
2026-02-11 00:27:08,331 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:27:08,331 INFO sqlalchemy.engine.Engine [cached since 246.7s ago] (7,)
2026-02-11 00:27:08,337 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:27:08,338 INFO sqlalchemy.engine.Engine [cached since 246.7s ago] ('active', 7)
2026-02-11 00:27:08,343 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:27:08,343 INFO sqlalchemy.engine.Engine [cached since 246.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:27:08,350 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:08,350 INFO sqlalchemy.engine.Engine [cached since 246.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 8, 331075, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:08,356 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:08,356 INFO sqlalchemy.engine.Engine [cached since 246.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 8, 331075, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:08,361 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:27:08,361 INFO sqlalchemy.engine.Engine [cached since 246.7s ago] (7,)
2026-02-11 00:27:08,365 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:27:08,366 INFO sqlalchemy.engine.Engine [cached since 246.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 8, 331075, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:08,371 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:27:08,371 INFO sqlalchemy.engine.Engine [cached since 246.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:27:08,378 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:27:08,378 INFO sqlalchemy.engine.Engine [cached since 246.7s ago] (7,)
2026-02-11 00:27:08,384 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:08,384 INFO sqlalchemy.engine.Engine [cached since 246.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 8, 331075, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:08,392 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:27:08,392 INFO sqlalchemy.engine.Engine [cached since 246.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 27, 8, 391641, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50107 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:27:08,399 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:27:18,323 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:27:18,323 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:27:18,323 INFO sqlalchemy.engine.Engine [cached since 256.7s ago] ('gurinonyoman',)
2026-02-11 00:27:18,331 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:27:18,331 INFO sqlalchemy.engine.Engine [cached since 256.7s ago] (7,)
2026-02-11 00:27:18,337 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:27:18,337 INFO sqlalchemy.engine.Engine [cached since 256.7s ago] ('active', 7)
2026-02-11 00:27:18,343 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:27:18,344 INFO sqlalchemy.engine.Engine [cached since 256.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:27:18,350 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:18,350 INFO sqlalchemy.engine.Engine [cached since 256.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 18, 330543, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:18,357 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:18,357 INFO sqlalchemy.engine.Engine [cached since 256.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 18, 330543, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:18,365 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:27:18,365 INFO sqlalchemy.engine.Engine [cached since 256.7s ago] (7,)
2026-02-11 00:27:18,371 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:27:18,372 INFO sqlalchemy.engine.Engine [cached since 256.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 18, 330543, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:18,378 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:27:18,378 INFO sqlalchemy.engine.Engine [cached since 256.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:27:18,384 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:27:18,384 INFO sqlalchemy.engine.Engine [cached since 256.7s ago] (7,)
2026-02-11 00:27:18,390 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:18,390 INFO sqlalchemy.engine.Engine [cached since 256.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 18, 330543, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:18,399 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:27:18,399 INFO sqlalchemy.engine.Engine [cached since 256.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 27, 18, 397816, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50123 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:27:18,407 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:27:28,317 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:27:28,318 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:27:28,318 INFO sqlalchemy.engine.Engine [cached since 266.7s ago] ('gurinonyoman',)
2026-02-11 00:27:28,323 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:27:28,323 INFO sqlalchemy.engine.Engine [cached since 266.6s ago] (7,)
2026-02-11 00:27:28,328 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:27:28,328 INFO sqlalchemy.engine.Engine [cached since 266.6s ago] ('active', 7)
2026-02-11 00:27:28,334 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:27:28,335 INFO sqlalchemy.engine.Engine [cached since 266.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:27:28,340 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:28,340 INFO sqlalchemy.engine.Engine [cached since 266.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 28, 323204, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:28,345 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:28,345 INFO sqlalchemy.engine.Engine [cached since 266.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 28, 323204, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:28,352 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:27:28,352 INFO sqlalchemy.engine.Engine [cached since 266.7s ago] (7,)
2026-02-11 00:27:28,359 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:27:28,359 INFO sqlalchemy.engine.Engine [cached since 266.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 28, 323204, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:28,365 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:27:28,365 INFO sqlalchemy.engine.Engine [cached since 266.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:27:28,371 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:27:28,371 INFO sqlalchemy.engine.Engine [cached since 266.7s ago] (7,)
2026-02-11 00:27:28,379 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:28,379 INFO sqlalchemy.engine.Engine [cached since 266.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 28, 323204, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:28,389 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:27:28,389 INFO sqlalchemy.engine.Engine [cached since 266.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 27, 28, 387925, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50139 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:27:28,398 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:27:38,327 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:27:38,328 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:27:38,329 INFO sqlalchemy.engine.Engine [cached since 276.7s ago] ('gurinonyoman',)
2026-02-11 00:27:38,335 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:27:38,335 INFO sqlalchemy.engine.Engine [cached since 276.7s ago] (7,)
2026-02-11 00:27:38,341 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:27:38,341 INFO sqlalchemy.engine.Engine [cached since 276.7s ago] ('active', 7)
2026-02-11 00:27:38,347 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:27:38,347 INFO sqlalchemy.engine.Engine [cached since 276.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:27:38,353 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:38,353 INFO sqlalchemy.engine.Engine [cached since 276.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 38, 334891, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:38,359 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:38,359 INFO sqlalchemy.engine.Engine [cached since 276.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 38, 334891, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:38,365 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:27:38,365 INFO sqlalchemy.engine.Engine [cached since 276.7s ago] (7,)
2026-02-11 00:27:38,371 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:27:38,371 INFO sqlalchemy.engine.Engine [cached since 276.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 38, 334891, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:38,377 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:27:38,377 INFO sqlalchemy.engine.Engine [cached since 276.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:27:38,383 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:27:38,384 INFO sqlalchemy.engine.Engine [cached since 276.7s ago] (7,)
2026-02-11 00:27:38,390 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:38,390 INFO sqlalchemy.engine.Engine [cached since 276.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 38, 334891, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:38,398 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:27:38,398 INFO sqlalchemy.engine.Engine [cached since 276.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 27, 38, 397988, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50156 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:27:38,406 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:27:48,328 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:27:48,329 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:27:48,329 INFO sqlalchemy.engine.Engine [cached since 286.7s ago] ('gurinonyoman',)
2026-02-11 00:27:48,335 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:27:48,335 INFO sqlalchemy.engine.Engine [cached since 286.7s ago] (7,)
2026-02-11 00:27:48,342 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:27:48,343 INFO sqlalchemy.engine.Engine [cached since 286.7s ago] ('active', 7)
2026-02-11 00:27:48,348 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:27:48,348 INFO sqlalchemy.engine.Engine [cached since 286.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:27:48,352 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:48,352 INFO sqlalchemy.engine.Engine [cached since 286.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 48, 334417, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:48,359 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:48,359 INFO sqlalchemy.engine.Engine [cached since 286.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 48, 334417, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:48,366 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:27:48,367 INFO sqlalchemy.engine.Engine [cached since 286.7s ago] (7,)
2026-02-11 00:27:48,374 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:27:48,374 INFO sqlalchemy.engine.Engine [cached since 286.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 48, 334417, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:48,380 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:27:48,380 INFO sqlalchemy.engine.Engine [cached since 286.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:27:48,387 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:27:48,388 INFO sqlalchemy.engine.Engine [cached since 286.7s ago] (7,)
2026-02-11 00:27:48,393 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:48,393 INFO sqlalchemy.engine.Engine [cached since 286.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 48, 334417, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:48,399 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:27:48,399 INFO sqlalchemy.engine.Engine [cached since 286.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 27, 48, 398572, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50172 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:27:48,406 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:27:58,321 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:27:58,322 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:27:58,322 INFO sqlalchemy.engine.Engine [cached since 296.7s ago] ('gurinonyoman',)
2026-02-11 00:27:58,329 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:27:58,330 INFO sqlalchemy.engine.Engine [cached since 296.7s ago] (7,)
2026-02-11 00:27:58,336 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:27:58,336 INFO sqlalchemy.engine.Engine [cached since 296.7s ago] ('active', 7)
2026-02-11 00:27:58,342 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:27:58,342 INFO sqlalchemy.engine.Engine [cached since 296.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:27:58,348 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:58,348 INFO sqlalchemy.engine.Engine [cached since 296.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 58, 328424, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:58,356 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:58,356 INFO sqlalchemy.engine.Engine [cached since 296.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 58, 328424, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:58,362 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:27:58,362 INFO sqlalchemy.engine.Engine [cached since 296.7s ago] (7,)
2026-02-11 00:27:58,368 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:27:58,369 INFO sqlalchemy.engine.Engine [cached since 296.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 58, 328424, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:58,374 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:27:58,375 INFO sqlalchemy.engine.Engine [cached since 296.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:27:58,380 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:27:58,381 INFO sqlalchemy.engine.Engine [cached since 296.7s ago] (7,)
2026-02-11 00:27:58,386 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:27:58,386 INFO sqlalchemy.engine.Engine [cached since 296.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 27, 58, 328424, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:27:58,393 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:27:58,394 INFO sqlalchemy.engine.Engine [cached since 296.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 27, 58, 392826, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50187 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:27:58,402 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:28:08,320 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:28:08,321 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:28:08,321 INFO sqlalchemy.engine.Engine [cached since 306.7s ago] ('gurinonyoman',)
2026-02-11 00:28:08,330 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:28:08,331 INFO sqlalchemy.engine.Engine [cached since 306.7s ago] (7,)
2026-02-11 00:28:08,336 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:28:08,337 INFO sqlalchemy.engine.Engine [cached since 306.7s ago] ('active', 7)
2026-02-11 00:28:08,342 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:28:08,342 INFO sqlalchemy.engine.Engine [cached since 306.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:28:08,347 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:08,348 INFO sqlalchemy.engine.Engine [cached since 306.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 8, 329651, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:08,352 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:08,352 INFO sqlalchemy.engine.Engine [cached since 306.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 8, 329651, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:08,358 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:28:08,358 INFO sqlalchemy.engine.Engine [cached since 306.7s ago] (7,)
2026-02-11 00:28:08,364 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:28:08,364 INFO sqlalchemy.engine.Engine [cached since 306.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 8, 329651, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:08,371 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:28:08,371 INFO sqlalchemy.engine.Engine [cached since 306.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:28:08,379 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:28:08,379 INFO sqlalchemy.engine.Engine [cached since 306.7s ago] (7,)
2026-02-11 00:28:08,384 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:08,384 INFO sqlalchemy.engine.Engine [cached since 306.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 8, 329651, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:08,393 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:28:08,393 INFO sqlalchemy.engine.Engine [cached since 306.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 28, 8, 392380, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50203 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:28:08,402 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:28:18,353 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:28:18,353 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:28:18,354 INFO sqlalchemy.engine.Engine [cached since 316.7s ago] ('gurinonyoman',)
2026-02-11 00:28:18,361 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:28:18,361 INFO sqlalchemy.engine.Engine [cached since 316.7s ago] (7,)
2026-02-11 00:28:18,368 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:28:18,368 INFO sqlalchemy.engine.Engine [cached since 316.7s ago] ('active', 7)
2026-02-11 00:28:18,374 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:28:18,374 INFO sqlalchemy.engine.Engine [cached since 316.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:28:18,380 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:18,380 INFO sqlalchemy.engine.Engine [cached since 316.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 18, 360117, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:18,386 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:18,387 INFO sqlalchemy.engine.Engine [cached since 316.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 18, 360117, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:18,391 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:28:18,392 INFO sqlalchemy.engine.Engine [cached since 316.7s ago] (7,)
2026-02-11 00:28:18,398 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:28:18,398 INFO sqlalchemy.engine.Engine [cached since 316.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 18, 360117, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:18,404 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:28:18,404 INFO sqlalchemy.engine.Engine [cached since 316.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:28:18,411 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:28:18,412 INFO sqlalchemy.engine.Engine [cached since 316.7s ago] (7,)
2026-02-11 00:28:18,419 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:18,419 INFO sqlalchemy.engine.Engine [cached since 316.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 18, 360117, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:18,507 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:28:18,507 INFO sqlalchemy.engine.Engine [cached since 316.8s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 28, 18, 507017, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50219 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:28:18,514 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:28:28,320 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:28:28,320 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:28:28,320 INFO sqlalchemy.engine.Engine [cached since 326.7s ago] ('gurinonyoman',)
2026-02-11 00:28:28,327 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:28:28,328 INFO sqlalchemy.engine.Engine [cached since 326.7s ago] (7,)
2026-02-11 00:28:28,334 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:28:28,334 INFO sqlalchemy.engine.Engine [cached since 326.7s ago] ('active', 7)
2026-02-11 00:28:28,339 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:28:28,339 INFO sqlalchemy.engine.Engine [cached since 326.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:28:28,346 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:28,346 INFO sqlalchemy.engine.Engine [cached since 326.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 28, 326798, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:28,353 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:28,353 INFO sqlalchemy.engine.Engine [cached since 326.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 28, 326798, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:28,359 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:28:28,359 INFO sqlalchemy.engine.Engine [cached since 326.7s ago] (7,)
2026-02-11 00:28:28,364 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:28:28,365 INFO sqlalchemy.engine.Engine [cached since 326.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 28, 326798, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:28,370 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:28:28,370 INFO sqlalchemy.engine.Engine [cached since 326.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:28:28,376 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:28:28,377 INFO sqlalchemy.engine.Engine [cached since 326.7s ago] (7,)
2026-02-11 00:28:28,385 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:28,385 INFO sqlalchemy.engine.Engine [cached since 326.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 28, 326798, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:28,391 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:28:28,391 INFO sqlalchemy.engine.Engine [cached since 326.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 28, 28, 390851, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50234 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:28:28,399 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:28:38,326 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:28:38,327 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:28:38,327 INFO sqlalchemy.engine.Engine [cached since 336.7s ago] ('gurinonyoman',)
2026-02-11 00:28:38,335 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:28:38,335 INFO sqlalchemy.engine.Engine [cached since 336.7s ago] (7,)
2026-02-11 00:28:38,341 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:28:38,341 INFO sqlalchemy.engine.Engine [cached since 336.7s ago] ('active', 7)
2026-02-11 00:28:38,348 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:28:38,348 INFO sqlalchemy.engine.Engine [cached since 336.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:28:38,355 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:38,355 INFO sqlalchemy.engine.Engine [cached since 336.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 38, 334842, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:38,361 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:38,361 INFO sqlalchemy.engine.Engine [cached since 336.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 38, 334842, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:38,367 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:28:38,367 INFO sqlalchemy.engine.Engine [cached since 336.7s ago] (7,)
2026-02-11 00:28:38,373 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:28:38,373 INFO sqlalchemy.engine.Engine [cached since 336.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 38, 334842, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:38,378 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:28:38,379 INFO sqlalchemy.engine.Engine [cached since 336.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:28:38,386 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:28:38,386 INFO sqlalchemy.engine.Engine [cached since 336.7s ago] (7,)
2026-02-11 00:28:38,391 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:38,392 INFO sqlalchemy.engine.Engine [cached since 336.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 38, 334842, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:38,401 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:28:38,401 INFO sqlalchemy.engine.Engine [cached since 336.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 28, 38, 399651, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50249 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:28:38,409 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:28:48,329 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:28:48,330 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:28:48,330 INFO sqlalchemy.engine.Engine [cached since 346.7s ago] ('gurinonyoman',)
2026-02-11 00:28:48,336 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:28:48,337 INFO sqlalchemy.engine.Engine [cached since 346.7s ago] (7,)
2026-02-11 00:28:48,342 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:28:48,343 INFO sqlalchemy.engine.Engine [cached since 346.7s ago] ('active', 7)
2026-02-11 00:28:48,348 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:28:48,348 INFO sqlalchemy.engine.Engine [cached since 346.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:28:48,355 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:48,355 INFO sqlalchemy.engine.Engine [cached since 346.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 48, 335720, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:48,361 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:48,361 INFO sqlalchemy.engine.Engine [cached since 346.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 48, 335720, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:48,367 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:28:48,367 INFO sqlalchemy.engine.Engine [cached since 346.7s ago] (7,)
2026-02-11 00:28:48,373 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:28:48,373 INFO sqlalchemy.engine.Engine [cached since 346.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 48, 335720, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:48,378 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:28:48,378 INFO sqlalchemy.engine.Engine [cached since 346.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:28:48,388 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:28:48,389 INFO sqlalchemy.engine.Engine [cached since 346.7s ago] (7,)
2026-02-11 00:28:48,394 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:48,394 INFO sqlalchemy.engine.Engine [cached since 346.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 48, 335720, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:48,401 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:28:48,401 INFO sqlalchemy.engine.Engine [cached since 346.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 28, 48, 400106, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50266 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:28:48,409 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:28:58,327 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:28:58,328 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:28:58,328 INFO sqlalchemy.engine.Engine [cached since 356.7s ago] ('gurinonyoman',)
2026-02-11 00:28:58,350 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:28:58,351 INFO sqlalchemy.engine.Engine [cached since 356.7s ago] (7,)
2026-02-11 00:28:58,357 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:28:58,357 INFO sqlalchemy.engine.Engine [cached since 356.7s ago] ('active', 7)
2026-02-11 00:28:58,364 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:28:58,364 INFO sqlalchemy.engine.Engine [cached since 356.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:28:58,370 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:58,370 INFO sqlalchemy.engine.Engine [cached since 356.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 58, 349487, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:58,376 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:58,376 INFO sqlalchemy.engine.Engine [cached since 356.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 58, 349487, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:58,381 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:28:58,381 INFO sqlalchemy.engine.Engine [cached since 356.7s ago] (7,)
2026-02-11 00:28:58,386 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:28:58,386 INFO sqlalchemy.engine.Engine [cached since 356.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 58, 349487, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:58,392 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:28:58,392 INFO sqlalchemy.engine.Engine [cached since 356.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:28:58,401 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:28:58,401 INFO sqlalchemy.engine.Engine [cached since 356.7s ago] (7,)
2026-02-11 00:28:58,407 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:28:58,407 INFO sqlalchemy.engine.Engine [cached since 356.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 28, 58, 349487, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:28:58,415 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:28:58,415 INFO sqlalchemy.engine.Engine [cached since 356.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 28, 58, 414631, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50284 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:28:58,423 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:29:08,325 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:29:08,326 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:29:08,326 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] ('gurinonyoman',)
2026-02-11 00:29:08,335 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:29:08,335 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] (7,)
2026-02-11 00:29:08,342 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:29:08,342 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] ('active', 7)
2026-02-11 00:29:08,349 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:29:08,350 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:29:08,357 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:08,357 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 8, 333910, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:08,364 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:08,364 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 8, 333910, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:08,371 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:29:08,371 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] (7,)
2026-02-11 00:29:08,380 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:29:08,380 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 8, 333910, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:08,387 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:29:08,387 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:29:08,395 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:29:08,395 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] (7,)
2026-02-11 00:29:08,402 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:08,402 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 8, 333910, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:08,413 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:29:08,413 INFO sqlalchemy.engine.Engine [cached since 366.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 29, 8, 411256, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50302 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:29:08,421 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:29:13,992 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:29:13,993 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:29:13,993 INFO sqlalchemy.engine.Engine [cached since 372.4s ago] ('gurinonyoman',)
2026-02-11 00:29:14,002 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:29:14,002 INFO sqlalchemy.engine.Engine [cached since 372.3s ago] (7,)
2026-02-11 00:29:14,010 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:29:14,010 INFO sqlalchemy.engine.Engine [cached since 372.3s ago] ('active', 7)
2026-02-11 00:29:14,017 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:29:14,018 INFO sqlalchemy.engine.Engine [cached since 372.3s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:29:14,026 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:14,026 INFO sqlalchemy.engine.Engine [cached since 372.3s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 14, 1568, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:14,034 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:14,034 INFO sqlalchemy.engine.Engine [cached since 372.3s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 14, 1568, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:14,040 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:29:14,040 INFO sqlalchemy.engine.Engine [cached since 372.3s ago] (7,)
2026-02-11 00:29:14,047 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:29:14,048 INFO sqlalchemy.engine.Engine [cached since 372.3s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 14, 1568, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:14,055 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:29:14,056 INFO sqlalchemy.engine.Engine [cached since 372.3s ago] ('pending', 'running', 7, 10)
2026-02-11 00:29:14,066 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:29:14,066 INFO sqlalchemy.engine.Engine [cached since 372.3s ago] (7,)
2026-02-11 00:29:14,073 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:14,073 INFO sqlalchemy.engine.Engine [cached since 372.3s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 14, 1568, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:14,082 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:29:14,082 INFO sqlalchemy.engine.Engine [cached since 372.4s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 29, 14, 81472, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50316 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:29:14,090 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:29:22,823 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:29:22,823 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:29:22,824 INFO sqlalchemy.engine.Engine [cached since 381.2s ago] ('gurinonyoman',)
2026-02-11 00:29:22,830 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:29:22,830 INFO sqlalchemy.engine.Engine [cached since 381.2s ago] (7,)
2026-02-11 00:29:22,836 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:29:22,836 INFO sqlalchemy.engine.Engine [cached since 381.2s ago] ('active', 7)
2026-02-11 00:29:22,842 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:29:22,842 INFO sqlalchemy.engine.Engine [cached since 381.2s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:29:22,848 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:22,848 INFO sqlalchemy.engine.Engine [cached since 381.2s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 22, 829111, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:22,854 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:22,855 INFO sqlalchemy.engine.Engine [cached since 381.2s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 22, 829111, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:22,860 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:29:22,860 INFO sqlalchemy.engine.Engine [cached since 381.2s ago] (7,)
2026-02-11 00:29:22,866 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:29:22,866 INFO sqlalchemy.engine.Engine [cached since 381.2s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 22, 829111, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:22,873 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:29:22,873 INFO sqlalchemy.engine.Engine [cached since 381.2s ago] ('pending', 'running', 7, 10)
2026-02-11 00:29:22,880 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:29:22,880 INFO sqlalchemy.engine.Engine [cached since 381.2s ago] (7,)
2026-02-11 00:29:22,887 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:22,887 INFO sqlalchemy.engine.Engine [cached since 381.2s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 22, 829111, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:22,895 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:29:22,895 INFO sqlalchemy.engine.Engine [cached since 381.2s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 29, 22, 893814, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50331 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:29:22,903 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:29:32,824 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:29:32,825 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:29:32,825 INFO sqlalchemy.engine.Engine [cached since 391.2s ago] ('gurinonyoman',)
2026-02-11 00:29:32,832 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:29:32,832 INFO sqlalchemy.engine.Engine [cached since 391.2s ago] (7,)
2026-02-11 00:29:32,839 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:29:32,839 INFO sqlalchemy.engine.Engine [cached since 391.2s ago] ('active', 7)
2026-02-11 00:29:32,845 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:29:32,845 INFO sqlalchemy.engine.Engine [cached since 391.2s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:29:32,852 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:32,852 INFO sqlalchemy.engine.Engine [cached since 391.2s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 32, 831464, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:32,858 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:32,858 INFO sqlalchemy.engine.Engine [cached since 391.2s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 32, 831464, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:32,864 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:29:32,865 INFO sqlalchemy.engine.Engine [cached since 391.2s ago] (7,)
2026-02-11 00:29:32,870 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:29:32,870 INFO sqlalchemy.engine.Engine [cached since 391.2s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 32, 831464, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:32,877 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:29:32,877 INFO sqlalchemy.engine.Engine [cached since 391.2s ago] ('pending', 'running', 7, 10)
2026-02-11 00:29:32,884 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:29:32,884 INFO sqlalchemy.engine.Engine [cached since 391.2s ago] (7,)
2026-02-11 00:29:32,890 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:32,891 INFO sqlalchemy.engine.Engine [cached since 391.2s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 32, 831464, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:32,899 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:29:32,899 INFO sqlalchemy.engine.Engine [cached since 391.2s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 29, 32, 898147, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50346 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:29:32,906 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:29:42,829 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:29:42,830 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:29:42,830 INFO sqlalchemy.engine.Engine [cached since 401.2s ago] ('gurinonyoman',)
2026-02-11 00:29:42,838 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:29:42,838 INFO sqlalchemy.engine.Engine [cached since 401.2s ago] (7,)
2026-02-11 00:29:42,844 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:29:42,845 INFO sqlalchemy.engine.Engine [cached since 401.2s ago] ('active', 7)
2026-02-11 00:29:42,851 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:29:42,851 INFO sqlalchemy.engine.Engine [cached since 401.2s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:29:42,858 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:42,858 INFO sqlalchemy.engine.Engine [cached since 401.2s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 42, 837364, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:42,865 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:42,865 INFO sqlalchemy.engine.Engine [cached since 401.2s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 42, 837364, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:42,871 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:29:42,871 INFO sqlalchemy.engine.Engine [cached since 401.2s ago] (7,)
2026-02-11 00:29:42,877 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:29:42,877 INFO sqlalchemy.engine.Engine [cached since 401.2s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 42, 837364, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:42,883 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:29:42,883 INFO sqlalchemy.engine.Engine [cached since 401.2s ago] ('pending', 'running', 7, 10)
2026-02-11 00:29:42,890 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:29:42,890 INFO sqlalchemy.engine.Engine [cached since 401.2s ago] (7,)
2026-02-11 00:29:42,896 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:42,896 INFO sqlalchemy.engine.Engine [cached since 401.2s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 42, 837364, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:42,904 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:29:42,904 INFO sqlalchemy.engine.Engine [cached since 401.2s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 29, 42, 903394, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50362 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:29:42,913 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:29:50,897 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:29:50,898 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:29:50,898 INFO sqlalchemy.engine.Engine [cached since 409.3s ago] ('gurinonyoman',)
2026-02-11 00:29:50,911 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:29:50,911 INFO sqlalchemy.engine.Engine [cached since 409.2s ago] (7,)
2026-02-11 00:29:50,917 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:29:50,917 INFO sqlalchemy.engine.Engine [cached since 409.2s ago] ('active', 7)
2026-02-11 00:29:50,923 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:29:50,924 INFO sqlalchemy.engine.Engine [cached since 409.2s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:29:50,929 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:50,929 INFO sqlalchemy.engine.Engine [cached since 409.2s ago] (datetime.datetime(2026, 2, 10, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 10, 23, 59, 59, 999999, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:50,936 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:50,936 INFO sqlalchemy.engine.Engine [cached since 409.2s ago] ('completed', datetime.datetime(2026, 2, 10, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 10, 23, 59, 59, 999999, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:50,942 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:29:50,942 INFO sqlalchemy.engine.Engine [cached since 409.2s ago] (7,)
2026-02-11 00:29:50,948 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:29:50,949 INFO sqlalchemy.engine.Engine [cached since 409.2s ago] (datetime.datetime(2026, 2, 10, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 10, 23, 59, 59, 999999, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:50,955 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:29:50,955 INFO sqlalchemy.engine.Engine [cached since 409.2s ago] ('pending', 'running', 7, 10)
2026-02-11 00:29:50,962 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:29:50,963 INFO sqlalchemy.engine.Engine [cached since 409.2s ago] (7,)
2026-02-11 00:29:50,969 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:50,970 INFO sqlalchemy.engine.Engine [cached since 409.2s ago] ('completed', datetime.datetime(2026, 2, 10, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 10, 23, 59, 59, 999999, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:50,978 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:29:50,979 INFO sqlalchemy.engine.Engine [cached since 409.2s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 29, 50, 977488, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50377 - "GET /api/v1/dashboard/stats?period=yesterday HTTP/1.1" 200 OK
2026-02-11 00:29:50,985 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50377 - "OPTIONS /api/v1/dashboard/stats?period=7days HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:29:51,454 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:29:51,455 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:29:51,455 INFO sqlalchemy.engine.Engine [cached since 409.8s ago] ('gurinonyoman',)
2026-02-11 00:29:51,463 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:29:51,463 INFO sqlalchemy.engine.Engine [cached since 409.8s ago] (7,)
2026-02-11 00:29:51,469 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:29:51,470 INFO sqlalchemy.engine.Engine [cached since 409.8s ago] ('active', 7)
2026-02-11 00:29:51,476 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:29:51,477 INFO sqlalchemy.engine.Engine [cached since 409.8s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:29:51,483 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:51,483 INFO sqlalchemy.engine.Engine [cached since 409.8s ago] (datetime.datetime(2026, 2, 5, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 51, 461923, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:51,489 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:51,489 INFO sqlalchemy.engine.Engine [cached since 409.8s ago] ('completed', datetime.datetime(2026, 2, 5, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 51, 461923, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:51,495 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:29:51,495 INFO sqlalchemy.engine.Engine [cached since 409.8s ago] (7,)
2026-02-11 00:29:51,500 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:29:51,500 INFO sqlalchemy.engine.Engine [cached since 409.8s ago] (datetime.datetime(2026, 2, 5, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 51, 461923, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:51,507 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:29:51,507 INFO sqlalchemy.engine.Engine [cached since 409.8s ago] ('pending', 'running', 7, 10)
2026-02-11 00:29:51,515 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:29:51,515 INFO sqlalchemy.engine.Engine [cached since 409.8s ago] (7,)
2026-02-11 00:29:51,524 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:51,524 INFO sqlalchemy.engine.Engine [cached since 409.8s ago] ('completed', datetime.datetime(2026, 2, 5, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 51, 461923, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:51,534 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:29:51,534 INFO sqlalchemy.engine.Engine [cached since 409.8s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 29, 51, 532964, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50377 - "GET /api/v1/dashboard/stats?period=7days HTTP/1.1" 200 OK
2026-02-11 00:29:51,543 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:29:52,035 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:29:52,036 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:29:52,036 INFO sqlalchemy.engine.Engine [cached since 410.4s ago] ('gurinonyoman',)
2026-02-11 00:29:52,043 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:29:52,043 INFO sqlalchemy.engine.Engine [cached since 410.4s ago] (7,)
2026-02-11 00:29:52,049 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:29:52,049 INFO sqlalchemy.engine.Engine [cached since 410.4s ago] ('active', 7)
2026-02-11 00:29:52,055 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:29:52,055 INFO sqlalchemy.engine.Engine [cached since 410.4s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:29:52,068 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:52,068 INFO sqlalchemy.engine.Engine [cached since 410.4s ago] (datetime.datetime(2026, 2, 10, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 10, 23, 59, 59, 999999, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:52,073 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:52,074 INFO sqlalchemy.engine.Engine [cached since 410.4s ago] ('completed', datetime.datetime(2026, 2, 10, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 10, 23, 59, 59, 999999, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:52,080 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:29:52,080 INFO sqlalchemy.engine.Engine [cached since 410.4s ago] (7,)
2026-02-11 00:29:52,086 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:29:52,086 INFO sqlalchemy.engine.Engine [cached since 410.4s ago] (datetime.datetime(2026, 2, 10, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 10, 23, 59, 59, 999999, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:52,093 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:29:52,093 INFO sqlalchemy.engine.Engine [cached since 410.4s ago] ('pending', 'running', 7, 10)
2026-02-11 00:29:52,100 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:29:52,100 INFO sqlalchemy.engine.Engine [cached since 410.4s ago] (7,)
2026-02-11 00:29:52,106 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:52,106 INFO sqlalchemy.engine.Engine [cached since 410.4s ago] ('completed', datetime.datetime(2026, 2, 10, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 10, 23, 59, 59, 999999, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:52,118 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:29:52,118 INFO sqlalchemy.engine.Engine [cached since 410.4s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 29, 52, 116763, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50377 - "GET /api/v1/dashboard/stats?period=yesterday HTTP/1.1" 200 OK
2026-02-11 00:29:52,127 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:29:52,537 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:29:52,538 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:29:52,538 INFO sqlalchemy.engine.Engine [cached since 410.9s ago] ('gurinonyoman',)
2026-02-11 00:29:52,545 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:29:52,545 INFO sqlalchemy.engine.Engine [cached since 410.9s ago] (7,)
2026-02-11 00:29:52,551 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:29:52,551 INFO sqlalchemy.engine.Engine [cached since 410.9s ago] ('active', 7)
2026-02-11 00:29:52,556 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:29:52,556 INFO sqlalchemy.engine.Engine [cached since 410.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:29:52,561 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:52,561 INFO sqlalchemy.engine.Engine [cached since 410.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 52, 544232, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:52,566 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:52,567 INFO sqlalchemy.engine.Engine [cached since 410.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 52, 544232, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:52,573 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:29:52,573 INFO sqlalchemy.engine.Engine [cached since 410.9s ago] (7,)
2026-02-11 00:29:52,578 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:29:52,578 INFO sqlalchemy.engine.Engine [cached since 410.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 52, 544232, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:52,584 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:29:52,584 INFO sqlalchemy.engine.Engine [cached since 410.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:29:52,591 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:29:52,592 INFO sqlalchemy.engine.Engine [cached since 410.9s ago] (7,)
2026-02-11 00:29:52,599 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:29:52,599 INFO sqlalchemy.engine.Engine [cached since 410.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 29, 52, 544232, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:29:52,608 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:29:52,609 INFO sqlalchemy.engine.Engine [cached since 410.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 29, 52, 607112, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50377 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:29:52,620 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:30:02,545 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:30:02,546 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:30:02,546 INFO sqlalchemy.engine.Engine [cached since 420.9s ago] ('gurinonyoman',)
2026-02-11 00:30:02,552 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:30:02,552 INFO sqlalchemy.engine.Engine [cached since 420.9s ago] (7,)
2026-02-11 00:30:02,558 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:30:02,558 INFO sqlalchemy.engine.Engine [cached since 420.9s ago] ('active', 7)
2026-02-11 00:30:02,565 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:30:02,565 INFO sqlalchemy.engine.Engine [cached since 420.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:30:02,573 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:02,573 INFO sqlalchemy.engine.Engine [cached since 420.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 2, 551682, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:02,580 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:02,581 INFO sqlalchemy.engine.Engine [cached since 420.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 2, 551682, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:02,588 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:30:02,588 INFO sqlalchemy.engine.Engine [cached since 420.9s ago] (7,)
2026-02-11 00:30:02,593 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:30:02,594 INFO sqlalchemy.engine.Engine [cached since 420.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 2, 551682, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:02,599 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:30:02,599 INFO sqlalchemy.engine.Engine [cached since 420.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:30:02,605 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:30:02,605 INFO sqlalchemy.engine.Engine [cached since 420.9s ago] (7,)
2026-02-11 00:30:02,611 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:02,612 INFO sqlalchemy.engine.Engine [cached since 420.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 2, 551682, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:02,621 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:30:02,621 INFO sqlalchemy.engine.Engine [cached since 420.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 30, 2, 619940, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50399 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:30:02,628 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:30:12,541 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:30:12,541 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:30:12,542 INFO sqlalchemy.engine.Engine [cached since 430.9s ago] ('gurinonyoman',)
2026-02-11 00:30:12,549 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:30:12,549 INFO sqlalchemy.engine.Engine [cached since 430.9s ago] (7,)
2026-02-11 00:30:12,556 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:30:12,557 INFO sqlalchemy.engine.Engine [cached since 430.9s ago] ('active', 7)
2026-02-11 00:30:12,562 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:30:12,562 INFO sqlalchemy.engine.Engine [cached since 430.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:30:12,568 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:12,568 INFO sqlalchemy.engine.Engine [cached since 430.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 12, 548040, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:12,572 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:12,573 INFO sqlalchemy.engine.Engine [cached since 430.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 12, 548040, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:12,579 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:30:12,579 INFO sqlalchemy.engine.Engine [cached since 430.9s ago] (7,)
2026-02-11 00:30:12,585 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:30:12,586 INFO sqlalchemy.engine.Engine [cached since 430.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 12, 548040, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:12,592 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:30:12,593 INFO sqlalchemy.engine.Engine [cached since 430.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:30:12,599 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:30:12,600 INFO sqlalchemy.engine.Engine [cached since 430.9s ago] (7,)
2026-02-11 00:30:12,606 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:12,606 INFO sqlalchemy.engine.Engine [cached since 430.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 12, 548040, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:12,615 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:30:12,615 INFO sqlalchemy.engine.Engine [cached since 430.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 30, 12, 614104, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50414 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:30:12,623 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:30:22,539 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:30:22,540 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:30:22,540 INFO sqlalchemy.engine.Engine [cached since 440.9s ago] ('gurinonyoman',)
2026-02-11 00:30:22,547 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:30:22,547 INFO sqlalchemy.engine.Engine [cached since 440.9s ago] (7,)
2026-02-11 00:30:22,555 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:30:22,555 INFO sqlalchemy.engine.Engine [cached since 440.9s ago] ('active', 7)
2026-02-11 00:30:22,562 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:30:22,562 INFO sqlalchemy.engine.Engine [cached since 440.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:30:22,569 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:22,569 INFO sqlalchemy.engine.Engine [cached since 440.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 22, 546546, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:22,576 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:22,576 INFO sqlalchemy.engine.Engine [cached since 440.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 22, 546546, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:22,582 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:30:22,582 INFO sqlalchemy.engine.Engine [cached since 440.9s ago] (7,)
2026-02-11 00:30:22,588 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:30:22,588 INFO sqlalchemy.engine.Engine [cached since 440.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 22, 546546, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:22,594 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:30:22,595 INFO sqlalchemy.engine.Engine [cached since 440.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:30:22,604 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:30:22,605 INFO sqlalchemy.engine.Engine [cached since 440.9s ago] (7,)
2026-02-11 00:30:22,612 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:22,612 INFO sqlalchemy.engine.Engine [cached since 440.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 22, 546546, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:22,622 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:30:22,622 INFO sqlalchemy.engine.Engine [cached since 440.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 30, 22, 620639, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50430 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:30:22,631 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:30:32,543 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:30:32,544 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:30:32,545 INFO sqlalchemy.engine.Engine [cached since 450.9s ago] ('gurinonyoman',)
2026-02-11 00:30:32,551 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:30:32,552 INFO sqlalchemy.engine.Engine [cached since 450.9s ago] (7,)
2026-02-11 00:30:32,557 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:30:32,557 INFO sqlalchemy.engine.Engine [cached since 450.9s ago] ('active', 7)
2026-02-11 00:30:32,562 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:30:32,563 INFO sqlalchemy.engine.Engine [cached since 450.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:30:32,572 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:32,572 INFO sqlalchemy.engine.Engine [cached since 450.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 32, 550616, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:32,579 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:32,579 INFO sqlalchemy.engine.Engine [cached since 450.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 32, 550616, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:32,586 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:30:32,587 INFO sqlalchemy.engine.Engine [cached since 450.9s ago] (7,)
2026-02-11 00:30:32,595 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:30:32,595 INFO sqlalchemy.engine.Engine [cached since 450.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 32, 550616, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:32,600 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:30:32,600 INFO sqlalchemy.engine.Engine [cached since 450.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:30:32,606 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:30:32,606 INFO sqlalchemy.engine.Engine [cached since 450.9s ago] (7,)
2026-02-11 00:30:32,612 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:32,613 INFO sqlalchemy.engine.Engine [cached since 450.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 32, 550616, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:32,621 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:30:32,621 INFO sqlalchemy.engine.Engine [cached since 450.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 30, 32, 620623, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50447 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:30:32,629 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:30:42,551 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:30:42,563 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:30:42,563 INFO sqlalchemy.engine.Engine [cached since 460.9s ago] ('gurinonyoman',)
2026-02-11 00:30:42,571 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:30:42,571 INFO sqlalchemy.engine.Engine [cached since 460.9s ago] (7,)
2026-02-11 00:30:42,576 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:30:42,576 INFO sqlalchemy.engine.Engine [cached since 460.9s ago] ('active', 7)
2026-02-11 00:30:42,581 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:30:42,581 INFO sqlalchemy.engine.Engine [cached since 460.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:30:42,586 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:42,586 INFO sqlalchemy.engine.Engine [cached since 460.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 42, 570456, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:42,592 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:42,592 INFO sqlalchemy.engine.Engine [cached since 460.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 42, 570456, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:42,597 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:30:42,598 INFO sqlalchemy.engine.Engine [cached since 460.9s ago] (7,)
2026-02-11 00:30:42,605 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:30:42,605 INFO sqlalchemy.engine.Engine [cached since 460.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 42, 570456, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:42,610 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:30:42,610 INFO sqlalchemy.engine.Engine [cached since 460.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:30:42,620 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:30:42,620 INFO sqlalchemy.engine.Engine [cached since 460.9s ago] (7,)
2026-02-11 00:30:42,626 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:42,626 INFO sqlalchemy.engine.Engine [cached since 460.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 42, 570456, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:42,637 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:30:42,638 INFO sqlalchemy.engine.Engine [cached since 460.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 30, 42, 635646, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50514 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:30:42,648 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:30:52,571 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:30:52,573 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:30:52,573 INFO sqlalchemy.engine.Engine [cached since 471s ago] ('gurinonyoman',)
2026-02-11 00:30:52,580 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:30:52,580 INFO sqlalchemy.engine.Engine [cached since 470.9s ago] (7,)
2026-02-11 00:30:52,586 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:30:52,586 INFO sqlalchemy.engine.Engine [cached since 470.9s ago] ('active', 7)
2026-02-11 00:30:52,591 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:30:52,591 INFO sqlalchemy.engine.Engine [cached since 470.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:30:52,599 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:52,599 INFO sqlalchemy.engine.Engine [cached since 470.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 52, 579142, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:52,605 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:52,605 INFO sqlalchemy.engine.Engine [cached since 470.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 52, 579142, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:52,613 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:30:52,613 INFO sqlalchemy.engine.Engine [cached since 470.9s ago] (7,)
2026-02-11 00:30:52,619 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:30:52,620 INFO sqlalchemy.engine.Engine [cached since 470.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 52, 579142, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:52,626 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:30:52,626 INFO sqlalchemy.engine.Engine [cached since 470.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:30:52,633 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:30:52,634 INFO sqlalchemy.engine.Engine [cached since 470.9s ago] (7,)
2026-02-11 00:30:52,642 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:30:52,642 INFO sqlalchemy.engine.Engine [cached since 470.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 30, 52, 579142, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:30:52,650 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:30:52,650 INFO sqlalchemy.engine.Engine [cached since 470.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 30, 52, 648934, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50534 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:30:52,658 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:31:02,538 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:31:02,540 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:31:02,540 INFO sqlalchemy.engine.Engine [cached since 480.9s ago] ('gurinonyoman',)
2026-02-11 00:31:02,545 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:31:02,546 INFO sqlalchemy.engine.Engine [cached since 480.9s ago] (7,)
2026-02-11 00:31:02,551 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:31:02,552 INFO sqlalchemy.engine.Engine [cached since 480.9s ago] ('active', 7)
2026-02-11 00:31:02,558 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:31:02,558 INFO sqlalchemy.engine.Engine [cached since 480.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:31:02,564 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:02,564 INFO sqlalchemy.engine.Engine [cached since 480.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 2, 545044, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:02,569 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:02,569 INFO sqlalchemy.engine.Engine [cached since 480.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 2, 545044, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:02,574 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:31:02,574 INFO sqlalchemy.engine.Engine [cached since 480.9s ago] (7,)
2026-02-11 00:31:02,583 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:31:02,583 INFO sqlalchemy.engine.Engine [cached since 480.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 2, 545044, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:02,588 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:31:02,589 INFO sqlalchemy.engine.Engine [cached since 480.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:31:02,596 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:31:02,596 INFO sqlalchemy.engine.Engine [cached since 480.9s ago] (7,)
2026-02-11 00:31:02,600 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:02,600 INFO sqlalchemy.engine.Engine [cached since 480.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 2, 545044, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:02,607 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:31:02,607 INFO sqlalchemy.engine.Engine [cached since 480.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 31, 2, 606402, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50557 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:31:02,613 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:31:12,538 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:31:12,539 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:31:12,539 INFO sqlalchemy.engine.Engine [cached since 490.9s ago] ('gurinonyoman',)
2026-02-11 00:31:12,545 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:31:12,545 INFO sqlalchemy.engine.Engine [cached since 490.9s ago] (7,)
2026-02-11 00:31:12,551 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:31:12,552 INFO sqlalchemy.engine.Engine [cached since 490.9s ago] ('active', 7)
2026-02-11 00:31:12,558 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:31:12,558 INFO sqlalchemy.engine.Engine [cached since 490.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:31:12,565 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:12,565 INFO sqlalchemy.engine.Engine [cached since 490.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 12, 545027, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:12,571 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:12,571 INFO sqlalchemy.engine.Engine [cached since 490.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 12, 545027, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:12,578 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:31:12,578 INFO sqlalchemy.engine.Engine [cached since 490.9s ago] (7,)
2026-02-11 00:31:12,584 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:31:12,584 INFO sqlalchemy.engine.Engine [cached since 490.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 12, 545027, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:12,592 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:31:12,592 INFO sqlalchemy.engine.Engine [cached since 490.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:31:12,599 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:31:12,599 INFO sqlalchemy.engine.Engine [cached since 490.9s ago] (7,)
2026-02-11 00:31:12,606 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:12,606 INFO sqlalchemy.engine.Engine [cached since 490.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 12, 545027, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:12,615 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:31:12,615 INFO sqlalchemy.engine.Engine [cached since 490.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 31, 12, 614276, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50597 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:31:12,622 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:31:22,545 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:31:22,546 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:31:22,546 INFO sqlalchemy.engine.Engine [cached since 500.9s ago] ('gurinonyoman',)
2026-02-11 00:31:22,557 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:31:22,557 INFO sqlalchemy.engine.Engine [cached since 500.9s ago] (7,)
2026-02-11 00:31:22,563 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:31:22,564 INFO sqlalchemy.engine.Engine [cached since 500.9s ago] ('active', 7)
2026-02-11 00:31:22,570 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:31:22,570 INFO sqlalchemy.engine.Engine [cached since 500.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:31:22,577 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:22,577 INFO sqlalchemy.engine.Engine [cached since 500.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 22, 555803, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:22,582 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:22,583 INFO sqlalchemy.engine.Engine [cached since 500.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 22, 555803, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:22,588 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:31:22,588 INFO sqlalchemy.engine.Engine [cached since 500.9s ago] (7,)
2026-02-11 00:31:22,594 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:31:22,594 INFO sqlalchemy.engine.Engine [cached since 500.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 22, 555803, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:22,599 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:31:22,599 INFO sqlalchemy.engine.Engine [cached since 500.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:31:22,606 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:31:22,606 INFO sqlalchemy.engine.Engine [cached since 500.9s ago] (7,)
2026-02-11 00:31:22,612 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:22,612 INFO sqlalchemy.engine.Engine [cached since 500.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 22, 555803, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:22,623 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:31:22,623 INFO sqlalchemy.engine.Engine [cached since 500.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 31, 22, 621792, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50613 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:31:22,633 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:31:32,550 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:31:32,550 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:31:32,551 INFO sqlalchemy.engine.Engine [cached since 510.9s ago] ('gurinonyoman',)
2026-02-11 00:31:32,564 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:31:32,564 INFO sqlalchemy.engine.Engine [cached since 510.9s ago] (7,)
2026-02-11 00:31:32,571 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:31:32,571 INFO sqlalchemy.engine.Engine [cached since 510.9s ago] ('active', 7)
2026-02-11 00:31:32,578 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:31:32,578 INFO sqlalchemy.engine.Engine [cached since 510.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:31:32,584 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:32,584 INFO sqlalchemy.engine.Engine [cached since 510.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 32, 563553, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:32,591 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:32,591 INFO sqlalchemy.engine.Engine [cached since 510.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 32, 563553, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:32,596 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:31:32,597 INFO sqlalchemy.engine.Engine [cached since 510.9s ago] (7,)
2026-02-11 00:31:32,604 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:31:32,604 INFO sqlalchemy.engine.Engine [cached since 510.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 32, 563553, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:32,611 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:31:32,611 INFO sqlalchemy.engine.Engine [cached since 510.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:31:32,623 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:31:32,623 INFO sqlalchemy.engine.Engine [cached since 510.9s ago] (7,)
2026-02-11 00:31:32,630 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:32,630 INFO sqlalchemy.engine.Engine [cached since 510.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 32, 563553, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:32,639 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:31:32,639 INFO sqlalchemy.engine.Engine [cached since 510.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 31, 32, 638523, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50642 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:31:32,647 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:31:42,548 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:31:42,549 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:31:42,549 INFO sqlalchemy.engine.Engine [cached since 520.9s ago] ('gurinonyoman',)
2026-02-11 00:31:42,555 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:31:42,555 INFO sqlalchemy.engine.Engine [cached since 520.9s ago] (7,)
2026-02-11 00:31:42,560 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:31:42,560 INFO sqlalchemy.engine.Engine [cached since 520.9s ago] ('active', 7)
2026-02-11 00:31:42,566 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:31:42,566 INFO sqlalchemy.engine.Engine [cached since 520.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:31:42,574 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:42,574 INFO sqlalchemy.engine.Engine [cached since 520.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 42, 555105, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:42,580 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:42,580 INFO sqlalchemy.engine.Engine [cached since 520.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 42, 555105, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:42,586 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:31:42,586 INFO sqlalchemy.engine.Engine [cached since 520.9s ago] (7,)
2026-02-11 00:31:42,592 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:31:42,593 INFO sqlalchemy.engine.Engine [cached since 520.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 42, 555105, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:42,600 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:31:42,600 INFO sqlalchemy.engine.Engine [cached since 520.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:31:42,606 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:31:42,606 INFO sqlalchemy.engine.Engine [cached since 520.9s ago] (7,)
2026-02-11 00:31:42,611 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:42,611 INFO sqlalchemy.engine.Engine [cached since 520.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 42, 555105, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:42,621 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:31:42,621 INFO sqlalchemy.engine.Engine [cached since 520.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 31, 42, 619776, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50661 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:31:42,630 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:31:52,540 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:31:52,542 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:31:52,542 INFO sqlalchemy.engine.Engine [cached since 530.9s ago] ('gurinonyoman',)
2026-02-11 00:31:52,547 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:31:52,547 INFO sqlalchemy.engine.Engine [cached since 530.9s ago] (7,)
2026-02-11 00:31:52,556 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:31:52,556 INFO sqlalchemy.engine.Engine [cached since 530.9s ago] ('active', 7)
2026-02-11 00:31:52,561 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:31:52,562 INFO sqlalchemy.engine.Engine [cached since 530.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:31:52,568 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:52,569 INFO sqlalchemy.engine.Engine [cached since 530.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 52, 547234, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:52,575 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:52,576 INFO sqlalchemy.engine.Engine [cached since 530.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 52, 547234, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:52,581 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:31:52,581 INFO sqlalchemy.engine.Engine [cached since 530.9s ago] (7,)
2026-02-11 00:31:52,586 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:31:52,587 INFO sqlalchemy.engine.Engine [cached since 530.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 52, 547234, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:52,594 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:31:52,594 INFO sqlalchemy.engine.Engine [cached since 530.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:31:52,600 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:31:52,600 INFO sqlalchemy.engine.Engine [cached since 530.9s ago] (7,)
2026-02-11 00:31:52,605 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:31:52,605 INFO sqlalchemy.engine.Engine [cached since 530.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 31, 52, 547234, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:31:52,613 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:31:52,613 INFO sqlalchemy.engine.Engine [cached since 530.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 31, 52, 612060, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50677 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:31:52,622 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:32:02,538 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:32:02,539 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:32:02,539 INFO sqlalchemy.engine.Engine [cached since 540.9s ago] ('gurinonyoman',)
2026-02-11 00:32:02,546 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:32:02,546 INFO sqlalchemy.engine.Engine [cached since 540.9s ago] (7,)
2026-02-11 00:32:02,552 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:32:02,552 INFO sqlalchemy.engine.Engine [cached since 540.9s ago] ('active', 7)
2026-02-11 00:32:02,559 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:32:02,559 INFO sqlalchemy.engine.Engine [cached since 540.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:32:02,564 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:02,565 INFO sqlalchemy.engine.Engine [cached since 540.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 2, 545915, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:02,572 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:02,572 INFO sqlalchemy.engine.Engine [cached since 540.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 2, 545915, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:02,578 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:32:02,578 INFO sqlalchemy.engine.Engine [cached since 540.9s ago] (7,)
2026-02-11 00:32:02,584 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:32:02,584 INFO sqlalchemy.engine.Engine [cached since 540.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 2, 545915, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:02,589 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:32:02,589 INFO sqlalchemy.engine.Engine [cached since 540.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:32:02,597 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:32:02,597 INFO sqlalchemy.engine.Engine [cached since 540.9s ago] (7,)
2026-02-11 00:32:02,603 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:02,603 INFO sqlalchemy.engine.Engine [cached since 540.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 2, 545915, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:02,613 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:32:02,613 INFO sqlalchemy.engine.Engine [cached since 540.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 32, 2, 611335, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50694 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:32:02,621 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:32:12,566 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:32:12,567 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:32:12,567 INFO sqlalchemy.engine.Engine [cached since 550.9s ago] ('gurinonyoman',)
2026-02-11 00:32:12,576 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:32:12,576 INFO sqlalchemy.engine.Engine [cached since 550.9s ago] (7,)
2026-02-11 00:32:12,582 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:32:12,582 INFO sqlalchemy.engine.Engine [cached since 550.9s ago] ('active', 7)
2026-02-11 00:32:12,588 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:32:12,588 INFO sqlalchemy.engine.Engine [cached since 550.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:32:12,594 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:12,594 INFO sqlalchemy.engine.Engine [cached since 550.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 12, 575659, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:12,602 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:12,602 INFO sqlalchemy.engine.Engine [cached since 550.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 12, 575659, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:12,608 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:32:12,608 INFO sqlalchemy.engine.Engine [cached since 550.9s ago] (7,)
2026-02-11 00:32:12,613 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:32:12,613 INFO sqlalchemy.engine.Engine [cached since 550.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 12, 575659, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:12,619 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:32:12,619 INFO sqlalchemy.engine.Engine [cached since 550.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:32:12,629 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:32:12,629 INFO sqlalchemy.engine.Engine [cached since 550.9s ago] (7,)
2026-02-11 00:32:12,636 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:12,636 INFO sqlalchemy.engine.Engine [cached since 550.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 12, 575659, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:12,645 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:32:12,646 INFO sqlalchemy.engine.Engine [cached since 550.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 32, 12, 644238, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50713 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:32:12,653 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:32:22,541 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:32:22,542 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:32:22,542 INFO sqlalchemy.engine.Engine [cached since 560.9s ago] ('gurinonyoman',)
2026-02-11 00:32:22,549 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:32:22,549 INFO sqlalchemy.engine.Engine [cached since 560.9s ago] (7,)
2026-02-11 00:32:22,555 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:32:22,555 INFO sqlalchemy.engine.Engine [cached since 560.9s ago] ('active', 7)
2026-02-11 00:32:22,560 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:32:22,560 INFO sqlalchemy.engine.Engine [cached since 560.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:32:22,566 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:22,566 INFO sqlalchemy.engine.Engine [cached since 560.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 22, 548309, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:22,571 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:22,571 INFO sqlalchemy.engine.Engine [cached since 560.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 22, 548309, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:22,577 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:32:22,577 INFO sqlalchemy.engine.Engine [cached since 560.9s ago] (7,)
2026-02-11 00:32:22,583 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:32:22,583 INFO sqlalchemy.engine.Engine [cached since 560.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 22, 548309, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:22,588 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:32:22,588 INFO sqlalchemy.engine.Engine [cached since 560.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:32:22,595 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:32:22,595 INFO sqlalchemy.engine.Engine [cached since 560.9s ago] (7,)
2026-02-11 00:32:22,602 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:22,602 INFO sqlalchemy.engine.Engine [cached since 560.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 22, 548309, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:22,609 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:32:22,610 INFO sqlalchemy.engine.Engine [cached since 560.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 32, 22, 608706, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50729 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:32:22,617 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:32:32,540 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:32:32,541 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:32:32,542 INFO sqlalchemy.engine.Engine [cached since 570.9s ago] ('gurinonyoman',)
2026-02-11 00:32:32,547 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:32:32,548 INFO sqlalchemy.engine.Engine [cached since 570.9s ago] (7,)
2026-02-11 00:32:32,553 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:32:32,553 INFO sqlalchemy.engine.Engine [cached since 570.9s ago] ('active', 7)
2026-02-11 00:32:32,560 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:32:32,560 INFO sqlalchemy.engine.Engine [cached since 570.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:32:32,565 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:32,565 INFO sqlalchemy.engine.Engine [cached since 570.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 32, 547358, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:32,571 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:32,571 INFO sqlalchemy.engine.Engine [cached since 570.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 32, 547358, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:32,577 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:32:32,577 INFO sqlalchemy.engine.Engine [cached since 570.9s ago] (7,)
2026-02-11 00:32:32,582 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:32:32,582 INFO sqlalchemy.engine.Engine [cached since 570.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 32, 547358, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:32,588 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:32:32,588 INFO sqlalchemy.engine.Engine [cached since 570.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:32:32,596 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:32:32,596 INFO sqlalchemy.engine.Engine [cached since 570.9s ago] (7,)
2026-02-11 00:32:32,603 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:32,603 INFO sqlalchemy.engine.Engine [cached since 570.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 32, 547358, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:32,610 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:32:32,610 INFO sqlalchemy.engine.Engine [cached since 570.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 32, 32, 609471, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50744 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:32:32,617 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:32:42,543 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:32:42,544 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:32:42,544 INFO sqlalchemy.engine.Engine [cached since 580.9s ago] ('gurinonyoman',)
2026-02-11 00:32:42,551 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:32:42,551 INFO sqlalchemy.engine.Engine [cached since 580.9s ago] (7,)
2026-02-11 00:32:42,559 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:32:42,559 INFO sqlalchemy.engine.Engine [cached since 580.9s ago] ('active', 7)
2026-02-11 00:32:42,564 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:32:42,564 INFO sqlalchemy.engine.Engine [cached since 580.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:32:42,571 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:42,571 INFO sqlalchemy.engine.Engine [cached since 580.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 42, 550513, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:42,576 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:42,576 INFO sqlalchemy.engine.Engine [cached since 580.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 42, 550513, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:42,581 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:32:42,582 INFO sqlalchemy.engine.Engine [cached since 580.9s ago] (7,)
2026-02-11 00:32:42,587 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:32:42,587 INFO sqlalchemy.engine.Engine [cached since 580.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 42, 550513, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:42,593 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:32:42,593 INFO sqlalchemy.engine.Engine [cached since 580.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:32:42,601 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:32:42,601 INFO sqlalchemy.engine.Engine [cached since 580.9s ago] (7,)
2026-02-11 00:32:42,605 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:42,605 INFO sqlalchemy.engine.Engine [cached since 580.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 42, 550513, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:42,612 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:32:42,613 INFO sqlalchemy.engine.Engine [cached since 580.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 32, 42, 611827, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50764 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:32:42,624 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:32:52,549 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:32:52,549 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:32:52,550 INFO sqlalchemy.engine.Engine [cached since 590.9s ago] ('gurinonyoman',)
2026-02-11 00:32:52,557 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:32:52,557 INFO sqlalchemy.engine.Engine [cached since 590.9s ago] (7,)
2026-02-11 00:32:52,564 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:32:52,565 INFO sqlalchemy.engine.Engine [cached since 590.9s ago] ('active', 7)
2026-02-11 00:32:52,572 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:32:52,572 INFO sqlalchemy.engine.Engine [cached since 590.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:32:52,579 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:52,580 INFO sqlalchemy.engine.Engine [cached since 590.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 52, 556676, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:52,587 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:52,587 INFO sqlalchemy.engine.Engine [cached since 590.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 52, 556676, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:52,594 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:32:52,594 INFO sqlalchemy.engine.Engine [cached since 590.9s ago] (7,)
2026-02-11 00:32:52,600 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:32:52,601 INFO sqlalchemy.engine.Engine [cached since 590.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 52, 556676, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:52,609 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:32:52,609 INFO sqlalchemy.engine.Engine [cached since 590.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:32:52,617 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:32:52,617 INFO sqlalchemy.engine.Engine [cached since 590.9s ago] (7,)
2026-02-11 00:32:52,625 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:32:52,625 INFO sqlalchemy.engine.Engine [cached since 590.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 32, 52, 556676, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:32:52,635 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:32:52,635 INFO sqlalchemy.engine.Engine [cached since 590.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 32, 52, 634141, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50779 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:32:52,642 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:33:02,538 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:33:02,538 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:33:02,538 INFO sqlalchemy.engine.Engine [cached since 600.9s ago] ('gurinonyoman',)
2026-02-11 00:33:02,544 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:33:02,544 INFO sqlalchemy.engine.Engine [cached since 600.9s ago] (7,)
2026-02-11 00:33:02,549 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:33:02,549 INFO sqlalchemy.engine.Engine [cached since 600.9s ago] ('active', 7)
2026-02-11 00:33:02,553 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:33:02,553 INFO sqlalchemy.engine.Engine [cached since 600.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:33:02,559 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:02,559 INFO sqlalchemy.engine.Engine [cached since 600.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 2, 543175, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:02,569 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:02,569 INFO sqlalchemy.engine.Engine [cached since 600.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 2, 543175, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:02,573 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:33:02,574 INFO sqlalchemy.engine.Engine [cached since 600.9s ago] (7,)
2026-02-11 00:33:02,579 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:33:02,579 INFO sqlalchemy.engine.Engine [cached since 600.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 2, 543175, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:02,586 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:33:02,586 INFO sqlalchemy.engine.Engine [cached since 600.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:33:02,595 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:33:02,595 INFO sqlalchemy.engine.Engine [cached since 600.9s ago] (7,)
2026-02-11 00:33:02,602 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:02,603 INFO sqlalchemy.engine.Engine [cached since 600.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 2, 543175, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:02,611 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:33:02,611 INFO sqlalchemy.engine.Engine [cached since 600.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 33, 2, 610183, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50803 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:33:02,619 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:50833 - "OPTIONS /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:33:12,545 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:33:12,546 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:33:12,546 INFO sqlalchemy.engine.Engine [cached since 610.9s ago] ('gurinonyoman',)
2026-02-11 00:33:12,559 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:33:12,560 INFO sqlalchemy.engine.Engine [cached since 610.9s ago] (7,)
2026-02-11 00:33:12,566 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:33:12,566 INFO sqlalchemy.engine.Engine [cached since 610.9s ago] ('active', 7)
2026-02-11 00:33:12,574 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:33:12,574 INFO sqlalchemy.engine.Engine [cached since 610.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:33:12,579 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:12,580 INFO sqlalchemy.engine.Engine [cached since 610.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 12, 558972, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:12,586 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:12,586 INFO sqlalchemy.engine.Engine [cached since 610.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 12, 558972, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:12,592 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:33:12,592 INFO sqlalchemy.engine.Engine [cached since 610.9s ago] (7,)
2026-02-11 00:33:12,598 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:33:12,598 INFO sqlalchemy.engine.Engine [cached since 610.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 12, 558972, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:12,603 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:33:12,604 INFO sqlalchemy.engine.Engine [cached since 610.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:33:12,611 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:33:12,612 INFO sqlalchemy.engine.Engine [cached since 610.9s ago] (7,)
2026-02-11 00:33:12,618 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:12,618 INFO sqlalchemy.engine.Engine [cached since 610.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 12, 558972, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:12,625 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:33:12,626 INFO sqlalchemy.engine.Engine [cached since 610.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 33, 12, 625014, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50833 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:33:12,632 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:33:22,537 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:33:22,538 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:33:22,538 INFO sqlalchemy.engine.Engine [cached since 620.9s ago] ('gurinonyoman',)
2026-02-11 00:33:22,544 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:33:22,544 INFO sqlalchemy.engine.Engine [cached since 620.9s ago] (7,)
2026-02-11 00:33:22,548 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:33:22,549 INFO sqlalchemy.engine.Engine [cached since 620.9s ago] ('active', 7)
2026-02-11 00:33:22,556 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:33:22,556 INFO sqlalchemy.engine.Engine [cached since 620.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:33:22,563 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:22,563 INFO sqlalchemy.engine.Engine [cached since 620.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 22, 543718, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:22,568 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:22,568 INFO sqlalchemy.engine.Engine [cached since 620.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 22, 543718, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:22,573 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:33:22,574 INFO sqlalchemy.engine.Engine [cached since 620.9s ago] (7,)
2026-02-11 00:33:22,579 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:33:22,579 INFO sqlalchemy.engine.Engine [cached since 620.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 22, 543718, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:22,584 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:33:22,584 INFO sqlalchemy.engine.Engine [cached since 620.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:33:22,590 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:33:22,590 INFO sqlalchemy.engine.Engine [cached since 620.9s ago] (7,)
2026-02-11 00:33:22,595 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:22,595 INFO sqlalchemy.engine.Engine [cached since 620.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 22, 543718, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:22,602 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:33:22,602 INFO sqlalchemy.engine.Engine [cached since 620.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 33, 22, 601988, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50851 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:33:22,609 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:33:32,559 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:33:32,561 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:33:32,561 INFO sqlalchemy.engine.Engine [cached since 630.9s ago] ('gurinonyoman',)
2026-02-11 00:33:32,569 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:33:32,569 INFO sqlalchemy.engine.Engine [cached since 630.9s ago] (7,)
2026-02-11 00:33:32,575 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:33:32,576 INFO sqlalchemy.engine.Engine [cached since 630.9s ago] ('active', 7)
2026-02-11 00:33:32,583 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:33:32,583 INFO sqlalchemy.engine.Engine [cached since 630.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:33:32,591 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:32,591 INFO sqlalchemy.engine.Engine [cached since 630.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 32, 568300, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:32,598 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:32,598 INFO sqlalchemy.engine.Engine [cached since 630.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 32, 568300, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:32,603 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:33:32,604 INFO sqlalchemy.engine.Engine [cached since 630.9s ago] (7,)
2026-02-11 00:33:32,611 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:33:32,612 INFO sqlalchemy.engine.Engine [cached since 630.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 32, 568300, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:32,618 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:33:32,618 INFO sqlalchemy.engine.Engine [cached since 630.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:33:32,626 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:33:32,626 INFO sqlalchemy.engine.Engine [cached since 630.9s ago] (7,)
2026-02-11 00:33:32,632 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:32,632 INFO sqlalchemy.engine.Engine [cached since 630.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 32, 568300, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:32,640 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:33:32,640 INFO sqlalchemy.engine.Engine [cached since 630.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 33, 32, 639313, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50866 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:33:32,645 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:33:42,541 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:33:42,543 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:33:42,543 INFO sqlalchemy.engine.Engine [cached since 640.9s ago] ('gurinonyoman',)
2026-02-11 00:33:42,550 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:33:42,550 INFO sqlalchemy.engine.Engine [cached since 640.9s ago] (7,)
2026-02-11 00:33:42,556 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:33:42,556 INFO sqlalchemy.engine.Engine [cached since 640.9s ago] ('active', 7)
2026-02-11 00:33:42,563 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:33:42,563 INFO sqlalchemy.engine.Engine [cached since 640.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:33:42,569 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:42,570 INFO sqlalchemy.engine.Engine [cached since 640.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 42, 548830, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:42,575 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:42,576 INFO sqlalchemy.engine.Engine [cached since 640.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 42, 548830, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:42,582 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:33:42,582 INFO sqlalchemy.engine.Engine [cached since 640.9s ago] (7,)
2026-02-11 00:33:42,587 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:33:42,587 INFO sqlalchemy.engine.Engine [cached since 640.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 42, 548830, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:42,592 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:33:42,592 INFO sqlalchemy.engine.Engine [cached since 640.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:33:42,600 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:33:42,601 INFO sqlalchemy.engine.Engine [cached since 640.9s ago] (7,)
2026-02-11 00:33:42,607 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:42,607 INFO sqlalchemy.engine.Engine [cached since 640.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 42, 548830, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:42,616 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:33:42,616 INFO sqlalchemy.engine.Engine [cached since 640.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 33, 42, 615280, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50887 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:33:42,625 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:33:52,537 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:33:52,538 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:33:52,538 INFO sqlalchemy.engine.Engine [cached since 650.9s ago] ('gurinonyoman',)
2026-02-11 00:33:52,546 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:33:52,546 INFO sqlalchemy.engine.Engine [cached since 650.9s ago] (7,)
2026-02-11 00:33:52,552 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:33:52,552 INFO sqlalchemy.engine.Engine [cached since 650.9s ago] ('active', 7)
2026-02-11 00:33:52,559 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:33:52,559 INFO sqlalchemy.engine.Engine [cached since 650.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:33:52,566 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:52,566 INFO sqlalchemy.engine.Engine [cached since 650.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 52, 545013, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:52,572 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:52,573 INFO sqlalchemy.engine.Engine [cached since 650.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 52, 545013, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:52,578 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:33:52,579 INFO sqlalchemy.engine.Engine [cached since 650.9s ago] (7,)
2026-02-11 00:33:52,585 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:33:52,585 INFO sqlalchemy.engine.Engine [cached since 650.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 52, 545013, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:52,592 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:33:52,592 INFO sqlalchemy.engine.Engine [cached since 650.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:33:52,598 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:33:52,599 INFO sqlalchemy.engine.Engine [cached since 650.9s ago] (7,)
2026-02-11 00:33:52,606 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:33:52,606 INFO sqlalchemy.engine.Engine [cached since 650.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 33, 52, 545013, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:33:52,613 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:33:52,613 INFO sqlalchemy.engine.Engine [cached since 650.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 33, 52, 612267, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50902 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:33:52,621 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:34:02,536 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:34:02,537 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:34:02,538 INFO sqlalchemy.engine.Engine [cached since 660.9s ago] ('gurinonyoman',)
2026-02-11 00:34:02,545 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:34:02,545 INFO sqlalchemy.engine.Engine [cached since 660.9s ago] (7,)
2026-02-11 00:34:02,551 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:34:02,551 INFO sqlalchemy.engine.Engine [cached since 660.9s ago] ('active', 7)
2026-02-11 00:34:02,557 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:34:02,557 INFO sqlalchemy.engine.Engine [cached since 660.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:34:02,563 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:02,563 INFO sqlalchemy.engine.Engine [cached since 660.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 2, 544245, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:02,568 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:02,569 INFO sqlalchemy.engine.Engine [cached since 660.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 2, 544245, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:02,574 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:34:02,575 INFO sqlalchemy.engine.Engine [cached since 660.9s ago] (7,)
2026-02-11 00:34:02,582 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:34:02,582 INFO sqlalchemy.engine.Engine [cached since 660.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 2, 544245, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:02,588 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:34:02,588 INFO sqlalchemy.engine.Engine [cached since 660.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:34:02,598 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:34:02,598 INFO sqlalchemy.engine.Engine [cached since 660.9s ago] (7,)
2026-02-11 00:34:02,604 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:02,604 INFO sqlalchemy.engine.Engine [cached since 660.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 2, 544245, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:02,612 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:34:02,612 INFO sqlalchemy.engine.Engine [cached since 660.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 34, 2, 610393, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50919 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:34:02,620 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:34:12,541 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:34:12,542 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:34:12,542 INFO sqlalchemy.engine.Engine [cached since 670.9s ago] ('gurinonyoman',)
2026-02-11 00:34:12,548 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:34:12,548 INFO sqlalchemy.engine.Engine [cached since 670.9s ago] (7,)
2026-02-11 00:34:12,553 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:34:12,553 INFO sqlalchemy.engine.Engine [cached since 670.9s ago] ('active', 7)
2026-02-11 00:34:12,559 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:34:12,560 INFO sqlalchemy.engine.Engine [cached since 670.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:34:12,566 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:12,566 INFO sqlalchemy.engine.Engine [cached since 670.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 12, 547485, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:12,572 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:12,572 INFO sqlalchemy.engine.Engine [cached since 670.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 12, 547485, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:12,578 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:34:12,579 INFO sqlalchemy.engine.Engine [cached since 670.9s ago] (7,)
2026-02-11 00:34:12,585 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:34:12,585 INFO sqlalchemy.engine.Engine [cached since 670.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 12, 547485, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:12,592 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:34:12,593 INFO sqlalchemy.engine.Engine [cached since 670.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:34:12,597 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:34:12,598 INFO sqlalchemy.engine.Engine [cached since 670.9s ago] (7,)
2026-02-11 00:34:12,603 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:12,603 INFO sqlalchemy.engine.Engine [cached since 670.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 12, 547485, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:12,616 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:34:12,616 INFO sqlalchemy.engine.Engine [cached since 670.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 34, 12, 614747, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50936 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:34:12,625 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:34:22,539 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:34:22,540 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:34:22,540 INFO sqlalchemy.engine.Engine [cached since 680.9s ago] ('gurinonyoman',)
2026-02-11 00:34:22,546 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:34:22,547 INFO sqlalchemy.engine.Engine [cached since 680.9s ago] (7,)
2026-02-11 00:34:22,554 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:34:22,554 INFO sqlalchemy.engine.Engine [cached since 680.9s ago] ('active', 7)
2026-02-11 00:34:22,560 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:34:22,560 INFO sqlalchemy.engine.Engine [cached since 680.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:34:22,565 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:22,565 INFO sqlalchemy.engine.Engine [cached since 680.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 22, 546320, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:22,572 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:22,573 INFO sqlalchemy.engine.Engine [cached since 680.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 22, 546320, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:22,579 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:34:22,579 INFO sqlalchemy.engine.Engine [cached since 680.9s ago] (7,)
2026-02-11 00:34:22,584 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:34:22,584 INFO sqlalchemy.engine.Engine [cached since 680.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 22, 546320, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:22,589 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:34:22,589 INFO sqlalchemy.engine.Engine [cached since 680.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:34:22,595 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:34:22,595 INFO sqlalchemy.engine.Engine [cached since 680.9s ago] (7,)
2026-02-11 00:34:22,600 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:22,601 INFO sqlalchemy.engine.Engine [cached since 680.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 22, 546320, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:22,607 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:34:22,607 INFO sqlalchemy.engine.Engine [cached since 680.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 34, 22, 606720, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50951 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:34:22,615 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:34:32,535 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:34:32,537 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:34:32,537 INFO sqlalchemy.engine.Engine [cached since 690.9s ago] ('gurinonyoman',)
2026-02-11 00:34:32,544 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:34:32,545 INFO sqlalchemy.engine.Engine [cached since 690.9s ago] (7,)
2026-02-11 00:34:32,550 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:34:32,550 INFO sqlalchemy.engine.Engine [cached since 690.9s ago] ('active', 7)
2026-02-11 00:34:32,556 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:34:32,556 INFO sqlalchemy.engine.Engine [cached since 690.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:34:32,561 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:32,561 INFO sqlalchemy.engine.Engine [cached since 690.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 32, 543700, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:32,568 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:32,568 INFO sqlalchemy.engine.Engine [cached since 690.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 32, 543700, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:32,572 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:34:32,572 INFO sqlalchemy.engine.Engine [cached since 690.9s ago] (7,)
2026-02-11 00:34:32,577 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:34:32,578 INFO sqlalchemy.engine.Engine [cached since 690.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 32, 543700, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:32,584 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:34:32,584 INFO sqlalchemy.engine.Engine [cached since 690.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:34:32,589 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:34:32,589 INFO sqlalchemy.engine.Engine [cached since 690.9s ago] (7,)
2026-02-11 00:34:32,596 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:32,596 INFO sqlalchemy.engine.Engine [cached since 690.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 32, 543700, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:32,604 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:34:32,604 INFO sqlalchemy.engine.Engine [cached since 690.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 34, 32, 602809, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:50980 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:34:32,612 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:34:42,536 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:34:42,537 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:34:42,537 INFO sqlalchemy.engine.Engine [cached since 700.9s ago] ('gurinonyoman',)
2026-02-11 00:34:42,551 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:34:42,551 INFO sqlalchemy.engine.Engine [cached since 700.9s ago] (7,)
2026-02-11 00:34:42,559 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:34:42,559 INFO sqlalchemy.engine.Engine [cached since 700.9s ago] ('active', 7)
2026-02-11 00:34:42,566 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:34:42,566 INFO sqlalchemy.engine.Engine [cached since 700.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:34:42,572 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:42,572 INFO sqlalchemy.engine.Engine [cached since 700.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 42, 550545, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:42,578 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:42,578 INFO sqlalchemy.engine.Engine [cached since 700.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 42, 550545, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:42,584 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:34:42,585 INFO sqlalchemy.engine.Engine [cached since 700.9s ago] (7,)
2026-02-11 00:34:42,591 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:34:42,592 INFO sqlalchemy.engine.Engine [cached since 700.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 42, 550545, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:42,598 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:34:42,599 INFO sqlalchemy.engine.Engine [cached since 700.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:34:42,606 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:34:42,606 INFO sqlalchemy.engine.Engine [cached since 700.9s ago] (7,)
2026-02-11 00:34:42,613 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:42,613 INFO sqlalchemy.engine.Engine [cached since 700.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 42, 550545, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:42,621 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:34:42,622 INFO sqlalchemy.engine.Engine [cached since 700.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 34, 42, 621125, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51001 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:34:42,629 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:34:52,568 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:34:52,570 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:34:52,570 INFO sqlalchemy.engine.Engine [cached since 711s ago] ('gurinonyoman',)
2026-02-11 00:34:52,577 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:34:52,577 INFO sqlalchemy.engine.Engine [cached since 710.9s ago] (7,)
2026-02-11 00:34:52,583 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:34:52,583 INFO sqlalchemy.engine.Engine [cached since 710.9s ago] ('active', 7)
2026-02-11 00:34:52,589 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:34:52,589 INFO sqlalchemy.engine.Engine [cached since 710.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:34:52,596 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:52,596 INFO sqlalchemy.engine.Engine [cached since 710.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 52, 575669, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:52,601 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:52,602 INFO sqlalchemy.engine.Engine [cached since 710.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 52, 575669, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:52,606 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:34:52,606 INFO sqlalchemy.engine.Engine [cached since 710.9s ago] (7,)
2026-02-11 00:34:52,612 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:34:52,612 INFO sqlalchemy.engine.Engine [cached since 710.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 52, 575669, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:52,619 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:34:52,620 INFO sqlalchemy.engine.Engine [cached since 710.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:34:52,626 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:34:52,626 INFO sqlalchemy.engine.Engine [cached since 710.9s ago] (7,)
2026-02-11 00:34:52,631 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:34:52,631 INFO sqlalchemy.engine.Engine [cached since 710.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 34, 52, 575669, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:34:52,638 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:34:52,639 INFO sqlalchemy.engine.Engine [cached since 710.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 34, 52, 638219, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51016 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:34:52,646 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:35:02,539 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:35:02,540 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:35:02,540 INFO sqlalchemy.engine.Engine [cached since 720.9s ago] ('gurinonyoman',)
2026-02-11 00:35:02,546 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:35:02,547 INFO sqlalchemy.engine.Engine [cached since 720.9s ago] (7,)
2026-02-11 00:35:02,552 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:35:02,552 INFO sqlalchemy.engine.Engine [cached since 720.9s ago] ('active', 7)
2026-02-11 00:35:02,558 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:35:02,558 INFO sqlalchemy.engine.Engine [cached since 720.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:35:02,565 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:02,565 INFO sqlalchemy.engine.Engine [cached since 720.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 2, 546222, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:02,571 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:02,571 INFO sqlalchemy.engine.Engine [cached since 720.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 2, 546222, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:02,577 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:35:02,577 INFO sqlalchemy.engine.Engine [cached since 720.9s ago] (7,)
2026-02-11 00:35:02,583 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:35:02,583 INFO sqlalchemy.engine.Engine [cached since 720.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 2, 546222, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:02,588 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:35:02,588 INFO sqlalchemy.engine.Engine [cached since 720.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:35:02,595 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:35:02,595 INFO sqlalchemy.engine.Engine [cached since 720.9s ago] (7,)
2026-02-11 00:35:02,602 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:02,603 INFO sqlalchemy.engine.Engine [cached since 720.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 2, 546222, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:02,612 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:35:02,612 INFO sqlalchemy.engine.Engine [cached since 720.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 35, 2, 611564, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51034 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:35:02,620 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:35:12,538 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:35:12,540 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:35:12,540 INFO sqlalchemy.engine.Engine [cached since 730.9s ago] ('gurinonyoman',)
2026-02-11 00:35:12,546 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:35:12,547 INFO sqlalchemy.engine.Engine [cached since 730.9s ago] (7,)
2026-02-11 00:35:12,552 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:35:12,552 INFO sqlalchemy.engine.Engine [cached since 730.9s ago] ('active', 7)
2026-02-11 00:35:12,557 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:35:12,557 INFO sqlalchemy.engine.Engine [cached since 730.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:35:12,563 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:12,563 INFO sqlalchemy.engine.Engine [cached since 730.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 12, 545679, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:12,568 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:12,569 INFO sqlalchemy.engine.Engine [cached since 730.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 12, 545679, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:12,575 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:35:12,576 INFO sqlalchemy.engine.Engine [cached since 730.9s ago] (7,)
2026-02-11 00:35:12,580 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:35:12,581 INFO sqlalchemy.engine.Engine [cached since 730.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 12, 545679, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:12,585 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:35:12,585 INFO sqlalchemy.engine.Engine [cached since 730.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:35:12,591 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:35:12,591 INFO sqlalchemy.engine.Engine [cached since 730.9s ago] (7,)
2026-02-11 00:35:12,596 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:12,596 INFO sqlalchemy.engine.Engine [cached since 730.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 12, 545679, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:12,603 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:35:12,604 INFO sqlalchemy.engine.Engine [cached since 730.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 35, 12, 602765, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51051 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:35:12,610 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:35:22,537 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:35:22,538 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:35:22,538 INFO sqlalchemy.engine.Engine [cached since 740.9s ago] ('gurinonyoman',)
2026-02-11 00:35:22,551 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:35:22,551 INFO sqlalchemy.engine.Engine [cached since 740.9s ago] (7,)
2026-02-11 00:35:22,557 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:35:22,557 INFO sqlalchemy.engine.Engine [cached since 740.9s ago] ('active', 7)
2026-02-11 00:35:22,562 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:35:22,563 INFO sqlalchemy.engine.Engine [cached since 740.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:35:22,569 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:22,570 INFO sqlalchemy.engine.Engine [cached since 740.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 22, 550229, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:22,576 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:22,577 INFO sqlalchemy.engine.Engine [cached since 740.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 22, 550229, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:22,583 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:35:22,583 INFO sqlalchemy.engine.Engine [cached since 740.9s ago] (7,)
2026-02-11 00:35:22,588 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:35:22,588 INFO sqlalchemy.engine.Engine [cached since 740.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 22, 550229, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:22,593 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:35:22,593 INFO sqlalchemy.engine.Engine [cached since 740.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:35:22,601 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:35:22,601 INFO sqlalchemy.engine.Engine [cached since 740.9s ago] (7,)
2026-02-11 00:35:22,608 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:22,608 INFO sqlalchemy.engine.Engine [cached since 740.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 22, 550229, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:22,614 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:35:22,615 INFO sqlalchemy.engine.Engine [cached since 740.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 35, 22, 614014, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51067 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:35:22,621 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:35:32,540 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:35:32,541 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:35:32,541 INFO sqlalchemy.engine.Engine [cached since 750.9s ago] ('gurinonyoman',)
2026-02-11 00:35:32,547 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:35:32,547 INFO sqlalchemy.engine.Engine [cached since 750.9s ago] (7,)
2026-02-11 00:35:32,552 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:35:32,552 INFO sqlalchemy.engine.Engine [cached since 750.9s ago] ('active', 7)
2026-02-11 00:35:32,558 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:35:32,558 INFO sqlalchemy.engine.Engine [cached since 750.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:35:32,563 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:32,564 INFO sqlalchemy.engine.Engine [cached since 750.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 32, 546746, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:32,569 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:32,569 INFO sqlalchemy.engine.Engine [cached since 750.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 32, 546746, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:32,575 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:35:32,575 INFO sqlalchemy.engine.Engine [cached since 750.9s ago] (7,)
2026-02-11 00:35:32,581 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:35:32,581 INFO sqlalchemy.engine.Engine [cached since 750.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 32, 546746, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:32,587 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:35:32,587 INFO sqlalchemy.engine.Engine [cached since 750.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:35:32,593 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:35:32,593 INFO sqlalchemy.engine.Engine [cached since 750.9s ago] (7,)
2026-02-11 00:35:32,600 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:32,600 INFO sqlalchemy.engine.Engine [cached since 750.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 32, 546746, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:32,612 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:35:32,612 INFO sqlalchemy.engine.Engine [cached since 750.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 35, 32, 610174, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51096 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:35:32,621 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:35:42,535 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:35:42,536 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:35:42,536 INFO sqlalchemy.engine.Engine [cached since 760.9s ago] ('gurinonyoman',)
2026-02-11 00:35:42,549 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:35:42,550 INFO sqlalchemy.engine.Engine [cached since 760.9s ago] (7,)
2026-02-11 00:35:42,556 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:35:42,557 INFO sqlalchemy.engine.Engine [cached since 760.9s ago] ('active', 7)
2026-02-11 00:35:42,563 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:35:42,563 INFO sqlalchemy.engine.Engine [cached since 760.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:35:42,570 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:42,570 INFO sqlalchemy.engine.Engine [cached since 760.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 42, 549167, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:42,577 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:42,577 INFO sqlalchemy.engine.Engine [cached since 760.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 42, 549167, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:42,583 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:35:42,583 INFO sqlalchemy.engine.Engine [cached since 760.9s ago] (7,)
2026-02-11 00:35:42,589 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:35:42,589 INFO sqlalchemy.engine.Engine [cached since 760.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 42, 549167, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:42,594 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:35:42,594 INFO sqlalchemy.engine.Engine [cached since 760.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:35:42,602 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:35:42,602 INFO sqlalchemy.engine.Engine [cached since 760.9s ago] (7,)
2026-02-11 00:35:42,608 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:42,608 INFO sqlalchemy.engine.Engine [cached since 760.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 42, 549167, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:42,614 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:35:42,615 INFO sqlalchemy.engine.Engine [cached since 760.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 35, 42, 614141, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51118 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:35:42,621 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:35:52,540 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:35:52,541 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:35:52,541 INFO sqlalchemy.engine.Engine [cached since 770.9s ago] ('gurinonyoman',)
2026-02-11 00:35:52,547 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:35:52,547 INFO sqlalchemy.engine.Engine [cached since 770.9s ago] (7,)
2026-02-11 00:35:52,553 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:35:52,554 INFO sqlalchemy.engine.Engine [cached since 770.9s ago] ('active', 7)
2026-02-11 00:35:52,560 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:35:52,561 INFO sqlalchemy.engine.Engine [cached since 770.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:35:52,567 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:52,567 INFO sqlalchemy.engine.Engine [cached since 770.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 52, 546609, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:52,575 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:52,575 INFO sqlalchemy.engine.Engine [cached since 770.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 52, 546609, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:52,580 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:35:52,580 INFO sqlalchemy.engine.Engine [cached since 770.9s ago] (7,)
2026-02-11 00:35:52,584 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:35:52,585 INFO sqlalchemy.engine.Engine [cached since 770.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 52, 546609, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:52,589 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:35:52,589 INFO sqlalchemy.engine.Engine [cached since 770.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:35:52,596 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:35:52,597 INFO sqlalchemy.engine.Engine [cached since 770.9s ago] (7,)
2026-02-11 00:35:52,603 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:35:52,603 INFO sqlalchemy.engine.Engine [cached since 770.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 35, 52, 546609, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:35:52,611 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:35:52,611 INFO sqlalchemy.engine.Engine [cached since 770.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 35, 52, 610131, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51133 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:35:52,621 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:36:02,539 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:36:02,540 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:36:02,540 INFO sqlalchemy.engine.Engine [cached since 780.9s ago] ('gurinonyoman',)
2026-02-11 00:36:02,546 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:36:02,546 INFO sqlalchemy.engine.Engine [cached since 780.9s ago] (7,)
2026-02-11 00:36:02,551 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:36:02,551 INFO sqlalchemy.engine.Engine [cached since 780.9s ago] ('active', 7)
2026-02-11 00:36:02,557 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:36:02,558 INFO sqlalchemy.engine.Engine [cached since 780.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:36:02,564 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:02,564 INFO sqlalchemy.engine.Engine [cached since 780.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 2, 545616, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:02,570 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:02,570 INFO sqlalchemy.engine.Engine [cached since 780.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 2, 545616, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:02,576 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:36:02,576 INFO sqlalchemy.engine.Engine [cached since 780.9s ago] (7,)
2026-02-11 00:36:02,583 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:36:02,583 INFO sqlalchemy.engine.Engine [cached since 780.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 2, 545616, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:02,588 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:36:02,588 INFO sqlalchemy.engine.Engine [cached since 780.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:36:02,594 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:36:02,594 INFO sqlalchemy.engine.Engine [cached since 780.9s ago] (7,)
2026-02-11 00:36:02,601 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:02,602 INFO sqlalchemy.engine.Engine [cached since 780.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 2, 545616, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:02,618 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:36:02,618 INFO sqlalchemy.engine.Engine [cached since 780.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 36, 2, 617224, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51149 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:36:02,626 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:36:12,563 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:36:12,564 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:36:12,564 INFO sqlalchemy.engine.Engine [cached since 790.9s ago] ('gurinonyoman',)
2026-02-11 00:36:12,572 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:36:12,572 INFO sqlalchemy.engine.Engine [cached since 790.9s ago] (7,)
2026-02-11 00:36:12,579 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:36:12,579 INFO sqlalchemy.engine.Engine [cached since 790.9s ago] ('active', 7)
2026-02-11 00:36:12,586 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:36:12,586 INFO sqlalchemy.engine.Engine [cached since 790.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:36:12,592 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:12,592 INFO sqlalchemy.engine.Engine [cached since 790.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 12, 571853, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:12,598 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:12,598 INFO sqlalchemy.engine.Engine [cached since 790.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 12, 571853, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:12,604 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:36:12,604 INFO sqlalchemy.engine.Engine [cached since 790.9s ago] (7,)
2026-02-11 00:36:12,610 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:36:12,611 INFO sqlalchemy.engine.Engine [cached since 790.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 12, 571853, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:12,618 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:36:12,618 INFO sqlalchemy.engine.Engine [cached since 790.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:36:12,624 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:36:12,624 INFO sqlalchemy.engine.Engine [cached since 790.9s ago] (7,)
2026-02-11 00:36:12,630 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:12,630 INFO sqlalchemy.engine.Engine [cached since 790.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 12, 571853, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:12,637 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:36:12,638 INFO sqlalchemy.engine.Engine [cached since 790.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 36, 12, 637017, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51177 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:36:12,645 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:36:22,950 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:36:22,952 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:36:22,953 INFO sqlalchemy.engine.Engine [cached since 801.3s ago] ('gurinonyoman',)
2026-02-11 00:36:23,005 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:36:23,006 INFO sqlalchemy.engine.Engine [cached since 801.3s ago] (7,)
2026-02-11 00:36:23,074 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:36:23,075 INFO sqlalchemy.engine.Engine [cached since 801.4s ago] ('active', 7)
2026-02-11 00:36:23,133 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:36:23,134 INFO sqlalchemy.engine.Engine [cached since 801.4s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:36:23,193 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:23,194 INFO sqlalchemy.engine.Engine [cached since 801.5s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 23, 4831, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:23,250 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:23,250 INFO sqlalchemy.engine.Engine [cached since 801.6s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 23, 4831, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:23,317 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:36:23,317 INFO sqlalchemy.engine.Engine [cached since 801.6s ago] (7,)
2026-02-11 00:36:23,377 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:36:23,377 INFO sqlalchemy.engine.Engine [cached since 801.7s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 23, 4831, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:23,444 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:36:23,444 INFO sqlalchemy.engine.Engine [cached since 801.7s ago] ('pending', 'running', 7, 10)
2026-02-11 00:36:23,503 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:36:23,503 INFO sqlalchemy.engine.Engine [cached since 801.8s ago] (7,)
2026-02-11 00:36:23,564 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:23,564 INFO sqlalchemy.engine.Engine [cached since 801.8s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 23, 4831, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:23,628 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:36:23,628 INFO sqlalchemy.engine.Engine [cached since 801.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 36, 23, 625905, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51195 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:36:23,689 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:36:32,539 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:36:32,541 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:36:32,541 INFO sqlalchemy.engine.Engine [cached since 810.9s ago] ('gurinonyoman',)
2026-02-11 00:36:32,548 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:36:32,548 INFO sqlalchemy.engine.Engine [cached since 810.9s ago] (7,)
2026-02-11 00:36:32,553 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:36:32,554 INFO sqlalchemy.engine.Engine [cached since 810.9s ago] ('active', 7)
2026-02-11 00:36:32,560 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:36:32,560 INFO sqlalchemy.engine.Engine [cached since 810.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:36:32,567 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:32,567 INFO sqlalchemy.engine.Engine [cached since 810.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 32, 547717, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:32,573 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:32,573 INFO sqlalchemy.engine.Engine [cached since 810.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 32, 547717, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:32,580 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:36:32,581 INFO sqlalchemy.engine.Engine [cached since 810.9s ago] (7,)
2026-02-11 00:36:32,588 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:36:32,588 INFO sqlalchemy.engine.Engine [cached since 810.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 32, 547717, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:32,594 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:36:32,594 INFO sqlalchemy.engine.Engine [cached since 810.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:36:32,600 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:36:32,600 INFO sqlalchemy.engine.Engine [cached since 810.9s ago] (7,)
2026-02-11 00:36:32,605 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:32,606 INFO sqlalchemy.engine.Engine [cached since 810.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 32, 547717, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:32,614 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:36:32,614 INFO sqlalchemy.engine.Engine [cached since 810.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 36, 32, 612665, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51210 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:36:32,621 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:36:42,546 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:36:42,548 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:36:42,548 INFO sqlalchemy.engine.Engine [cached since 820.9s ago] ('gurinonyoman',)
2026-02-11 00:36:42,557 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:36:42,557 INFO sqlalchemy.engine.Engine [cached since 820.9s ago] (7,)
2026-02-11 00:36:42,563 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:36:42,563 INFO sqlalchemy.engine.Engine [cached since 820.9s ago] ('active', 7)
2026-02-11 00:36:42,570 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:36:42,570 INFO sqlalchemy.engine.Engine [cached since 820.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:36:42,578 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:42,579 INFO sqlalchemy.engine.Engine [cached since 820.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 42, 556342, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:42,586 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:42,587 INFO sqlalchemy.engine.Engine [cached since 820.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 42, 556342, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:42,595 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:36:42,595 INFO sqlalchemy.engine.Engine [cached since 820.9s ago] (7,)
2026-02-11 00:36:42,602 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:36:42,602 INFO sqlalchemy.engine.Engine [cached since 820.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 42, 556342, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:42,608 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:36:42,608 INFO sqlalchemy.engine.Engine [cached since 820.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:36:42,618 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:36:42,619 INFO sqlalchemy.engine.Engine [cached since 820.9s ago] (7,)
2026-02-11 00:36:42,625 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:42,626 INFO sqlalchemy.engine.Engine [cached since 820.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 42, 556342, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:42,637 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:36:42,637 INFO sqlalchemy.engine.Engine [cached since 820.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 36, 42, 635710, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51244 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:36:42,646 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:36:52,539 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:36:52,540 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:36:52,540 INFO sqlalchemy.engine.Engine [cached since 830.9s ago] ('gurinonyoman',)
2026-02-11 00:36:52,548 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:36:52,548 INFO sqlalchemy.engine.Engine [cached since 830.9s ago] (7,)
2026-02-11 00:36:52,555 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:36:52,555 INFO sqlalchemy.engine.Engine [cached since 830.9s ago] ('active', 7)
2026-02-11 00:36:52,562 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:36:52,562 INFO sqlalchemy.engine.Engine [cached since 830.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:36:52,568 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:52,568 INFO sqlalchemy.engine.Engine [cached since 830.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 52, 547223, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:52,574 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:52,574 INFO sqlalchemy.engine.Engine [cached since 830.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 52, 547223, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:52,579 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:36:52,579 INFO sqlalchemy.engine.Engine [cached since 830.9s ago] (7,)
2026-02-11 00:36:52,587 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:36:52,587 INFO sqlalchemy.engine.Engine [cached since 830.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 52, 547223, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:52,593 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:36:52,594 INFO sqlalchemy.engine.Engine [cached since 830.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:36:52,600 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:36:52,600 INFO sqlalchemy.engine.Engine [cached since 830.9s ago] (7,)
2026-02-11 00:36:52,606 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:36:52,606 INFO sqlalchemy.engine.Engine [cached since 830.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 36, 52, 547223, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:36:52,612 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:36:52,613 INFO sqlalchemy.engine.Engine [cached since 830.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 36, 52, 611837, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51259 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:36:52,621 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:37:02,537 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:37:02,538 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:37:02,538 INFO sqlalchemy.engine.Engine [cached since 840.9s ago] ('gurinonyoman',)
2026-02-11 00:37:02,552 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:37:02,552 INFO sqlalchemy.engine.Engine [cached since 840.9s ago] (7,)
2026-02-11 00:37:02,557 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:37:02,558 INFO sqlalchemy.engine.Engine [cached since 840.9s ago] ('active', 7)
2026-02-11 00:37:02,563 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:37:02,564 INFO sqlalchemy.engine.Engine [cached since 840.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:37:02,570 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:02,570 INFO sqlalchemy.engine.Engine [cached since 840.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 2, 551769, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:02,577 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:02,577 INFO sqlalchemy.engine.Engine [cached since 840.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 2, 551769, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:02,584 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:37:02,584 INFO sqlalchemy.engine.Engine [cached since 840.9s ago] (7,)
2026-02-11 00:37:02,590 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:37:02,590 INFO sqlalchemy.engine.Engine [cached since 840.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 2, 551769, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:02,596 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:37:02,596 INFO sqlalchemy.engine.Engine [cached since 840.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:37:02,603 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:37:02,603 INFO sqlalchemy.engine.Engine [cached since 840.9s ago] (7,)
2026-02-11 00:37:02,608 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:02,609 INFO sqlalchemy.engine.Engine [cached since 840.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 2, 551769, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:02,619 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:37:02,619 INFO sqlalchemy.engine.Engine [cached since 840.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 37, 2, 617864, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51276 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:37:02,627 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:37:12,551 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:37:12,552 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:37:12,553 INFO sqlalchemy.engine.Engine [cached since 850.9s ago] ('gurinonyoman',)
2026-02-11 00:37:12,563 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:37:12,563 INFO sqlalchemy.engine.Engine [cached since 850.9s ago] (7,)
2026-02-11 00:37:12,570 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:37:12,570 INFO sqlalchemy.engine.Engine [cached since 850.9s ago] ('active', 7)
2026-02-11 00:37:12,580 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:37:12,580 INFO sqlalchemy.engine.Engine [cached since 850.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:37:12,588 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:12,588 INFO sqlalchemy.engine.Engine [cached since 850.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 12, 561733, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:12,595 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:12,595 INFO sqlalchemy.engine.Engine [cached since 850.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 12, 561733, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:12,601 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:37:12,602 INFO sqlalchemy.engine.Engine [cached since 850.9s ago] (7,)
2026-02-11 00:37:12,609 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:37:12,609 INFO sqlalchemy.engine.Engine [cached since 850.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 12, 561733, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:12,614 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:37:12,614 INFO sqlalchemy.engine.Engine [cached since 850.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:37:12,622 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:37:12,622 INFO sqlalchemy.engine.Engine [cached since 850.9s ago] (7,)
2026-02-11 00:37:12,628 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:12,629 INFO sqlalchemy.engine.Engine [cached since 850.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 12, 561733, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:12,637 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:37:12,637 INFO sqlalchemy.engine.Engine [cached since 850.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 37, 12, 635810, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51295 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:37:12,645 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:37:22,539 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:37:22,540 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:37:22,540 INFO sqlalchemy.engine.Engine [cached since 860.9s ago] ('gurinonyoman',)
2026-02-11 00:37:22,556 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:37:22,556 INFO sqlalchemy.engine.Engine [cached since 860.9s ago] (7,)
2026-02-11 00:37:22,562 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:37:22,562 INFO sqlalchemy.engine.Engine [cached since 860.9s ago] ('active', 7)
2026-02-11 00:37:22,567 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:37:22,567 INFO sqlalchemy.engine.Engine [cached since 860.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:37:22,574 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:22,574 INFO sqlalchemy.engine.Engine [cached since 860.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 22, 554839, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:22,579 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:22,580 INFO sqlalchemy.engine.Engine [cached since 860.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 22, 554839, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:22,585 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:37:22,586 INFO sqlalchemy.engine.Engine [cached since 860.9s ago] (7,)
2026-02-11 00:37:22,592 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:37:22,592 INFO sqlalchemy.engine.Engine [cached since 860.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 22, 554839, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:22,599 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:37:22,599 INFO sqlalchemy.engine.Engine [cached since 860.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:37:22,606 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:37:22,607 INFO sqlalchemy.engine.Engine [cached since 860.9s ago] (7,)
2026-02-11 00:37:22,612 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:22,612 INFO sqlalchemy.engine.Engine [cached since 860.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 22, 554839, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:22,621 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:37:22,621 INFO sqlalchemy.engine.Engine [cached since 860.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 37, 22, 620060, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51325 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:37:22,629 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:37:32,571 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:37:32,571 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:37:32,571 INFO sqlalchemy.engine.Engine [cached since 871s ago] ('gurinonyoman',)
2026-02-11 00:37:32,585 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:37:32,585 INFO sqlalchemy.engine.Engine [cached since 870.9s ago] (7,)
2026-02-11 00:37:32,594 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:37:32,594 INFO sqlalchemy.engine.Engine [cached since 870.9s ago] ('active', 7)
2026-02-11 00:37:32,601 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:37:32,601 INFO sqlalchemy.engine.Engine [cached since 870.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:37:32,609 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:32,610 INFO sqlalchemy.engine.Engine [cached since 870.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 32, 584268, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:32,617 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:32,617 INFO sqlalchemy.engine.Engine [cached since 870.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 32, 584268, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:32,624 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:37:32,625 INFO sqlalchemy.engine.Engine [cached since 870.9s ago] (7,)
2026-02-11 00:37:32,632 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:37:32,633 INFO sqlalchemy.engine.Engine [cached since 870.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 32, 584268, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:32,641 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:37:32,641 INFO sqlalchemy.engine.Engine [cached since 870.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:37:32,650 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:37:32,651 INFO sqlalchemy.engine.Engine [cached since 870.9s ago] (7,)
2026-02-11 00:37:32,656 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:32,656 INFO sqlalchemy.engine.Engine [cached since 870.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 32, 584268, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:32,667 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:37:32,667 INFO sqlalchemy.engine.Engine [cached since 870.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 37, 32, 665273, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51340 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:37:32,672 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:37:42,536 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:37:42,537 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:37:42,537 INFO sqlalchemy.engine.Engine [cached since 880.9s ago] ('gurinonyoman',)
2026-02-11 00:37:42,549 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:37:42,549 INFO sqlalchemy.engine.Engine [cached since 880.9s ago] (7,)
2026-02-11 00:37:42,554 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:37:42,554 INFO sqlalchemy.engine.Engine [cached since 880.9s ago] ('active', 7)
2026-02-11 00:37:42,560 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:37:42,560 INFO sqlalchemy.engine.Engine [cached since 880.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:37:42,567 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:42,567 INFO sqlalchemy.engine.Engine [cached since 880.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 42, 548750, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:42,573 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:42,573 INFO sqlalchemy.engine.Engine [cached since 880.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 42, 548750, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:42,579 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:37:42,579 INFO sqlalchemy.engine.Engine [cached since 880.9s ago] (7,)
2026-02-11 00:37:42,584 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:37:42,584 INFO sqlalchemy.engine.Engine [cached since 880.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 42, 548750, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:42,589 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:37:42,589 INFO sqlalchemy.engine.Engine [cached since 880.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:37:42,599 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:37:42,600 INFO sqlalchemy.engine.Engine [cached since 880.9s ago] (7,)
2026-02-11 00:37:42,605 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:42,605 INFO sqlalchemy.engine.Engine [cached since 880.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 42, 548750, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:42,612 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:37:42,612 INFO sqlalchemy.engine.Engine [cached since 880.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 37, 42, 611971, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51360 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:37:42,620 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:37:52,565 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:37:52,570 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:37:52,570 INFO sqlalchemy.engine.Engine [cached since 891s ago] ('gurinonyoman',)
2026-02-11 00:37:52,579 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:37:52,579 INFO sqlalchemy.engine.Engine [cached since 890.9s ago] (7,)
2026-02-11 00:37:52,586 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:37:52,586 INFO sqlalchemy.engine.Engine [cached since 890.9s ago] ('active', 7)
2026-02-11 00:37:52,592 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:37:52,592 INFO sqlalchemy.engine.Engine [cached since 890.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:37:52,597 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:52,597 INFO sqlalchemy.engine.Engine [cached since 890.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 52, 578084, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:52,604 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:52,604 INFO sqlalchemy.engine.Engine [cached since 890.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 52, 578084, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:52,609 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:37:52,610 INFO sqlalchemy.engine.Engine [cached since 890.9s ago] (7,)
2026-02-11 00:37:52,616 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:37:52,616 INFO sqlalchemy.engine.Engine [cached since 890.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 52, 578084, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:52,622 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:37:52,622 INFO sqlalchemy.engine.Engine [cached since 890.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:37:52,631 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:37:52,631 INFO sqlalchemy.engine.Engine [cached since 890.9s ago] (7,)
2026-02-11 00:37:52,636 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:37:52,637 INFO sqlalchemy.engine.Engine [cached since 890.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 37, 52, 578084, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:37:52,643 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:37:52,643 INFO sqlalchemy.engine.Engine [cached since 890.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 37, 52, 642679, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51378 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:37:52,649 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:38:02,540 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:38:02,542 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:38:02,542 INFO sqlalchemy.engine.Engine [cached since 900.9s ago] ('gurinonyoman',)
2026-02-11 00:38:02,548 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:38:02,548 INFO sqlalchemy.engine.Engine [cached since 900.9s ago] (7,)
2026-02-11 00:38:02,554 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:38:02,554 INFO sqlalchemy.engine.Engine [cached since 900.9s ago] ('active', 7)
2026-02-11 00:38:02,560 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:38:02,560 INFO sqlalchemy.engine.Engine [cached since 900.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:38:02,567 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:02,567 INFO sqlalchemy.engine.Engine [cached since 900.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 2, 547890, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:02,573 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:02,573 INFO sqlalchemy.engine.Engine [cached since 900.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 2, 547890, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:02,579 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:38:02,579 INFO sqlalchemy.engine.Engine [cached since 900.9s ago] (7,)
2026-02-11 00:38:02,584 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:38:02,585 INFO sqlalchemy.engine.Engine [cached since 900.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 2, 547890, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:02,591 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:38:02,591 INFO sqlalchemy.engine.Engine [cached since 900.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:38:02,598 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:38:02,598 INFO sqlalchemy.engine.Engine [cached since 900.9s ago] (7,)
2026-02-11 00:38:02,604 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:02,604 INFO sqlalchemy.engine.Engine [cached since 900.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 2, 547890, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:02,612 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:38:02,612 INFO sqlalchemy.engine.Engine [cached since 900.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 38, 2, 611415, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51396 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:38:02,618 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:38:12,549 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:38:12,550 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:38:12,551 INFO sqlalchemy.engine.Engine [cached since 910.9s ago] ('gurinonyoman',)
2026-02-11 00:38:12,558 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:38:12,558 INFO sqlalchemy.engine.Engine [cached since 910.9s ago] (7,)
2026-02-11 00:38:12,564 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:38:12,564 INFO sqlalchemy.engine.Engine [cached since 910.9s ago] ('active', 7)
2026-02-11 00:38:12,569 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:38:12,570 INFO sqlalchemy.engine.Engine [cached since 910.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:38:12,575 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:12,575 INFO sqlalchemy.engine.Engine [cached since 910.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 12, 556969, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:12,581 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:12,581 INFO sqlalchemy.engine.Engine [cached since 910.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 12, 556969, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:12,586 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:38:12,586 INFO sqlalchemy.engine.Engine [cached since 910.9s ago] (7,)
2026-02-11 00:38:12,592 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:38:12,592 INFO sqlalchemy.engine.Engine [cached since 910.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 12, 556969, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:12,599 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:38:12,599 INFO sqlalchemy.engine.Engine [cached since 910.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:38:12,606 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:38:12,606 INFO sqlalchemy.engine.Engine [cached since 910.9s ago] (7,)
2026-02-11 00:38:12,612 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:12,612 INFO sqlalchemy.engine.Engine [cached since 910.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 12, 556969, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:12,620 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:38:12,621 INFO sqlalchemy.engine.Engine [cached since 910.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 38, 12, 620042, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51429 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:38:12,629 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:38:22,537 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:38:22,538 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:38:22,538 INFO sqlalchemy.engine.Engine [cached since 920.9s ago] ('gurinonyoman',)
2026-02-11 00:38:22,543 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:38:22,543 INFO sqlalchemy.engine.Engine [cached since 920.9s ago] (7,)
2026-02-11 00:38:22,548 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:38:22,549 INFO sqlalchemy.engine.Engine [cached since 920.9s ago] ('active', 7)
2026-02-11 00:38:22,554 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:38:22,554 INFO sqlalchemy.engine.Engine [cached since 920.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:38:22,559 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:22,560 INFO sqlalchemy.engine.Engine [cached since 920.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 22, 542692, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:22,566 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:22,566 INFO sqlalchemy.engine.Engine [cached since 920.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 22, 542692, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:22,573 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:38:22,573 INFO sqlalchemy.engine.Engine [cached since 920.9s ago] (7,)
2026-02-11 00:38:22,579 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:38:22,580 INFO sqlalchemy.engine.Engine [cached since 920.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 22, 542692, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:22,584 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:38:22,584 INFO sqlalchemy.engine.Engine [cached since 920.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:38:22,596 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:38:22,596 INFO sqlalchemy.engine.Engine [cached since 920.9s ago] (7,)
2026-02-11 00:38:22,602 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:22,602 INFO sqlalchemy.engine.Engine [cached since 920.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 22, 542692, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:22,618 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:38:22,618 INFO sqlalchemy.engine.Engine [cached since 920.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 38, 22, 617294, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51447 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:38:22,626 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:38:32,545 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:38:32,546 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:38:32,546 INFO sqlalchemy.engine.Engine [cached since 930.9s ago] ('gurinonyoman',)
2026-02-11 00:38:32,553 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:38:32,553 INFO sqlalchemy.engine.Engine [cached since 930.9s ago] (7,)
2026-02-11 00:38:32,559 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:38:32,559 INFO sqlalchemy.engine.Engine [cached since 930.9s ago] ('active', 7)
2026-02-11 00:38:32,564 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:38:32,564 INFO sqlalchemy.engine.Engine [cached since 930.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:38:32,570 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:32,570 INFO sqlalchemy.engine.Engine [cached since 930.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 32, 553008, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:32,577 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:32,577 INFO sqlalchemy.engine.Engine [cached since 930.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 32, 553008, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:32,584 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:38:32,584 INFO sqlalchemy.engine.Engine [cached since 930.9s ago] (7,)
2026-02-11 00:38:32,590 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:38:32,590 INFO sqlalchemy.engine.Engine [cached since 930.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 32, 553008, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:32,596 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:38:32,596 INFO sqlalchemy.engine.Engine [cached since 930.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:38:32,602 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:38:32,602 INFO sqlalchemy.engine.Engine [cached since 930.9s ago] (7,)
2026-02-11 00:38:32,607 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:32,607 INFO sqlalchemy.engine.Engine [cached since 930.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 32, 553008, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:32,616 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:38:32,616 INFO sqlalchemy.engine.Engine [cached since 930.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 38, 32, 614863, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51464 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:38:32,622 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:51486 - "OPTIONS /api/v1/dashboard/stats HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:38:40,890 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:38:40,891 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:38:40,891 INFO sqlalchemy.engine.Engine [cached since 939.3s ago] ('gurinonyoman',)
2026-02-11 00:38:40,897 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:38:40,897 INFO sqlalchemy.engine.Engine [cached since 939.2s ago] (7,)
2026-02-11 00:38:40,902 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:38:40,903 INFO sqlalchemy.engine.Engine [cached since 939.2s ago] ('active', 7)
2026-02-11 00:38:40,909 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:38:40,909 INFO sqlalchemy.engine.Engine [cached since 939.2s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:38:40,915 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:40,916 INFO sqlalchemy.engine.Engine [cached since 939.2s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 40, 896336, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:40,920 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:40,920 INFO sqlalchemy.engine.Engine [cached since 939.2s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 40, 896336, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:40,926 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:38:40,926 INFO sqlalchemy.engine.Engine [cached since 939.2s ago] (7,)
2026-02-11 00:38:40,931 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:38:40,931 INFO sqlalchemy.engine.Engine [cached since 939.2s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 40, 896336, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:40,937 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:38:40,937 INFO sqlalchemy.engine.Engine [cached since 939.2s ago] ('pending', 'running', 7, 10)
2026-02-11 00:38:40,943 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:38:40,943 INFO sqlalchemy.engine.Engine [cached since 939.2s ago] (7,)
2026-02-11 00:38:40,948 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:40,948 INFO sqlalchemy.engine.Engine [cached since 939.2s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 40, 896336, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:40,955 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:38:40,955 INFO sqlalchemy.engine.Engine [cached since 939.2s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 38, 40, 954658, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51486 - "GET /api/v1/dashboard/stats HTTP/1.1" 200 OK
2026-02-11 00:38:40,962 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:38:42,536 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:38:42,537 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:38:42,537 INFO sqlalchemy.engine.Engine [cached since 940.9s ago] ('gurinonyoman',)
2026-02-11 00:38:42,543 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:38:42,543 INFO sqlalchemy.engine.Engine [cached since 940.9s ago] (7,)
2026-02-11 00:38:42,549 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:38:42,549 INFO sqlalchemy.engine.Engine [cached since 940.9s ago] ('active', 7)
2026-02-11 00:38:42,554 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:38:42,554 INFO sqlalchemy.engine.Engine [cached since 940.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:38:42,559 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:42,560 INFO sqlalchemy.engine.Engine [cached since 940.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 42, 542711, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:42,566 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:42,566 INFO sqlalchemy.engine.Engine [cached since 940.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 42, 542711, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:42,573 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:38:42,573 INFO sqlalchemy.engine.Engine [cached since 940.9s ago] (7,)
2026-02-11 00:38:42,578 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:38:42,578 INFO sqlalchemy.engine.Engine [cached since 940.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 42, 542711, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:42,585 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:38:42,585 INFO sqlalchemy.engine.Engine [cached since 940.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:38:42,599 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:38:42,599 INFO sqlalchemy.engine.Engine [cached since 940.9s ago] (7,)
2026-02-11 00:38:42,607 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:42,607 INFO sqlalchemy.engine.Engine [cached since 940.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 42, 542711, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:42,613 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:38:42,613 INFO sqlalchemy.engine.Engine [cached since 940.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 38, 42, 612876, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51486 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:38:42,620 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:38:49,414 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:38:49,415 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:38:49,415 INFO sqlalchemy.engine.Engine [cached since 947.8s ago] ('gurinonyoman',)
2026-02-11 00:38:49,428 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:38:49,428 INFO sqlalchemy.engine.Engine [cached since 947.8s ago] (7,)
2026-02-11 00:38:49,433 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:38:49,433 INFO sqlalchemy.engine.Engine [cached since 947.8s ago] ('active', 7)
2026-02-11 00:38:49,438 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:38:49,438 INFO sqlalchemy.engine.Engine [cached since 947.8s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:38:49,443 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:49,443 INFO sqlalchemy.engine.Engine [cached since 947.8s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 49, 427609, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:49,448 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:49,449 INFO sqlalchemy.engine.Engine [cached since 947.8s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 49, 427609, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:49,454 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:38:49,454 INFO sqlalchemy.engine.Engine [cached since 947.8s ago] (7,)
2026-02-11 00:38:49,458 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:38:49,458 INFO sqlalchemy.engine.Engine [cached since 947.8s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 49, 427609, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:49,463 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:38:49,463 INFO sqlalchemy.engine.Engine [cached since 947.8s ago] ('pending', 'running', 7, 10)
2026-02-11 00:38:49,468 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:38:49,468 INFO sqlalchemy.engine.Engine [cached since 947.7s ago] (7,)
2026-02-11 00:38:49,473 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:49,473 INFO sqlalchemy.engine.Engine [cached since 947.7s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 49, 427609, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:49,482 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:38:49,482 INFO sqlalchemy.engine.Engine [cached since 947.7s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 38, 49, 481127, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51507 - "GET /api/v1/dashboard/stats HTTP/1.1" 200 OK
2026-02-11 00:38:49,488 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:38:52,538 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:38:52,538 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:38:52,538 INFO sqlalchemy.engine.Engine [cached since 950.9s ago] ('gurinonyoman',)
2026-02-11 00:38:52,546 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:38:52,546 INFO sqlalchemy.engine.Engine [cached since 950.9s ago] (7,)
2026-02-11 00:38:52,552 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:38:52,552 INFO sqlalchemy.engine.Engine [cached since 950.9s ago] ('active', 7)
2026-02-11 00:38:52,559 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:38:52,560 INFO sqlalchemy.engine.Engine [cached since 950.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:38:52,566 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:52,566 INFO sqlalchemy.engine.Engine [cached since 950.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 52, 545050, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:52,571 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:52,571 INFO sqlalchemy.engine.Engine [cached since 950.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 52, 545050, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:52,577 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:38:52,578 INFO sqlalchemy.engine.Engine [cached since 950.9s ago] (7,)
2026-02-11 00:38:52,583 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:38:52,583 INFO sqlalchemy.engine.Engine [cached since 950.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 52, 545050, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:52,587 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:38:52,587 INFO sqlalchemy.engine.Engine [cached since 950.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:38:52,593 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:38:52,593 INFO sqlalchemy.engine.Engine [cached since 950.9s ago] (7,)
2026-02-11 00:38:52,600 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:38:52,601 INFO sqlalchemy.engine.Engine [cached since 950.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 38, 52, 545050, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:38:52,611 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:38:52,611 INFO sqlalchemy.engine.Engine [cached since 950.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 38, 52, 609826, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51507 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:38:52,620 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:39:02,538 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:39:02,539 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:39:02,539 INFO sqlalchemy.engine.Engine [cached since 960.9s ago] ('gurinonyoman',)
2026-02-11 00:39:02,545 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:39:02,545 INFO sqlalchemy.engine.Engine [cached since 960.9s ago] (7,)
2026-02-11 00:39:02,551 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:39:02,551 INFO sqlalchemy.engine.Engine [cached since 960.9s ago] ('active', 7)
2026-02-11 00:39:02,557 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:39:02,557 INFO sqlalchemy.engine.Engine [cached since 960.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:39:02,562 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:39:02,562 INFO sqlalchemy.engine.Engine [cached since 960.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 39, 2, 545103, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:39:02,568 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:39:02,568 INFO sqlalchemy.engine.Engine [cached since 960.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 39, 2, 545103, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:39:02,573 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:39:02,573 INFO sqlalchemy.engine.Engine [cached since 960.9s ago] (7,)
2026-02-11 00:39:02,579 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:39:02,580 INFO sqlalchemy.engine.Engine [cached since 960.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 39, 2, 545103, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:39:02,584 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:39:02,585 INFO sqlalchemy.engine.Engine [cached since 960.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:39:02,590 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:39:02,590 INFO sqlalchemy.engine.Engine [cached since 960.9s ago] (7,)
2026-02-11 00:39:02,596 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:39:02,596 INFO sqlalchemy.engine.Engine [cached since 960.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 39, 2, 545103, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:39:02,604 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:39:02,604 INFO sqlalchemy.engine.Engine [cached since 960.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 39, 2, 604297, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51540 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:39:02,611 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:39:12,539 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:39:12,541 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:39:12,541 INFO sqlalchemy.engine.Engine [cached since 970.9s ago] ('gurinonyoman',)
2026-02-11 00:39:12,549 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:39:12,550 INFO sqlalchemy.engine.Engine [cached since 970.9s ago] (7,)
2026-02-11 00:39:12,556 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:39:12,556 INFO sqlalchemy.engine.Engine [cached since 970.9s ago] ('active', 7)
2026-02-11 00:39:12,562 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:39:12,563 INFO sqlalchemy.engine.Engine [cached since 970.9s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:39:12,570 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:39:12,571 INFO sqlalchemy.engine.Engine [cached since 970.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 39, 12, 548506, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:39:12,578 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:39:12,579 INFO sqlalchemy.engine.Engine [cached since 970.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 39, 12, 548506, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:39:12,585 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:39:12,585 INFO sqlalchemy.engine.Engine [cached since 970.9s ago] (7,)
2026-02-11 00:39:12,592 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:39:12,593 INFO sqlalchemy.engine.Engine [cached since 970.9s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 39, 12, 548506, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:39:12,599 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:39:12,599 INFO sqlalchemy.engine.Engine [cached since 970.9s ago] ('pending', 'running', 7, 10)
2026-02-11 00:39:12,609 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:39:12,609 INFO sqlalchemy.engine.Engine [cached since 970.9s ago] (7,)
2026-02-11 00:39:12,617 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:39:12,617 INFO sqlalchemy.engine.Engine [cached since 970.9s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 39, 12, 548506, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:39:12,625 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:39:12,626 INFO sqlalchemy.engine.Engine [cached since 970.9s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 39, 12, 624492, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51602 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:39:12,634 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:51632 - "OPTIONS /api/v1/accounts/auth/me HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:39:19,521 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:39:19,522 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:39:19,522 INFO sqlalchemy.engine.Engine [cached since 977.9s ago] ('gurinonyoman',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:51632 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:39:19,528 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:39:19,710 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:39:19,710 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:39:19,710 INFO sqlalchemy.engine.Engine [cached since 978.1s ago] ('gurinonyoman',)
2026-02-11 00:39:19,711 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:39:19,711 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:39:19,711 INFO sqlalchemy.engine.Engine [cached since 978.1s ago] ('gurinonyoman',)
2026-02-11 00:39:19,716 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:39:19,717 INFO sqlalchemy.engine.Engine [cached since 978s ago] (7,)
2026-02-11 00:39:19,719 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:39:19,720 INFO sqlalchemy.engine.Engine [cached since 978s ago] (7,)
2026-02-11 00:39:19,723 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:39:19,723 INFO sqlalchemy.engine.Engine [cached since 978s ago] ('active', 7)
2026-02-11 00:39:19,726 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:39:19,726 INFO sqlalchemy.engine.Engine [cached since 978s ago] ('active', 7)
2026-02-11 00:39:19,728 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:39:19,728 INFO sqlalchemy.engine.Engine [cached since 978s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:39:19,731 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:39:19,732 INFO sqlalchemy.engine.Engine [cached since 978s ago] ('failed', 'challenge', 'banned', 7)
2026-02-11 00:39:19,733 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:39:19,733 INFO sqlalchemy.engine.Engine [cached since 978s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 39, 19, 716198, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:39:19,736 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:39:19,737 INFO sqlalchemy.engine.Engine [cached since 978s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 39, 19, 719370, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:39:19,738 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:39:19,738 INFO sqlalchemy.engine.Engine [cached since 978s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 39, 19, 716198, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:39:19,743 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:39:19,743 INFO sqlalchemy.engine.Engine [cached since 978s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 39, 19, 719370, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:39:19,744 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:39:19,744 INFO sqlalchemy.engine.Engine [cached since 978s ago] (7,)
2026-02-11 00:39:19,749 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:39:19,749 INFO sqlalchemy.engine.Engine [cached since 978s ago] (7,)
2026-02-11 00:39:19,750 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:39:19,751 INFO sqlalchemy.engine.Engine [cached since 978s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 39, 19, 716198, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:39:19,755 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:39:19,755 INFO sqlalchemy.engine.Engine [cached since 978.1s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 39, 19, 719370, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:39:19,758 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:39:19,759 INFO sqlalchemy.engine.Engine [cached since 978s ago] ('pending', 'running', 7, 10)
2026-02-11 00:39:19,763 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:39:19,763 INFO sqlalchemy.engine.Engine [cached since 978.1s ago] ('pending', 'running', 7, 10)
2026-02-11 00:39:19,766 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:39:19,766 INFO sqlalchemy.engine.Engine [cached since 978s ago] (7,)
2026-02-11 00:39:19,770 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:39:19,770 INFO sqlalchemy.engine.Engine [cached since 978.1s ago] (7,)
2026-02-11 00:39:19,771 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:39:19,771 INFO sqlalchemy.engine.Engine [cached since 978s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 39, 19, 716198, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:39:19,775 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:39:19,775 INFO sqlalchemy.engine.Engine [cached since 978s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 39, 19, 719370, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 7)
2026-02-11 00:39:19,777 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:39:19,777 INFO sqlalchemy.engine.Engine [cached since 978s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 39, 19, 776412, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:39:19,781 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:39:19,781 INFO sqlalchemy.engine.Engine [cached since 978s ago] (7, 'active', datetime.datetime(2026, 2, 11, 0, 39, 19, 780514, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51635 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
2026-02-11 00:39:19,785 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 200
INFO:     127.0.0.1:51632 - "GET /api/v1/dashboard/stats HTTP/1.1" 200 OK
2026-02-11 00:39:19,787 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:51632 - "OPTIONS /api/v1/tickets HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:51632 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:51632 - "OPTIONS /api/v1/tickets/ HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 00:39:21,307 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:39:21,308 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:39:21,308 INFO sqlalchemy.engine.Engine [cached since 979.7s ago] ('gurinonyoman',)
2026-02-11 00:39:21,353 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:39:21,358 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets 
WHERE tickets.user_id = %s ORDER BY tickets.updated_at DESC
2026-02-11 00:39:21,358 INFO sqlalchemy.engine.Engine [generated in 0.00057s] (7,)
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:51632 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 00:39:21,368 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:39:21,379 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:51694 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 00:39:36,247 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:39:36,248 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:39:36,248 INFO sqlalchemy.engine.Engine [cached since 994.6s ago] ('gurinonyoman',)
2026-02-11 00:39:36,297 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:39:36,298 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets 
WHERE tickets.user_id = %s ORDER BY tickets.updated_at DESC
2026-02-11 00:39:36,298 INFO sqlalchemy.engine.Engine [cached since 14.94s ago] (7,)
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:51694 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 00:39:36,307 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:39:36,319 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:51736 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 00:39:51,242 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:39:51,244 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:39:51,244 INFO sqlalchemy.engine.Engine [cached since 1010s ago] ('gurinonyoman',)
2026-02-11 00:39:51,289 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:39:51,289 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets 
WHERE tickets.user_id = %s ORDER BY tickets.updated_at DESC
2026-02-11 00:39:51,289 INFO sqlalchemy.engine.Engine [cached since 29.93s ago] (7,)
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:51736 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 00:39:51,296 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:39:51,306 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:51779 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 00:40:06,251 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:40:06,252 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:40:06,253 INFO sqlalchemy.engine.Engine [cached since 1025s ago] ('gurinonyoman',)
2026-02-11 00:40:06,309 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:40:06,310 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets 
WHERE tickets.user_id = %s ORDER BY tickets.updated_at DESC
2026-02-11 00:40:06,310 INFO sqlalchemy.engine.Engine [cached since 44.95s ago] (7,)
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:51779 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 00:40:06,320 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:40:06,332 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:51805 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 00:40:21,244 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:40:21,245 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:40:21,245 INFO sqlalchemy.engine.Engine [cached since 1040s ago] ('gurinonyoman',)
2026-02-11 00:40:21,296 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:40:21,298 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets 
WHERE tickets.user_id = %s ORDER BY tickets.updated_at DESC
2026-02-11 00:40:21,298 INFO sqlalchemy.engine.Engine [cached since 59.94s ago] (7,)
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:51805 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 00:40:21,307 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:40:21,318 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:51843 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 00:40:36,251 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:40:36,252 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:40:36,253 INFO sqlalchemy.engine.Engine [cached since 1055s ago] ('gurinonyoman',)
2026-02-11 00:40:36,300 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:40:36,301 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets 
WHERE tickets.user_id = %s ORDER BY tickets.updated_at DESC
2026-02-11 00:40:36,301 INFO sqlalchemy.engine.Engine [cached since 74.94s ago] (7,)
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:51843 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 00:40:36,310 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:40:36,322 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:51897 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 00:40:51,245 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:40:51,246 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:40:51,246 INFO sqlalchemy.engine.Engine [cached since 1070s ago] ('gurinonyoman',)
2026-02-11 00:40:51,296 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:40:51,297 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets 
WHERE tickets.user_id = %s ORDER BY tickets.updated_at DESC
2026-02-11 00:40:51,297 INFO sqlalchemy.engine.Engine [cached since 89.94s ago] (7,)
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:51897 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 00:40:51,305 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:40:51,316 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:51922 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 00:41:06,246 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:41:06,247 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:41:06,247 INFO sqlalchemy.engine.Engine [cached since 1085s ago] ('gurinonyoman',)
2026-02-11 00:41:06,293 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:41:06,294 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets 
WHERE tickets.user_id = %s ORDER BY tickets.updated_at DESC
2026-02-11 00:41:06,294 INFO sqlalchemy.engine.Engine [cached since 104.9s ago] (7,)
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:51922 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 00:41:06,303 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:41:06,313 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:51948 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 00:41:21,250 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:41:21,251 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:41:21,251 INFO sqlalchemy.engine.Engine [cached since 1100s ago] ('gurinonyoman',)
2026-02-11 00:41:21,306 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:41:21,307 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets 
WHERE tickets.user_id = %s ORDER BY tickets.updated_at DESC
2026-02-11 00:41:21,307 INFO sqlalchemy.engine.Engine [cached since 119.9s ago] (7,)
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:51948 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 00:41:21,315 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:41:21,328 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:51986 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 00:41:36,246 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:41:36,247 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:41:36,247 INFO sqlalchemy.engine.Engine [cached since 1115s ago] ('gurinonyoman',)
2026-02-11 00:41:36,296 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:41:36,297 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets 
WHERE tickets.user_id = %s ORDER BY tickets.updated_at DESC
2026-02-11 00:41:36,297 INFO sqlalchemy.engine.Engine [cached since 134.9s ago] (7,)
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:51986 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 00:41:36,307 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:41:36,319 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:52015 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 00:41:51,252 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:41:51,253 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:41:51,253 INFO sqlalchemy.engine.Engine [cached since 1130s ago] ('gurinonyoman',)
2026-02-11 00:41:51,305 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:41:51,306 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets 
WHERE tickets.user_id = %s ORDER BY tickets.updated_at DESC
2026-02-11 00:41:51,306 INFO sqlalchemy.engine.Engine [cached since 149.9s ago] (7,)
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:52015 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 00:41:51,315 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:41:51,327 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:52038 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 00:42:06,251 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:42:06,252 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:42:06,253 INFO sqlalchemy.engine.Engine [cached since 1145s ago] ('gurinonyoman',)
2026-02-11 00:42:06,302 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:42:06,303 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets 
WHERE tickets.user_id = %s ORDER BY tickets.updated_at DESC
2026-02-11 00:42:06,303 INFO sqlalchemy.engine.Engine [cached since 164.9s ago] (7,)
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:52038 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 00:42:06,310 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:42:06,323 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: POST /api/v1/accounts/auth/login
2026-02-11 00:42:49,369 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:42:49,371 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:42:49,371 INFO sqlalchemy.engine.Engine [cached since 1188s ago] ('Bagong99',)
2026-02-11 00:42:49,395 INFO sqlalchemy.engine.Engine UPDATE users SET last_jti=%s WHERE users.id = %s
2026-02-11 00:42:49,396 INFO sqlalchemy.engine.Engine [cached since 1188s ago] ('c0577264-0ea4-4933-ab72-479cdd06fa4d', 2)
2026-02-11 00:42:49,402 INFO sqlalchemy.engine.Engine COMMIT
âœ… Response: POST /api/v1/accounts/auth/login -> 200
INFO:     127.0.0.1:52130 - "POST /api/v1/accounts/auth/login HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:42:49,468 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:42:49,469 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:42:49,469 INFO sqlalchemy.engine.Engine [cached since 1188s ago] ('Bagong99',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:52130 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:42:49,477 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:42:49,525 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:42:49,526 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:42:49,526 INFO sqlalchemy.engine.Engine [cached since 1188s ago] ('Bagong99',)
2026-02-11 00:42:49,534 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:42:49,534 INFO sqlalchemy.engine.Engine [cached since 1188s ago] (2,)
2026-02-11 00:42:49,540 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:42:49,540 INFO sqlalchemy.engine.Engine [cached since 1188s ago] ('active', 2)
2026-02-11 00:42:49,547 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:42:49,547 INFO sqlalchemy.engine.Engine [cached since 1188s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:42:49,553 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:42:49,554 INFO sqlalchemy.engine.Engine [cached since 1188s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 42, 49, 532941, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:42:49,560 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:42:49,560 INFO sqlalchemy.engine.Engine [cached since 1188s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 42, 49, 532941, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:42:49,565 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:42:49,565 INFO sqlalchemy.engine.Engine [cached since 1188s ago] (2,)
2026-02-11 00:42:49,571 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:42:49,571 INFO sqlalchemy.engine.Engine [cached since 1188s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 42, 49, 532941, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:42:49,578 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:42:49,578 INFO sqlalchemy.engine.Engine [cached since 1188s ago] ('pending', 'running', 2, 10)
2026-02-11 00:42:49,586 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:42:49,586 INFO sqlalchemy.engine.Engine [cached since 1188s ago] (2,)
2026-02-11 00:42:49,595 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:42:49,595 INFO sqlalchemy.engine.Engine [cached since 1188s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 42, 49, 532941, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:42:49,604 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:42:49,604 INFO sqlalchemy.engine.Engine [cached since 1188s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 42, 49, 602671, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:42:49,614 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:42:49,614 INFO sqlalchemy.engine.Engine [generated in 0.00033s] ('supreme',)
2026-02-11 00:42:49,625 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:42:49,625 INFO sqlalchemy.engine.Engine [generated in 0.00053s] (2,)
2026-02-11 00:42:49,632 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52130 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:52138 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 00:42:49,729 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:42:49,730 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:42:49,730 INFO sqlalchemy.engine.Engine [cached since 1188s ago] ('Bagong99',)
2026-02-11 00:42:49,732 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:42:49,733 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:42:49,733 INFO sqlalchemy.engine.Engine [cached since 1188s ago] ('Bagong99',)
2026-02-11 00:42:49,735 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:42:49,735 INFO sqlalchemy.engine.Engine [cached since 1188s ago] (2,)
2026-02-11 00:42:49,741 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:42:49,742 INFO sqlalchemy.engine.Engine [cached since 1188s ago] ('active', 2)
2026-02-11 00:42:49,748 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:42:49,748 INFO sqlalchemy.engine.Engine [cached since 1188s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:42:49,757 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:42:49,757 INFO sqlalchemy.engine.Engine [cached since 1188s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 42, 49, 734920, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:42:49,763 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:42:49,763 INFO sqlalchemy.engine.Engine [cached since 1188s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 42, 49, 734920, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:42:49,770 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:42:49,770 INFO sqlalchemy.engine.Engine [cached since 1188s ago] (2,)
2026-02-11 00:42:49,775 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:42:49,776 INFO sqlalchemy.engine.Engine [cached since 1188s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 42, 49, 734920, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:42:49,776 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:42:49,776 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets 
WHERE tickets.user_id = %s ORDER BY tickets.updated_at DESC
2026-02-11 00:42:49,776 INFO sqlalchemy.engine.Engine [cached since 208.4s ago] (2,)
2026-02-11 00:42:49,782 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:42:49,782 INFO sqlalchemy.engine.Engine [cached since 1188s ago] ('pending', 'running', 2, 10)
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:52138 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 00:42:49,784 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:42:49,789 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:42:49,790 INFO sqlalchemy.engine.Engine [cached since 1188s ago] (2,)
2026-02-11 00:42:49,798 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:42:49,799 INFO sqlalchemy.engine.Engine [cached since 1188s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 42, 49, 734920, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:42:49,799 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:42:49,807 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:42:49,808 INFO sqlalchemy.engine.Engine [cached since 1188s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 42, 49, 806649, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:42:49,817 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:42:49,817 INFO sqlalchemy.engine.Engine [cached since 0.2037s ago] ('supreme',)
2026-02-11 00:42:49,825 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:42:49,825 INFO sqlalchemy.engine.Engine [cached since 0.1999s ago] (2,)
2026-02-11 00:42:49,831 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52137 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:42:53,856 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:42:53,857 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:42:53,858 INFO sqlalchemy.engine.Engine [cached since 1192s ago] ('Bagong99',)
2026-02-11 00:42:53,864 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:42:53,864 INFO sqlalchemy.engine.Engine [cached since 1192s ago] (2,)
2026-02-11 00:42:53,871 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:42:53,871 INFO sqlalchemy.engine.Engine [cached since 1192s ago] ('active', 2)
2026-02-11 00:42:53,878 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:42:53,879 INFO sqlalchemy.engine.Engine [cached since 1192s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:42:53,884 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:42:53,884 INFO sqlalchemy.engine.Engine [cached since 1192s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 42, 53, 863671, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:42:53,895 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:42:53,895 INFO sqlalchemy.engine.Engine [cached since 1192s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 42, 53, 863671, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:42:53,900 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:42:53,900 INFO sqlalchemy.engine.Engine [cached since 1192s ago] (2,)
2026-02-11 00:42:53,905 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:42:53,905 INFO sqlalchemy.engine.Engine [cached since 1192s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 42, 53, 863671, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:42:53,912 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:42:53,912 INFO sqlalchemy.engine.Engine [cached since 1192s ago] ('pending', 'running', 2, 10)
2026-02-11 00:42:53,920 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:42:53,920 INFO sqlalchemy.engine.Engine [cached since 1192s ago] (2,)
2026-02-11 00:42:53,926 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:42:53,926 INFO sqlalchemy.engine.Engine [cached since 1192s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 42, 53, 863671, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:42:53,935 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:42:53,936 INFO sqlalchemy.engine.Engine [cached since 1192s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 42, 53, 934207, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:42:53,944 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:42:53,944 INFO sqlalchemy.engine.Engine [cached since 4.33s ago] ('supreme',)
2026-02-11 00:42:53,959 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:42:53,959 INFO sqlalchemy.engine.Engine [cached since 4.334s ago] (2,)
2026-02-11 00:42:53,973 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52138 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:43:01,534 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:01,535 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:01,535 INFO sqlalchemy.engine.Engine [cached since 1200s ago] ('Bagong99',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:52184 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:43:01,541 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:01,623 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:01,623 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:01,623 INFO sqlalchemy.engine.Engine [cached since 1200s ago] ('Bagong99',)
2026-02-11 00:43:01,624 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:01,624 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:01,624 INFO sqlalchemy.engine.Engine [cached since 1200s ago] ('Bagong99',)
2026-02-11 00:43:01,633 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:01,633 INFO sqlalchemy.engine.Engine [cached since 1200s ago] (2,)
2026-02-11 00:43:01,634 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:01,634 INFO sqlalchemy.engine.Engine [cached since 1200s ago] (2,)
2026-02-11 00:43:01,638 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:01,638 INFO sqlalchemy.engine.Engine [cached since 1200s ago] ('active', 2)
2026-02-11 00:43:01,639 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:01,639 INFO sqlalchemy.engine.Engine [cached since 1200s ago] ('active', 2)
2026-02-11 00:43:01,645 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:01,645 INFO sqlalchemy.engine.Engine [cached since 1200s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:01,647 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:01,648 INFO sqlalchemy.engine.Engine [cached since 1200s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:01,653 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:01,654 INFO sqlalchemy.engine.Engine [cached since 1200s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 1, 632567, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:01,655 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:01,656 INFO sqlalchemy.engine.Engine [cached since 1200s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 1, 634062, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:01,659 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:01,660 INFO sqlalchemy.engine.Engine [cached since 1200s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 1, 632567, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:01,661 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:01,661 INFO sqlalchemy.engine.Engine [cached since 1200s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 1, 634062, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:01,665 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:01,665 INFO sqlalchemy.engine.Engine [cached since 1200s ago] (2,)
2026-02-11 00:43:01,666 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:01,666 INFO sqlalchemy.engine.Engine [cached since 1200s ago] (2,)
2026-02-11 00:43:01,671 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:01,671 INFO sqlalchemy.engine.Engine [cached since 1200s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 1, 632567, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:01,672 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:01,672 INFO sqlalchemy.engine.Engine [cached since 1200s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 1, 634062, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:01,676 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:01,677 INFO sqlalchemy.engine.Engine [cached since 1200s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:01,679 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:01,680 INFO sqlalchemy.engine.Engine [cached since 1200s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:01,682 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:01,682 INFO sqlalchemy.engine.Engine [cached since 1200s ago] (2,)
2026-02-11 00:43:01,684 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:01,684 INFO sqlalchemy.engine.Engine [cached since 1200s ago] (2,)
2026-02-11 00:43:01,686 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:01,686 INFO sqlalchemy.engine.Engine [cached since 1200s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 1, 632567, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:01,688 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:01,688 INFO sqlalchemy.engine.Engine [cached since 1200s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 1, 634062, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:01,693 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:01,693 INFO sqlalchemy.engine.Engine [cached since 1200s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 1, 693057, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:01,695 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:01,695 INFO sqlalchemy.engine.Engine [cached since 1200s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 1, 694823, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:01,700 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:01,700 INFO sqlalchemy.engine.Engine [cached since 12.09s ago] ('supreme',)
2026-02-11 00:43:01,701 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:01,701 INFO sqlalchemy.engine.Engine [cached since 12.09s ago] ('supreme',)
2026-02-11 00:43:01,707 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:01,707 INFO sqlalchemy.engine.Engine [cached since 12.08s ago] (2,)
2026-02-11 00:43:01,708 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:01,708 INFO sqlalchemy.engine.Engine [cached since 12.08s ago] (2,)
2026-02-11 00:43:01,712 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:01,714 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52187 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:52184 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:43:02,181 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:02,182 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:02,182 INFO sqlalchemy.engine.Engine [cached since 1201s ago] ('Bagong99',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:52193 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:43:02,189 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:02,235 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:02,236 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:02,236 INFO sqlalchemy.engine.Engine [cached since 1201s ago] ('Bagong99',)
2026-02-11 00:43:02,239 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:02,240 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:02,240 INFO sqlalchemy.engine.Engine [cached since 1201s ago] ('Bagong99',)
2026-02-11 00:43:02,241 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:02,241 INFO sqlalchemy.engine.Engine [cached since 1201s ago] (2,)
2026-02-11 00:43:02,247 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:02,247 INFO sqlalchemy.engine.Engine [cached since 1201s ago] (2,)
2026-02-11 00:43:02,249 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:02,250 INFO sqlalchemy.engine.Engine [cached since 1201s ago] ('active', 2)
2026-02-11 00:43:02,253 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:02,253 INFO sqlalchemy.engine.Engine [cached since 1201s ago] ('active', 2)
2026-02-11 00:43:02,256 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:02,256 INFO sqlalchemy.engine.Engine [cached since 1201s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:02,259 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:02,260 INFO sqlalchemy.engine.Engine [cached since 1201s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:02,262 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:02,262 INFO sqlalchemy.engine.Engine [cached since 1201s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 2, 241050, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:02,266 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:02,266 INFO sqlalchemy.engine.Engine [cached since 1201s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 2, 246455, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:02,267 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:02,267 INFO sqlalchemy.engine.Engine [cached since 1201s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 2, 241050, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:02,272 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:02,272 INFO sqlalchemy.engine.Engine [cached since 1201s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 2, 246455, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:02,273 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:02,273 INFO sqlalchemy.engine.Engine [cached since 1201s ago] (2,)
2026-02-11 00:43:02,279 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:02,279 INFO sqlalchemy.engine.Engine [cached since 1201s ago] (2,)
2026-02-11 00:43:02,282 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:02,282 INFO sqlalchemy.engine.Engine [cached since 1201s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 2, 241050, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:02,287 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:02,287 INFO sqlalchemy.engine.Engine [cached since 1201s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 2, 246455, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:02,289 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:02,289 INFO sqlalchemy.engine.Engine [cached since 1201s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:02,295 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:02,295 INFO sqlalchemy.engine.Engine [cached since 1201s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:02,297 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:02,297 INFO sqlalchemy.engine.Engine [cached since 1201s ago] (2,)
2026-02-11 00:43:02,302 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:02,302 INFO sqlalchemy.engine.Engine [cached since 1201s ago] (2,)
2026-02-11 00:43:02,306 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:02,306 INFO sqlalchemy.engine.Engine [cached since 1201s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 2, 241050, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:02,308 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:02,309 INFO sqlalchemy.engine.Engine [cached since 1201s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 2, 246455, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:02,312 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:02,312 INFO sqlalchemy.engine.Engine [cached since 1201s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 2, 311614, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:02,315 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:02,316 INFO sqlalchemy.engine.Engine [cached since 1201s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 2, 315018, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:02,317 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:02,317 INFO sqlalchemy.engine.Engine [cached since 12.7s ago] ('supreme',)
2026-02-11 00:43:02,322 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:02,322 INFO sqlalchemy.engine.Engine [cached since 12.71s ago] ('supreme',)
2026-02-11 00:43:02,328 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:02,328 INFO sqlalchemy.engine.Engine [cached since 12.7s ago] (2,)
2026-02-11 00:43:02,330 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:02,330 INFO sqlalchemy.engine.Engine [cached since 12.71s ago] (2,)
2026-02-11 00:43:02,334 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:02,335 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52193 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:52196 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:12,249 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:12,251 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:12,252 INFO sqlalchemy.engine.Engine [cached since 1211s ago] ('Bagong99',)
2026-02-11 00:43:12,268 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:12,268 INFO sqlalchemy.engine.Engine [cached since 1211s ago] (2,)
2026-02-11 00:43:12,275 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:12,275 INFO sqlalchemy.engine.Engine [cached since 1211s ago] ('active', 2)
2026-02-11 00:43:12,282 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:12,282 INFO sqlalchemy.engine.Engine [cached since 1211s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:12,289 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:12,289 INFO sqlalchemy.engine.Engine [cached since 1211s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 12, 267074, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:12,297 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:12,297 INFO sqlalchemy.engine.Engine [cached since 1211s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 12, 267074, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:12,304 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:12,304 INFO sqlalchemy.engine.Engine [cached since 1211s ago] (2,)
2026-02-11 00:43:12,310 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:12,310 INFO sqlalchemy.engine.Engine [cached since 1211s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 12, 267074, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:12,317 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:12,317 INFO sqlalchemy.engine.Engine [cached since 1211s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:12,325 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:12,326 INFO sqlalchemy.engine.Engine [cached since 1211s ago] (2,)
2026-02-11 00:43:12,333 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:12,333 INFO sqlalchemy.engine.Engine [cached since 1211s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 12, 267074, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:12,341 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:12,341 INFO sqlalchemy.engine.Engine [cached since 1211s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 12, 340247, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:12,348 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:12,349 INFO sqlalchemy.engine.Engine [cached since 22.74s ago] ('supreme',)
2026-02-11 00:43:12,357 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:12,357 INFO sqlalchemy.engine.Engine [cached since 22.73s ago] (2,)
2026-02-11 00:43:12,363 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52219 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:52236 - "OPTIONS /api/v1/accounts/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:52237 - "OPTIONS /api/v1/tasks/stats/actions-by-account HTTP/1.1" 200 OK
INFO:     127.0.0.1:52238 - "OPTIONS /api/v1/accounts/bulk/active HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/
ðŸ” Incoming: GET /api/v1/tasks/stats/actions-by-account
ðŸ” Incoming: GET /api/v1/accounts/bulk/active
2026-02-11 00:43:20,372 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:20,373 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:20,374 INFO sqlalchemy.engine.Engine [cached since 1219s ago] ('Bagong99',)
2026-02-11 00:43:20,374 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:20,375 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:20,375 INFO sqlalchemy.engine.Engine [cached since 1219s ago] ('Bagong99',)
2026-02-11 00:43:20,375 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:20,376 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:20,376 INFO sqlalchemy.engine.Engine [cached since 1219s ago] ('Bagong99',)
2026-02-11 00:43:20,384 INFO sqlalchemy.engine.Engine SELECT accounts.id, accounts.username, accounts.password_encrypted, accounts.seed_2fa, accounts.proxy, accounts.login_method, accounts.cookies, accounts.last_login_state, accounts.fingerprint_id, accounts.is_active, accounts.is_checker, accounts.status, accounts.last_error, accounts.threads_profile_id, accounts.has_threads, accounts.user_id, accounts.created_at, accounts.last_login 
FROM accounts 
WHERE accounts.user_id = %s ORDER BY accounts.created_at DESC 
 LIMIT %s, %s
2026-02-11 00:43:20,384 INFO sqlalchemy.engine.Engine [generated in 0.00046s] (2, 0, 100)
2026-02-11 00:43:20,388 INFO sqlalchemy.engine.Engine SELECT tasks.account_id, tasks.task_type, count(tasks.id) AS count 
FROM tasks 
WHERE tasks.status = %s AND tasks.user_id = %s GROUP BY tasks.account_id, tasks.task_type
2026-02-11 00:43:20,388 INFO sqlalchemy.engine.Engine [generated in 0.00035s] ('completed', 2)
âœ… Response: GET /api/v1/accounts/bulk/active -> 200
INFO:     127.0.0.1:52238 - "GET /api/v1/accounts/bulk/active HTTP/1.1" 200 OK
2026-02-11 00:43:20,389 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/tasks/stats/actions-by-account -> 200
INFO:     127.0.0.1:52236 - "GET /api/v1/tasks/stats/actions-by-account HTTP/1.1" 200 OK
2026-02-11 00:43:20,394 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/accounts/ -> 200
INFO:     127.0.0.1:52237 - "GET /api/v1/accounts/ HTTP/1.1" 200 OK
2026-02-11 00:43:20,414 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52237 - "OPTIONS /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:22,130 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:22,131 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:22,131 INFO sqlalchemy.engine.Engine [cached since 1221s ago] ('Bagong99',)
2026-02-11 00:43:22,137 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:22,137 INFO sqlalchemy.engine.Engine [cached since 1220s ago] (2,)
2026-02-11 00:43:22,143 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:22,143 INFO sqlalchemy.engine.Engine [cached since 1220s ago] ('active', 2)
2026-02-11 00:43:22,148 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:22,148 INFO sqlalchemy.engine.Engine [cached since 1220s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:22,153 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:22,153 INFO sqlalchemy.engine.Engine [cached since 1220s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 22, 136901, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:22,159 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:22,160 INFO sqlalchemy.engine.Engine [cached since 1220s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 22, 136901, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:22,166 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:22,167 INFO sqlalchemy.engine.Engine [cached since 1220s ago] (2,)
2026-02-11 00:43:22,171 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:22,171 INFO sqlalchemy.engine.Engine [cached since 1220s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 22, 136901, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:22,178 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:22,178 INFO sqlalchemy.engine.Engine [cached since 1220s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:22,185 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:22,185 INFO sqlalchemy.engine.Engine [cached since 1220s ago] (2,)
2026-02-11 00:43:22,192 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:22,192 INFO sqlalchemy.engine.Engine [cached since 1220s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 22, 136901, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:22,203 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:22,203 INFO sqlalchemy.engine.Engine [cached since 1220s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 22, 202648, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:22,211 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:22,211 INFO sqlalchemy.engine.Engine [cached since 32.6s ago] ('supreme',)
2026-02-11 00:43:22,218 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:22,218 INFO sqlalchemy.engine.Engine [cached since 32.59s ago] (2,)
2026-02-11 00:43:22,224 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52237 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:43:27,377 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:27,378 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:27,378 INFO sqlalchemy.engine.Engine [cached since 1226s ago] ('Bagong99',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:52259 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:43:27,386 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:27,432 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:27,432 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:27,432 INFO sqlalchemy.engine.Engine [cached since 1226s ago] ('Bagong99',)
2026-02-11 00:43:27,434 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:27,435 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:27,435 INFO sqlalchemy.engine.Engine [cached since 1226s ago] ('Bagong99',)
2026-02-11 00:43:27,438 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:27,438 INFO sqlalchemy.engine.Engine [cached since 1226s ago] (2,)
2026-02-11 00:43:27,439 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:27,440 INFO sqlalchemy.engine.Engine [cached since 1226s ago] (2,)
2026-02-11 00:43:27,444 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:27,444 INFO sqlalchemy.engine.Engine [cached since 1226s ago] ('active', 2)
2026-02-11 00:43:27,445 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:27,446 INFO sqlalchemy.engine.Engine [cached since 1226s ago] ('active', 2)
2026-02-11 00:43:27,452 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:27,452 INFO sqlalchemy.engine.Engine [cached since 1226s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:27,453 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:27,453 INFO sqlalchemy.engine.Engine [cached since 1226s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:27,461 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:27,461 INFO sqlalchemy.engine.Engine [cached since 1226s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 27, 437599, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:27,462 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:27,463 INFO sqlalchemy.engine.Engine [cached since 1226s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 27, 439613, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:27,466 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:27,467 INFO sqlalchemy.engine.Engine [cached since 1226s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 27, 437599, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:27,467 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:27,467 INFO sqlalchemy.engine.Engine [cached since 1226s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 27, 439613, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:27,472 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:27,472 INFO sqlalchemy.engine.Engine [cached since 1226s ago] (2,)
2026-02-11 00:43:27,474 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:27,474 INFO sqlalchemy.engine.Engine [cached since 1226s ago] (2,)
2026-02-11 00:43:27,479 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:27,479 INFO sqlalchemy.engine.Engine [cached since 1226s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 27, 437599, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:27,480 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:27,480 INFO sqlalchemy.engine.Engine [cached since 1226s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 27, 439613, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:27,486 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:27,486 INFO sqlalchemy.engine.Engine [cached since 1226s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:27,487 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:27,487 INFO sqlalchemy.engine.Engine [cached since 1226s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:27,495 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:27,495 INFO sqlalchemy.engine.Engine [cached since 1226s ago] (2,)
2026-02-11 00:43:27,502 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:27,503 INFO sqlalchemy.engine.Engine [cached since 1226s ago] (2,)
2026-02-11 00:43:27,504 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:27,505 INFO sqlalchemy.engine.Engine [cached since 1226s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 27, 437599, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:27,508 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:27,508 INFO sqlalchemy.engine.Engine [cached since 1226s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 27, 439613, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:27,511 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:27,511 INFO sqlalchemy.engine.Engine [cached since 1226s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 27, 510263, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:27,513 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:27,513 INFO sqlalchemy.engine.Engine [cached since 1226s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 27, 512551, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:27,518 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:27,518 INFO sqlalchemy.engine.Engine [cached since 37.9s ago] ('supreme',)
2026-02-11 00:43:27,520 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:27,520 INFO sqlalchemy.engine.Engine [cached since 37.91s ago] ('supreme',)
2026-02-11 00:43:27,524 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:27,524 INFO sqlalchemy.engine.Engine [cached since 37.9s ago] (2,)
2026-02-11 00:43:27,525 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:27,525 INFO sqlalchemy.engine.Engine [cached since 37.9s ago] (2,)
2026-02-11 00:43:27,530 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:27,531 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52259 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:52262 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:43:28,310 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:28,311 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:28,311 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:52269 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:43:28,320 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:28,374 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:28,375 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:28,375 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
2026-02-11 00:43:28,387 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:28,387 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,387 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:28,388 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:28,388 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
2026-02-11 00:43:28,394 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:28,395 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('active', 2)
2026-02-11 00:43:28,397 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:28,397 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:43:28,403 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:28,404 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:28,406 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:28,406 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('active', 2)
2026-02-11 00:43:28,410 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,411 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 386595, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,414 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:28,414 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:28,418 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,418 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 386595, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,421 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,421 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 396808, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,423 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:28,423 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,425 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,426 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 396808, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,429 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:28,430 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 386595, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,431 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:28,431 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,438 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:28,438 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:28,439 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:28,439 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 396808, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,440 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:28,440 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:28,440 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
2026-02-11 00:43:28,445 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:28,445 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,454 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:28,454 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('pending', 'running', 2, 10)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:52277 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:43:28,457 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,457 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 386595, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,457 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:28,461 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:28,461 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:28,469 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:28,469 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 28, 468774, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:28,471 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,471 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 396808, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,476 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:28,476 INFO sqlalchemy.engine.Engine [cached since 38.86s ago] ('supreme',)
2026-02-11 00:43:28,485 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:28,485 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 28, 484394, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:28,487 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:28,487 INFO sqlalchemy.engine.Engine [cached since 38.86s ago] (2,)
2026-02-11 00:43:28,491 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:28,491 INFO sqlalchemy.engine.Engine [cached since 38.88s ago] ('supreme',)
2026-02-11 00:43:28,492 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:28,496 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:28,497 INFO sqlalchemy.engine.Engine [cached since 38.87s ago] (2,)
2026-02-11 00:43:28,503 INFO sqlalchemy.engine.Engine ROLLBACK
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
2026-02-11 00:43:28,523 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:28,523 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:28,523 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
2026-02-11 00:43:28,524 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:28,524 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:28,524 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:43:28,530 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:28,530 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,532 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:28,532 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,536 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:28,536 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('active', 2)
2026-02-11 00:43:28,538 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:28,538 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('active', 2)
2026-02-11 00:43:28,541 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:28,541 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:28,543 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:28,543 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:28,546 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,546 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 529628, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,548 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,549 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 532084, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,550 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,550 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 529628, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,553 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,554 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 532084, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,555 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:28,556 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,561 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:28,561 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,563 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:28,563 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 529628, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,565 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:28,566 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 532084, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,567 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:28,567 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:28,569 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:28,569 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:28,569 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
2026-02-11 00:43:28,572 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:28,573 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:28,575 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:28,576 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:52285 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:43:28,579 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:28,579 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,579 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:28,580 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,581 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 529628, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,585 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,585 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 532084, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,587 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:28,587 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 28, 587234, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:28,595 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:28,595 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 28, 594584, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:28,596 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:28,597 INFO sqlalchemy.engine.Engine [cached since 38.98s ago] ('supreme',)
2026-02-11 00:43:28,600 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:28,600 INFO sqlalchemy.engine.Engine [cached since 38.99s ago] ('supreme',)
2026-02-11 00:43:28,604 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:28,604 INFO sqlalchemy.engine.Engine [cached since 38.98s ago] (2,)
2026-02-11 00:43:28,606 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:28,606 INFO sqlalchemy.engine.Engine [cached since 38.98s ago] (2,)
2026-02-11 00:43:28,612 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:28,613 INFO sqlalchemy.engine.Engine ROLLBACK
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
2026-02-11 00:43:28,633 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:28,633 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:28,633 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
2026-02-11 00:43:28,640 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:28,640 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,640 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:28,640 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:28,640 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
2026-02-11 00:43:28,644 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:28,644 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('active', 2)
2026-02-11 00:43:28,647 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:28,647 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,649 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:28,649 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:28,651 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:28,651 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('active', 2)
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:43:28,657 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,657 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 639419, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,658 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:28,658 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:28,663 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,663 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 639419, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,664 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,665 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 647054, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,667 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:28,667 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,671 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,671 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 647054, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,672 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:28,673 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 639419, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,679 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:28,679 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,680 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:28,681 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:28,684 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:28,684 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 647054, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,692 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:28,693 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,695 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:28,695 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:28,699 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,699 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 639419, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,704 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:28,704 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,705 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:28,705 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 28, 705296, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:28,706 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:28,706 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:28,706 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
2026-02-11 00:43:28,709 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,709 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 647054, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,710 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:28,710 INFO sqlalchemy.engine.Engine [cached since 39.1s ago] ('supreme',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:52293 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:43:28,714 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:28,717 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:28,717 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 28, 716580, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:28,719 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:28,719 INFO sqlalchemy.engine.Engine [cached since 39.09s ago] (2,)
2026-02-11 00:43:28,721 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:28,722 INFO sqlalchemy.engine.Engine [cached since 39.11s ago] ('supreme',)
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:28,728 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:28,729 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:28,729 INFO sqlalchemy.engine.Engine [cached since 39.1s ago] (2,)
2026-02-11 00:43:28,742 INFO sqlalchemy.engine.Engine ROLLBACK
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
2026-02-11 00:43:28,768 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:28,769 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:28,769 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
2026-02-11 00:43:28,771 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:28,771 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:28,771 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
2026-02-11 00:43:28,781 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:28,781 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,782 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:28,782 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:43:28,788 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:28,789 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('active', 2)
2026-02-11 00:43:28,790 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:28,790 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('active', 2)
2026-02-11 00:43:28,794 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:28,794 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:28,795 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:28,795 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:28,798 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,798 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 781116, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,801 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,801 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 782419, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,802 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,802 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 781116, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,805 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,805 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 782419, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,813 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:28,813 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,817 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:28,817 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,819 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:28,819 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 781116, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,821 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:28,821 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 782419, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,826 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:28,826 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:28,826 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:28,827 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:28,836 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:28,836 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,837 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:28,837 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:28,837 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
2026-02-11 00:43:28,839 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:28,840 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,849 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,849 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 781116, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,853 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,853 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 782419, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:52301 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:43:28,856 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:28,864 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:28,864 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 28, 863541, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:28,865 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:28,866 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 28, 865292, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:28,871 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:28,871 INFO sqlalchemy.engine.Engine [cached since 39.26s ago] ('supreme',)
2026-02-11 00:43:28,879 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:28,879 INFO sqlalchemy.engine.Engine [cached since 39.27s ago] ('supreme',)
2026-02-11 00:43:28,880 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:28,880 INFO sqlalchemy.engine.Engine [cached since 39.26s ago] (2,)
2026-02-11 00:43:28,887 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:28,887 INFO sqlalchemy.engine.Engine [cached since 39.26s ago] (2,)
2026-02-11 00:43:28,888 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:28,893 INFO sqlalchemy.engine.Engine ROLLBACK
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
2026-02-11 00:43:28,915 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:28,915 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:28,915 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
2026-02-11 00:43:28,915 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:28,915 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:28,915 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:43:28,922 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:28,923 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,924 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:28,924 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,928 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:28,928 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('active', 2)
2026-02-11 00:43:28,929 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:28,929 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('active', 2)
2026-02-11 00:43:28,933 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:28,933 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:28,934 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:28,934 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:28,937 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,937 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 921723, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,939 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,939 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 923823, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,941 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,941 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 921723, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,945 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,945 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 923823, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,946 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:28,946 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,950 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:28,953 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,955 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:28,956 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 921723, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,959 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:28,959 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 923823, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,962 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:28,962 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:28,962 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:28,962 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:28,962 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
2026-02-11 00:43:28,965 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:28,966 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:28,980 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:28,980 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:28,984 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:28,984 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:52309 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:43:28,986 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,986 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 921723, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,987 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:28,991 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:28,991 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 28, 923823, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:28,993 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:28,993 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 28, 992793, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:28,999 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:28,999 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 28, 998712, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:29,001 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:29,001 INFO sqlalchemy.engine.Engine [cached since 39.39s ago] ('supreme',)
2026-02-11 00:43:29,004 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:29,004 INFO sqlalchemy.engine.Engine [cached since 39.39s ago] ('supreme',)
2026-02-11 00:43:29,006 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:29,006 INFO sqlalchemy.engine.Engine [cached since 39.38s ago] (2,)
2026-02-11 00:43:29,009 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:29,009 INFO sqlalchemy.engine.Engine [cached since 39.38s ago] (2,)
2026-02-11 00:43:29,010 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:29,012 INFO sqlalchemy.engine.Engine ROLLBACK
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
2026-02-11 00:43:29,041 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:29,041 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:29,041 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
2026-02-11 00:43:29,046 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:29,047 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:29,047 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('Bagong99',)
2026-02-11 00:43:29,049 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:29,049 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:29,052 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:29,053 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:29,054 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:29,054 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('active', 2)
2026-02-11 00:43:29,056 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:29,056 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('active', 2)
2026-02-11 00:43:29,059 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:29,059 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:29,061 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:29,061 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:29,062 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,063 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 48958, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,064 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,064 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 52498, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,067 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,067 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 48958, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,069 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,069 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 52498, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,071 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:29,072 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:29,077 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:29,077 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:29,081 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:29,081 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 48958, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,083 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:29,083 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 52498, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,088 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:29,088 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:29,090 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:29,091 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:29,097 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:29,097 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:29,100 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:29,100 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2,)
2026-02-11 00:43:29,103 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,103 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 48958, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,105 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,105 INFO sqlalchemy.engine.Engine [cached since 1227s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 52498, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,108 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:29,109 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 29, 108380, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:29,111 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:29,111 INFO sqlalchemy.engine.Engine [cached since 1227s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 29, 110826, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:29,113 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:29,113 INFO sqlalchemy.engine.Engine [cached since 39.5s ago] ('supreme',)
2026-02-11 00:43:29,115 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:29,115 INFO sqlalchemy.engine.Engine [cached since 39.5s ago] ('supreme',)
2026-02-11 00:43:29,117 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:29,117 INFO sqlalchemy.engine.Engine [cached since 39.49s ago] (2,)
2026-02-11 00:43:29,120 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:29,120 INFO sqlalchemy.engine.Engine [cached since 39.49s ago] (2,)
2026-02-11 00:43:29,128 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:29,129 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52312 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:52309 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:43:29,279 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:29,280 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:29,280 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('Bagong99',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:52318 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:43:29,288 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:29,339 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:29,340 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:29,340 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('Bagong99',)
2026-02-11 00:43:29,341 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:29,342 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:29,342 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('Bagong99',)
2026-02-11 00:43:29,356 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:29,356 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,357 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:29,358 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,361 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:29,361 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('active', 2)
2026-02-11 00:43:29,364 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:29,364 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('active', 2)
2026-02-11 00:43:29,367 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:29,367 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:29,370 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:29,370 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:29,372 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,372 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 356073, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:43:29,376 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,376 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 357560, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,377 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,377 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 356073, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,382 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,382 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 357560, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,383 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:29,383 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,386 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:29,386 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,388 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:29,388 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 356073, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,390 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:29,390 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 357560, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,393 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:29,393 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:29,395 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:29,395 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:29,401 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:29,401 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,404 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:29,404 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,408 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,408 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 356073, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,410 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,410 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 357560, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,417 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:29,417 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 29, 416642, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:29,419 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:29,420 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 29, 419176, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:29,420 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:29,420 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:29,420 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('Bagong99',)
2026-02-11 00:43:29,424 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:29,424 INFO sqlalchemy.engine.Engine [cached since 39.81s ago] ('supreme',)
2026-02-11 00:43:29,426 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:29,426 INFO sqlalchemy.engine.Engine [cached since 39.81s ago] ('supreme',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:52326 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:43:29,429 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:29,430 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:29,430 INFO sqlalchemy.engine.Engine [cached since 39.81s ago] (2,)
2026-02-11 00:43:29,432 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:29,432 INFO sqlalchemy.engine.Engine [cached since 39.81s ago] (2,)
2026-02-11 00:43:29,434 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:29,435 INFO sqlalchemy.engine.Engine ROLLBACK
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:29,472 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:29,473 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:29,473 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('Bagong99',)
2026-02-11 00:43:29,474 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:29,475 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:29,475 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('Bagong99',)
2026-02-11 00:43:29,478 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:29,478 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,481 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:29,481 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,482 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:29,483 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('active', 2)
2026-02-11 00:43:29,485 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:29,485 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('active', 2)
2026-02-11 00:43:29,487 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:29,487 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:29,489 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:29,490 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:29,492 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,492 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 478098, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,494 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,494 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 480722, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,496 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,496 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 478098, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,498 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,498 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 480722, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,500 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:29,500 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,502 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:29,502 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:43:29,505 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:29,506 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 478098, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,508 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:29,508 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 480722, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,517 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:29,518 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:29,519 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:29,519 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:29,528 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:29,528 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,537 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:29,537 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,539 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,539 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 478098, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,543 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,544 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 480722, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,546 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:29,546 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 29, 545555, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:29,550 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:29,550 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 29, 549705, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:29,552 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:29,552 INFO sqlalchemy.engine.Engine [cached since 39.94s ago] ('supreme',)
2026-02-11 00:43:29,557 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:29,557 INFO sqlalchemy.engine.Engine [cached since 39.94s ago] ('supreme',)
2026-02-11 00:43:29,558 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:29,558 INFO sqlalchemy.engine.Engine [cached since 39.93s ago] (2,)
2026-02-11 00:43:29,559 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:29,559 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:29,559 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('Bagong99',)
2026-02-11 00:43:29,568 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:29,568 INFO sqlalchemy.engine.Engine [cached since 39.94s ago] (2,)
2026-02-11 00:43:29,569 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:52334 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:43:29,571 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:29,573 INFO sqlalchemy.engine.Engine ROLLBACK
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:29,616 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:29,617 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:29,617 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('Bagong99',)
2026-02-11 00:43:29,618 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:29,618 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:29,618 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('Bagong99',)
2026-02-11 00:43:29,622 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:29,622 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,624 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:29,624 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,627 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:29,627 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('active', 2)
2026-02-11 00:43:29,628 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:29,629 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('active', 2)
2026-02-11 00:43:29,632 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:29,632 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:29,633 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:29,634 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('failed', 'challenge', 'banned', 2)
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:43:29,639 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,639 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 621623, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,640 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,640 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 623752, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,643 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,643 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 621623, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,645 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,645 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 623752, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,647 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:29,647 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,649 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:29,649 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,651 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:29,651 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 621623, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,654 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:29,655 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 623752, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,657 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:29,657 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:29,661 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:29,661 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:29,663 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:29,663 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,667 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:29,667 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,668 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,668 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 621623, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,670 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:29,671 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:29,671 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('Bagong99',)
2026-02-11 00:43:29,673 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,673 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 623752, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,677 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:29,677 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 29, 676304, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:29,680 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:29,680 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 29, 679807, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:52342 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:43:29,681 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:29,682 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:29,683 INFO sqlalchemy.engine.Engine [cached since 40.07s ago] ('supreme',)
2026-02-11 00:43:29,687 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:29,687 INFO sqlalchemy.engine.Engine [cached since 40.07s ago] ('supreme',)
2026-02-11 00:43:29,689 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:29,689 INFO sqlalchemy.engine.Engine [cached since 40.06s ago] (2,)
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:29,694 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:29,695 INFO sqlalchemy.engine.Engine [cached since 40.07s ago] (2,)
2026-02-11 00:43:29,696 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:29,699 INFO sqlalchemy.engine.Engine ROLLBACK
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
2026-02-11 00:43:29,730 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:29,731 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:29,731 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('Bagong99',)
2026-02-11 00:43:29,735 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:29,735 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:29,735 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('Bagong99',)
2026-02-11 00:43:29,737 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:29,737 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,740 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:29,740 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,742 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:29,742 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('active', 2)
2026-02-11 00:43:29,747 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:29,747 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('active', 2)
2026-02-11 00:43:29,748 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:29,748 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:29,752 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:29,752 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:29,754 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,755 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 736804, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,760 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,760 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 740317, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,762 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,762 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 736804, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,767 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,767 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 740317, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,769 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:29,769 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,771 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:29,771 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,775 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:29,775 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 736804, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,777 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:29,777 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 740317, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,781 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:29,781 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:29,784 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:29,784 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:29,786 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:29,786 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,790 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:29,790 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2,)
2026-02-11 00:43:29,793 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,793 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 736804, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,795 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:29,796 INFO sqlalchemy.engine.Engine [cached since 1228s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 29, 740317, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:29,803 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:29,803 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 29, 802510, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:29,806 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:29,806 INFO sqlalchemy.engine.Engine [cached since 1228s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 29, 805443, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:29,811 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:29,811 INFO sqlalchemy.engine.Engine [cached since 40.2s ago] ('supreme',)
2026-02-11 00:43:29,813 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:29,814 INFO sqlalchemy.engine.Engine [cached since 40.2s ago] ('supreme',)
2026-02-11 00:43:29,818 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:29,818 INFO sqlalchemy.engine.Engine [cached since 40.19s ago] (2,)
2026-02-11 00:43:29,821 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:29,821 INFO sqlalchemy.engine.Engine [cached since 40.2s ago] (2,)
2026-02-11 00:43:29,824 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:29,831 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52342 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:52345 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:52354 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 00:43:33,694 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:33,695 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:33,695 INFO sqlalchemy.engine.Engine [cached since 1232s ago] ('Bagong99',)
2026-02-11 00:43:33,745 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:33,746 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets 
WHERE tickets.user_id = %s ORDER BY tickets.updated_at DESC
2026-02-11 00:43:33,746 INFO sqlalchemy.engine.Engine [cached since 252.4s ago] (2,)
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:52354 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 00:43:33,753 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:33,764 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:35,525 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:35,526 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:35,526 INFO sqlalchemy.engine.Engine [cached since 1234s ago] ('Bagong99',)
2026-02-11 00:43:35,536 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:35,536 INFO sqlalchemy.engine.Engine [cached since 1234s ago] (2,)
2026-02-11 00:43:35,543 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:35,543 INFO sqlalchemy.engine.Engine [cached since 1234s ago] ('active', 2)
2026-02-11 00:43:35,549 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:35,549 INFO sqlalchemy.engine.Engine [cached since 1234s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:35,556 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:35,556 INFO sqlalchemy.engine.Engine [cached since 1234s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 35, 535236, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:35,561 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:35,562 INFO sqlalchemy.engine.Engine [cached since 1234s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 35, 535236, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:35,568 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:35,568 INFO sqlalchemy.engine.Engine [cached since 1234s ago] (2,)
2026-02-11 00:43:35,574 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:35,574 INFO sqlalchemy.engine.Engine [cached since 1234s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 35, 535236, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:35,588 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:35,588 INFO sqlalchemy.engine.Engine [cached since 1234s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:35,603 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:35,603 INFO sqlalchemy.engine.Engine [cached since 1234s ago] (2,)
2026-02-11 00:43:35,610 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:35,610 INFO sqlalchemy.engine.Engine [cached since 1234s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 35, 535236, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:35,618 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:35,618 INFO sqlalchemy.engine.Engine [cached since 1234s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 35, 617104, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:35,626 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:35,626 INFO sqlalchemy.engine.Engine [cached since 46.01s ago] ('supreme',)
2026-02-11 00:43:35,634 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:35,634 INFO sqlalchemy.engine.Engine [cached since 46.01s ago] (2,)
2026-02-11 00:43:35,640 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52354 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:45,517 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:45,518 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:45,518 INFO sqlalchemy.engine.Engine [cached since 1244s ago] ('Bagong99',)
2026-02-11 00:43:45,524 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:45,524 INFO sqlalchemy.engine.Engine [cached since 1244s ago] (2,)
2026-02-11 00:43:45,529 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:45,529 INFO sqlalchemy.engine.Engine [cached since 1244s ago] ('active', 2)
2026-02-11 00:43:45,535 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:45,535 INFO sqlalchemy.engine.Engine [cached since 1244s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:45,541 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:45,541 INFO sqlalchemy.engine.Engine [cached since 1244s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 45, 523555, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:45,546 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:45,546 INFO sqlalchemy.engine.Engine [cached since 1244s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 45, 523555, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:45,552 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:45,553 INFO sqlalchemy.engine.Engine [cached since 1244s ago] (2,)
2026-02-11 00:43:45,557 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:45,557 INFO sqlalchemy.engine.Engine [cached since 1244s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 45, 523555, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:45,564 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:45,564 INFO sqlalchemy.engine.Engine [cached since 1244s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:45,571 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:45,572 INFO sqlalchemy.engine.Engine [cached since 1244s ago] (2,)
2026-02-11 00:43:45,578 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:45,578 INFO sqlalchemy.engine.Engine [cached since 1244s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 45, 523555, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:45,584 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:45,584 INFO sqlalchemy.engine.Engine [cached since 1244s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 45, 583333, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:45,589 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:45,589 INFO sqlalchemy.engine.Engine [cached since 55.98s ago] ('supreme',)
2026-02-11 00:43:45,595 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:45,596 INFO sqlalchemy.engine.Engine [cached since 55.97s ago] (2,)
2026-02-11 00:43:45,600 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52384 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:52398 - "OPTIONS /api/v1/accounts/auth/me HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:43:47,293 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:47,294 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:47,294 INFO sqlalchemy.engine.Engine [cached since 1246s ago] ('mluhak1',)
2026-02-11 00:43:47,298 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/accounts/auth/me -> 401
INFO:     127.0.0.1:52398 - "GET /api/v1/accounts/auth/me HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: POST /api/v1/accounts/auth/login
2026-02-11 00:43:49,798 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:49,799 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:49,800 INFO sqlalchemy.engine.Engine [cached since 1248s ago] ('Bagong99',)
2026-02-11 00:43:49,835 INFO sqlalchemy.engine.Engine UPDATE users SET last_jti=%s WHERE users.id = %s
2026-02-11 00:43:49,835 INFO sqlalchemy.engine.Engine [cached since 1248s ago] ('899a9132-b438-46e8-aaeb-03f3d1b698f4', 2)
2026-02-11 00:43:49,841 INFO sqlalchemy.engine.Engine COMMIT
âœ… Response: POST /api/v1/accounts/auth/login -> 200
INFO:     127.0.0.1:52398 - "POST /api/v1/accounts/auth/login HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:43:49,900 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:49,901 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:49,902 INFO sqlalchemy.engine.Engine [cached since 1248s ago] ('Bagong99',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:52398 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:43:49,914 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52398 - "OPTIONS /api/v1/dashboard/stats HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:49,957 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:49,958 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:49,958 INFO sqlalchemy.engine.Engine [cached since 1248s ago] ('Bagong99',)
2026-02-11 00:43:49,965 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:49,965 INFO sqlalchemy.engine.Engine [cached since 1248s ago] (2,)
2026-02-11 00:43:49,971 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:49,971 INFO sqlalchemy.engine.Engine [cached since 1248s ago] ('active', 2)
2026-02-11 00:43:49,976 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:49,977 INFO sqlalchemy.engine.Engine [cached since 1248s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:49,983 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:49,983 INFO sqlalchemy.engine.Engine [cached since 1248s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 49, 964690, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:49,989 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:49,989 INFO sqlalchemy.engine.Engine [cached since 1248s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 49, 964690, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:49,996 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:49,996 INFO sqlalchemy.engine.Engine [cached since 1248s ago] (2,)
2026-02-11 00:43:50,003 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:50,003 INFO sqlalchemy.engine.Engine [cached since 1248s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 49, 964690, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:50,010 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:50,010 INFO sqlalchemy.engine.Engine [cached since 1248s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:50,022 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:50,023 INFO sqlalchemy.engine.Engine [cached since 1248s ago] (2,)
2026-02-11 00:43:50,031 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:50,031 INFO sqlalchemy.engine.Engine [cached since 1248s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 49, 964690, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:50,039 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:50,040 INFO sqlalchemy.engine.Engine [cached since 1248s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 50, 39201, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:50,047 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:50,048 INFO sqlalchemy.engine.Engine [cached since 60.43s ago] ('supreme',)
2026-02-11 00:43:50,060 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:50,060 INFO sqlalchemy.engine.Engine [cached since 60.44s ago] (2,)
2026-02-11 00:43:50,071 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52398 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
INFO:     127.0.0.1:52413 - "OPTIONS /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:43:50,183 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:50,184 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:50,184 INFO sqlalchemy.engine.Engine [cached since 1249s ago] ('Bagong99',)
2026-02-11 00:43:50,185 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:50,185 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:50,185 INFO sqlalchemy.engine.Engine [cached since 1249s ago] ('Bagong99',)
2026-02-11 00:43:50,191 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:50,191 INFO sqlalchemy.engine.Engine [cached since 1249s ago] (2,)
2026-02-11 00:43:50,192 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:43:50,192 INFO sqlalchemy.engine.Engine [cached since 1249s ago] (2,)
2026-02-11 00:43:50,197 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:50,197 INFO sqlalchemy.engine.Engine [cached since 1249s ago] ('active', 2)
2026-02-11 00:43:50,197 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:43:50,197 INFO sqlalchemy.engine.Engine [cached since 1249s ago] ('active', 2)
2026-02-11 00:43:50,202 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:50,202 INFO sqlalchemy.engine.Engine [cached since 1249s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:50,203 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:43:50,204 INFO sqlalchemy.engine.Engine [cached since 1249s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:43:50,208 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:50,208 INFO sqlalchemy.engine.Engine [cached since 1249s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 50, 190150, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:50,208 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:50,208 INFO sqlalchemy.engine.Engine [cached since 1249s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 50, 192211, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:50,214 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:50,215 INFO sqlalchemy.engine.Engine [cached since 1249s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 50, 192211, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:50,216 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:50,216 INFO sqlalchemy.engine.Engine [cached since 1249s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 50, 190150, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:50,222 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:50,222 INFO sqlalchemy.engine.Engine [cached since 1249s ago] (2,)
2026-02-11 00:43:50,223 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:43:50,223 INFO sqlalchemy.engine.Engine [cached since 1249s ago] (2,)
2026-02-11 00:43:50,228 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:50,228 INFO sqlalchemy.engine.Engine [cached since 1249s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 50, 192211, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:50,231 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:43:50,231 INFO sqlalchemy.engine.Engine [cached since 1249s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 50, 190150, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:50,235 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:50,235 INFO sqlalchemy.engine.Engine [cached since 1249s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:50,235 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:43:50,236 INFO sqlalchemy.engine.Engine [cached since 1249s ago] ('pending', 'running', 2, 10)
2026-02-11 00:43:50,246 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:50,246 INFO sqlalchemy.engine.Engine [cached since 1249s ago] (2,)
2026-02-11 00:43:50,248 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:43:50,248 INFO sqlalchemy.engine.Engine [cached since 1249s ago] (2,)
2026-02-11 00:43:50,253 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:50,254 INFO sqlalchemy.engine.Engine [cached since 1249s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 50, 192211, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:50,256 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:43:50,256 INFO sqlalchemy.engine.Engine [cached since 1249s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 43, 50, 190150, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:43:50,261 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:50,261 INFO sqlalchemy.engine.Engine [cached since 1249s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 50, 260397, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:50,263 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:43:50,263 INFO sqlalchemy.engine.Engine [cached since 1249s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 43, 50, 262560, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:43:50,269 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:50,269 INFO sqlalchemy.engine.Engine [cached since 60.66s ago] ('supreme',)
2026-02-11 00:43:50,271 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:43:50,271 INFO sqlalchemy.engine.Engine [cached since 60.66s ago] ('supreme',)
2026-02-11 00:43:50,274 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:50,274 INFO sqlalchemy.engine.Engine [cached since 60.65s ago] (2,)
2026-02-11 00:43:50,277 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:43:50,278 INFO sqlalchemy.engine.Engine [cached since 60.65s ago] (2,)
2026-02-11 00:43:50,279 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:43:50,283 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52413 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:52412 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:43:52,746 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:43:52,747 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:43:52,747 INFO sqlalchemy.engine.Engine [cached since 1251s ago] ('Bagong99',)
2026-02-11 00:43:52,762 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/accounts/auth/me -> 401
INFO:     127.0.0.1:52429 - "GET /api/v1/accounts/auth/me HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:44:00,158 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:44:00,158 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:44:00,158 INFO sqlalchemy.engine.Engine [cached since 1259s ago] ('Bagong99',)
2026-02-11 00:44:00,164 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:44:00,164 INFO sqlalchemy.engine.Engine [cached since 1258s ago] (2,)
2026-02-11 00:44:00,169 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:44:00,169 INFO sqlalchemy.engine.Engine [cached since 1258s ago] ('active', 2)
2026-02-11 00:44:00,174 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:44:00,174 INFO sqlalchemy.engine.Engine [cached since 1258s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:44:00,180 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:00,181 INFO sqlalchemy.engine.Engine [cached since 1258s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 0, 164035, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:00,187 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:00,187 INFO sqlalchemy.engine.Engine [cached since 1258s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 0, 164035, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:00,194 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:44:00,194 INFO sqlalchemy.engine.Engine [cached since 1258s ago] (2,)
2026-02-11 00:44:00,199 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:44:00,199 INFO sqlalchemy.engine.Engine [cached since 1258s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 0, 164035, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:00,205 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:44:00,206 INFO sqlalchemy.engine.Engine [cached since 1258s ago] ('pending', 'running', 2, 10)
2026-02-11 00:44:00,212 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:44:00,213 INFO sqlalchemy.engine.Engine [cached since 1258s ago] (2,)
2026-02-11 00:44:00,217 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:00,217 INFO sqlalchemy.engine.Engine [cached since 1258s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 0, 164035, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:00,223 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:44:00,223 INFO sqlalchemy.engine.Engine [cached since 1258s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 44, 0, 222612, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:44:00,230 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:44:00,230 INFO sqlalchemy.engine.Engine [cached since 70.62s ago] ('supreme',)
2026-02-11 00:44:00,240 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:44:00,240 INFO sqlalchemy.engine.Engine [cached since 70.61s ago] (2,)
2026-02-11 00:44:00,246 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52444 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:44:10,190 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:44:10,191 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:44:10,192 INFO sqlalchemy.engine.Engine [cached since 1269s ago] ('Bagong99',)
2026-02-11 00:44:10,200 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:44:10,200 INFO sqlalchemy.engine.Engine [cached since 1269s ago] (2,)
2026-02-11 00:44:10,207 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:44:10,207 INFO sqlalchemy.engine.Engine [cached since 1269s ago] ('active', 2)
2026-02-11 00:44:10,216 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:44:10,216 INFO sqlalchemy.engine.Engine [cached since 1269s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:44:10,222 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:10,222 INFO sqlalchemy.engine.Engine [cached since 1269s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 10, 199535, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:10,229 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:10,229 INFO sqlalchemy.engine.Engine [cached since 1269s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 10, 199535, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:10,236 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:44:10,236 INFO sqlalchemy.engine.Engine [cached since 1269s ago] (2,)
2026-02-11 00:44:10,243 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:44:10,243 INFO sqlalchemy.engine.Engine [cached since 1269s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 10, 199535, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:10,249 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:44:10,250 INFO sqlalchemy.engine.Engine [cached since 1269s ago] ('pending', 'running', 2, 10)
2026-02-11 00:44:10,258 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:44:10,258 INFO sqlalchemy.engine.Engine [cached since 1269s ago] (2,)
2026-02-11 00:44:10,265 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:10,265 INFO sqlalchemy.engine.Engine [cached since 1269s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 10, 199535, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:10,273 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:44:10,273 INFO sqlalchemy.engine.Engine [cached since 1269s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 44, 10, 272063, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:44:10,281 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:44:10,281 INFO sqlalchemy.engine.Engine [cached since 80.67s ago] ('supreme',)
2026-02-11 00:44:10,288 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:44:10,289 INFO sqlalchemy.engine.Engine [cached since 80.66s ago] (2,)
2026-02-11 00:44:10,295 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52465 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:44:20,172 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:44:20,174 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:44:20,174 INFO sqlalchemy.engine.Engine [cached since 1279s ago] ('Bagong99',)
2026-02-11 00:44:20,185 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:44:20,185 INFO sqlalchemy.engine.Engine [cached since 1279s ago] (2,)
2026-02-11 00:44:20,192 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:44:20,192 INFO sqlalchemy.engine.Engine [cached since 1279s ago] ('active', 2)
2026-02-11 00:44:20,199 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:44:20,200 INFO sqlalchemy.engine.Engine [cached since 1279s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:44:20,207 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:20,207 INFO sqlalchemy.engine.Engine [cached since 1279s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 20, 183731, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:20,214 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:20,214 INFO sqlalchemy.engine.Engine [cached since 1279s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 20, 183731, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:20,221 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:44:20,222 INFO sqlalchemy.engine.Engine [cached since 1279s ago] (2,)
2026-02-11 00:44:20,229 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:44:20,229 INFO sqlalchemy.engine.Engine [cached since 1279s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 20, 183731, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:20,237 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:44:20,237 INFO sqlalchemy.engine.Engine [cached since 1279s ago] ('pending', 'running', 2, 10)
2026-02-11 00:44:20,245 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:44:20,245 INFO sqlalchemy.engine.Engine [cached since 1279s ago] (2,)
2026-02-11 00:44:20,252 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:20,252 INFO sqlalchemy.engine.Engine [cached since 1279s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 20, 183731, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:20,260 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:44:20,260 INFO sqlalchemy.engine.Engine [cached since 1279s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 44, 20, 258911, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:44:20,267 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:44:20,268 INFO sqlalchemy.engine.Engine [cached since 90.65s ago] ('supreme',)
2026-02-11 00:44:20,279 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:44:20,279 INFO sqlalchemy.engine.Engine [cached since 90.65s ago] (2,)
2026-02-11 00:44:20,288 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52484 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:44:30,162 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:44:30,163 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:44:30,163 INFO sqlalchemy.engine.Engine [cached since 1289s ago] ('Bagong99',)
2026-02-11 00:44:30,172 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:44:30,172 INFO sqlalchemy.engine.Engine [cached since 1288s ago] (2,)
2026-02-11 00:44:30,177 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:44:30,177 INFO sqlalchemy.engine.Engine [cached since 1288s ago] ('active', 2)
2026-02-11 00:44:30,183 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:44:30,183 INFO sqlalchemy.engine.Engine [cached since 1288s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:44:30,188 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:30,188 INFO sqlalchemy.engine.Engine [cached since 1288s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 30, 171099, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:30,193 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:30,194 INFO sqlalchemy.engine.Engine [cached since 1288s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 30, 171099, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:30,198 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:44:30,198 INFO sqlalchemy.engine.Engine [cached since 1288s ago] (2,)
2026-02-11 00:44:30,203 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:44:30,204 INFO sqlalchemy.engine.Engine [cached since 1288s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 30, 171099, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:30,211 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:44:30,211 INFO sqlalchemy.engine.Engine [cached since 1288s ago] ('pending', 'running', 2, 10)
2026-02-11 00:44:30,219 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:44:30,219 INFO sqlalchemy.engine.Engine [cached since 1289s ago] (2,)
2026-02-11 00:44:30,225 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:30,225 INFO sqlalchemy.engine.Engine [cached since 1288s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 30, 171099, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:30,231 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:44:30,232 INFO sqlalchemy.engine.Engine [cached since 1288s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 44, 30, 231018, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:44:30,238 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:44:30,238 INFO sqlalchemy.engine.Engine [cached since 100.6s ago] ('supreme',)
2026-02-11 00:44:30,244 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:44:30,244 INFO sqlalchemy.engine.Engine [cached since 100.6s ago] (2,)
2026-02-11 00:44:30,249 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52506 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:44:40,161 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:44:40,161 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:44:40,162 INFO sqlalchemy.engine.Engine [cached since 1299s ago] ('Bagong99',)
2026-02-11 00:44:40,168 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:44:40,169 INFO sqlalchemy.engine.Engine [cached since 1298s ago] (2,)
2026-02-11 00:44:40,174 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:44:40,174 INFO sqlalchemy.engine.Engine [cached since 1298s ago] ('active', 2)
2026-02-11 00:44:40,181 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:44:40,181 INFO sqlalchemy.engine.Engine [cached since 1298s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:44:40,188 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:40,188 INFO sqlalchemy.engine.Engine [cached since 1298s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 40, 167663, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:40,196 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:40,196 INFO sqlalchemy.engine.Engine [cached since 1299s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 40, 167663, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:40,202 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:44:40,202 INFO sqlalchemy.engine.Engine [cached since 1299s ago] (2,)
2026-02-11 00:44:40,208 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:44:40,208 INFO sqlalchemy.engine.Engine [cached since 1299s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 40, 167663, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:40,215 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:44:40,215 INFO sqlalchemy.engine.Engine [cached since 1299s ago] ('pending', 'running', 2, 10)
2026-02-11 00:44:40,222 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:44:40,222 INFO sqlalchemy.engine.Engine [cached since 1299s ago] (2,)
2026-02-11 00:44:40,227 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:40,228 INFO sqlalchemy.engine.Engine [cached since 1299s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 40, 167663, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:40,234 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:44:40,234 INFO sqlalchemy.engine.Engine [cached since 1299s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 44, 40, 232902, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:44:40,239 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:44:40,239 INFO sqlalchemy.engine.Engine [cached since 110.6s ago] ('supreme',)
2026-02-11 00:44:40,244 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:44:40,244 INFO sqlalchemy.engine.Engine [cached since 110.6s ago] (2,)
2026-02-11 00:44:40,249 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52532 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:44:50,165 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:44:50,166 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:44:50,167 INFO sqlalchemy.engine.Engine [cached since 1309s ago] ('Bagong99',)
2026-02-11 00:44:50,176 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:44:50,176 INFO sqlalchemy.engine.Engine [cached since 1309s ago] (2,)
2026-02-11 00:44:50,182 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:44:50,182 INFO sqlalchemy.engine.Engine [cached since 1309s ago] ('active', 2)
2026-02-11 00:44:50,189 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:44:50,190 INFO sqlalchemy.engine.Engine [cached since 1309s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:44:50,196 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:50,197 INFO sqlalchemy.engine.Engine [cached since 1309s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 50, 174868, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:50,205 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:50,205 INFO sqlalchemy.engine.Engine [cached since 1309s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 50, 174868, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:50,211 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:44:50,212 INFO sqlalchemy.engine.Engine [cached since 1309s ago] (2,)
2026-02-11 00:44:50,220 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:44:50,220 INFO sqlalchemy.engine.Engine [cached since 1309s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 50, 174868, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:50,227 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:44:50,227 INFO sqlalchemy.engine.Engine [cached since 1309s ago] ('pending', 'running', 2, 10)
2026-02-11 00:44:50,235 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:44:50,236 INFO sqlalchemy.engine.Engine [cached since 1309s ago] (2,)
2026-02-11 00:44:50,242 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:44:50,243 INFO sqlalchemy.engine.Engine [cached since 1309s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 44, 50, 174868, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:44:50,252 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:44:50,253 INFO sqlalchemy.engine.Engine [cached since 1309s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 44, 50, 251328, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:44:50,263 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:44:50,263 INFO sqlalchemy.engine.Engine [cached since 120.6s ago] ('supreme',)
2026-02-11 00:44:50,269 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:44:50,270 INFO sqlalchemy.engine.Engine [cached since 120.6s ago] (2,)
2026-02-11 00:44:50,278 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52559 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:45:00,161 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:45:00,162 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:45:00,162 INFO sqlalchemy.engine.Engine [cached since 1319s ago] ('Bagong99',)
2026-02-11 00:45:00,168 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:45:00,169 INFO sqlalchemy.engine.Engine [cached since 1318s ago] (2,)
2026-02-11 00:45:00,173 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:45:00,173 INFO sqlalchemy.engine.Engine [cached since 1318s ago] ('active', 2)
2026-02-11 00:45:00,178 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:45:00,179 INFO sqlalchemy.engine.Engine [cached since 1318s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:45:00,184 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:00,184 INFO sqlalchemy.engine.Engine [cached since 1318s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 0, 167636, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:00,189 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:00,190 INFO sqlalchemy.engine.Engine [cached since 1318s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 0, 167636, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:00,195 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:45:00,195 INFO sqlalchemy.engine.Engine [cached since 1318s ago] (2,)
2026-02-11 00:45:00,200 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:45:00,201 INFO sqlalchemy.engine.Engine [cached since 1318s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 0, 167636, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:00,206 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:45:00,206 INFO sqlalchemy.engine.Engine [cached since 1318s ago] ('pending', 'running', 2, 10)
2026-02-11 00:45:00,215 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:45:00,215 INFO sqlalchemy.engine.Engine [cached since 1318s ago] (2,)
2026-02-11 00:45:00,221 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:00,221 INFO sqlalchemy.engine.Engine [cached since 1318s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 0, 167636, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:00,228 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:45:00,228 INFO sqlalchemy.engine.Engine [cached since 1318s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 45, 0, 227310, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:45:00,235 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:45:00,235 INFO sqlalchemy.engine.Engine [cached since 130.6s ago] ('supreme',)
2026-02-11 00:45:00,242 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:45:00,242 INFO sqlalchemy.engine.Engine [cached since 130.6s ago] (2,)
2026-02-11 00:45:00,248 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52575 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:45:10,171 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:45:10,173 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:45:10,173 INFO sqlalchemy.engine.Engine [cached since 1329s ago] ('Bagong99',)
2026-02-11 00:45:10,187 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:45:10,187 INFO sqlalchemy.engine.Engine [cached since 1329s ago] (2,)
2026-02-11 00:45:10,194 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:45:10,195 INFO sqlalchemy.engine.Engine [cached since 1329s ago] ('active', 2)
2026-02-11 00:45:10,201 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:45:10,201 INFO sqlalchemy.engine.Engine [cached since 1329s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:45:10,208 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:10,208 INFO sqlalchemy.engine.Engine [cached since 1329s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 10, 186337, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:10,216 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:10,216 INFO sqlalchemy.engine.Engine [cached since 1329s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 10, 186337, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:10,223 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:45:10,223 INFO sqlalchemy.engine.Engine [cached since 1329s ago] (2,)
2026-02-11 00:45:10,230 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:45:10,230 INFO sqlalchemy.engine.Engine [cached since 1329s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 10, 186337, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:10,237 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:45:10,237 INFO sqlalchemy.engine.Engine [cached since 1329s ago] ('pending', 'running', 2, 10)
2026-02-11 00:45:10,268 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:45:10,269 INFO sqlalchemy.engine.Engine [cached since 1329s ago] (2,)
2026-02-11 00:45:10,276 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:10,276 INFO sqlalchemy.engine.Engine [cached since 1329s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 10, 186337, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:10,284 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:45:10,285 INFO sqlalchemy.engine.Engine [cached since 1329s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 45, 10, 282979, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:45:10,292 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:45:10,292 INFO sqlalchemy.engine.Engine [cached since 140.7s ago] ('supreme',)
2026-02-11 00:45:10,300 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:45:10,300 INFO sqlalchemy.engine.Engine [cached since 140.7s ago] (2,)
2026-02-11 00:45:10,310 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52592 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:45:20,173 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:45:20,175 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:45:20,175 INFO sqlalchemy.engine.Engine [cached since 1339s ago] ('Bagong99',)
2026-02-11 00:45:20,186 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:45:20,187 INFO sqlalchemy.engine.Engine [cached since 1339s ago] (2,)
2026-02-11 00:45:20,193 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:45:20,193 INFO sqlalchemy.engine.Engine [cached since 1339s ago] ('active', 2)
2026-02-11 00:45:20,200 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:45:20,200 INFO sqlalchemy.engine.Engine [cached since 1339s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:45:20,207 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:20,208 INFO sqlalchemy.engine.Engine [cached since 1339s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 20, 186093, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:20,214 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:20,214 INFO sqlalchemy.engine.Engine [cached since 1339s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 20, 186093, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:20,220 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:45:20,220 INFO sqlalchemy.engine.Engine [cached since 1339s ago] (2,)
2026-02-11 00:45:20,226 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:45:20,226 INFO sqlalchemy.engine.Engine [cached since 1339s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 20, 186093, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:20,232 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:45:20,233 INFO sqlalchemy.engine.Engine [cached since 1339s ago] ('pending', 'running', 2, 10)
2026-02-11 00:45:20,244 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:45:20,245 INFO sqlalchemy.engine.Engine [cached since 1339s ago] (2,)
2026-02-11 00:45:20,251 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:20,251 INFO sqlalchemy.engine.Engine [cached since 1339s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 20, 186093, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:20,263 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:45:20,263 INFO sqlalchemy.engine.Engine [cached since 1339s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 45, 20, 261544, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:45:20,271 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:45:20,271 INFO sqlalchemy.engine.Engine [cached since 150.7s ago] ('supreme',)
2026-02-11 00:45:20,279 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:45:20,279 INFO sqlalchemy.engine.Engine [cached since 150.7s ago] (2,)
2026-02-11 00:45:20,290 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52609 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:45:30,193 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:45:30,193 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:45:30,194 INFO sqlalchemy.engine.Engine [cached since 1349s ago] ('Bagong99',)
2026-02-11 00:45:30,201 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:45:30,201 INFO sqlalchemy.engine.Engine [cached since 1349s ago] (2,)
2026-02-11 00:45:30,209 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:45:30,209 INFO sqlalchemy.engine.Engine [cached since 1349s ago] ('active', 2)
2026-02-11 00:45:30,216 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:45:30,216 INFO sqlalchemy.engine.Engine [cached since 1349s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:45:30,222 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:30,222 INFO sqlalchemy.engine.Engine [cached since 1349s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 30, 200862, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:30,228 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:30,228 INFO sqlalchemy.engine.Engine [cached since 1349s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 30, 200862, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:30,233 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:45:30,234 INFO sqlalchemy.engine.Engine [cached since 1349s ago] (2,)
2026-02-11 00:45:30,239 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:45:30,240 INFO sqlalchemy.engine.Engine [cached since 1349s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 30, 200862, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:30,246 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:45:30,247 INFO sqlalchemy.engine.Engine [cached since 1349s ago] ('pending', 'running', 2, 10)
2026-02-11 00:45:30,256 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:45:30,256 INFO sqlalchemy.engine.Engine [cached since 1349s ago] (2,)
2026-02-11 00:45:30,261 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:30,261 INFO sqlalchemy.engine.Engine [cached since 1349s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 30, 200862, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:30,269 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:45:30,269 INFO sqlalchemy.engine.Engine [cached since 1349s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 45, 30, 267681, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:45:30,276 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:45:30,276 INFO sqlalchemy.engine.Engine [cached since 160.7s ago] ('supreme',)
2026-02-11 00:45:30,282 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:45:30,283 INFO sqlalchemy.engine.Engine [cached since 160.7s ago] (2,)
2026-02-11 00:45:30,288 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52624 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:45:40,167 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:45:40,169 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:45:40,169 INFO sqlalchemy.engine.Engine [cached since 1359s ago] ('Bagong99',)
2026-02-11 00:45:40,177 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:45:40,177 INFO sqlalchemy.engine.Engine [cached since 1359s ago] (2,)
2026-02-11 00:45:40,184 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:45:40,184 INFO sqlalchemy.engine.Engine [cached since 1359s ago] ('active', 2)
2026-02-11 00:45:40,192 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:45:40,192 INFO sqlalchemy.engine.Engine [cached since 1359s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:45:40,199 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:40,199 INFO sqlalchemy.engine.Engine [cached since 1359s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 40, 176302, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:40,208 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:40,208 INFO sqlalchemy.engine.Engine [cached since 1359s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 40, 176302, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:40,215 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:45:40,216 INFO sqlalchemy.engine.Engine [cached since 1359s ago] (2,)
2026-02-11 00:45:40,223 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:45:40,223 INFO sqlalchemy.engine.Engine [cached since 1359s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 40, 176302, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:40,230 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:45:40,230 INFO sqlalchemy.engine.Engine [cached since 1359s ago] ('pending', 'running', 2, 10)
2026-02-11 00:45:40,236 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:45:40,237 INFO sqlalchemy.engine.Engine [cached since 1359s ago] (2,)
2026-02-11 00:45:40,243 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:40,243 INFO sqlalchemy.engine.Engine [cached since 1359s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 40, 176302, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:40,252 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:45:40,252 INFO sqlalchemy.engine.Engine [cached since 1359s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 45, 40, 251541, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:45:40,260 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:45:40,260 INFO sqlalchemy.engine.Engine [cached since 170.6s ago] ('supreme',)
2026-02-11 00:45:40,268 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:45:40,268 INFO sqlalchemy.engine.Engine [cached since 170.6s ago] (2,)
2026-02-11 00:45:40,276 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52643 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:45:50,170 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:45:50,172 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:45:50,172 INFO sqlalchemy.engine.Engine [cached since 1369s ago] ('Bagong99',)
2026-02-11 00:45:50,182 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:45:50,182 INFO sqlalchemy.engine.Engine [cached since 1369s ago] (2,)
2026-02-11 00:45:50,190 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:45:50,190 INFO sqlalchemy.engine.Engine [cached since 1369s ago] ('active', 2)
2026-02-11 00:45:50,196 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:45:50,196 INFO sqlalchemy.engine.Engine [cached since 1369s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:45:50,203 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:50,204 INFO sqlalchemy.engine.Engine [cached since 1369s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 50, 181177, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:50,211 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:50,212 INFO sqlalchemy.engine.Engine [cached since 1369s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 50, 181177, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:50,219 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:45:50,220 INFO sqlalchemy.engine.Engine [cached since 1369s ago] (2,)
2026-02-11 00:45:50,226 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:45:50,227 INFO sqlalchemy.engine.Engine [cached since 1369s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 50, 181177, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:50,234 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:45:50,234 INFO sqlalchemy.engine.Engine [cached since 1369s ago] ('pending', 'running', 2, 10)
2026-02-11 00:45:50,243 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:45:50,244 INFO sqlalchemy.engine.Engine [cached since 1369s ago] (2,)
2026-02-11 00:45:50,252 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:45:50,252 INFO sqlalchemy.engine.Engine [cached since 1369s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 45, 50, 181177, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:45:50,264 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:45:50,264 INFO sqlalchemy.engine.Engine [cached since 1369s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 45, 50, 262430, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:45:50,272 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:45:50,273 INFO sqlalchemy.engine.Engine [cached since 180.7s ago] ('supreme',)
2026-02-11 00:45:50,282 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:45:50,282 INFO sqlalchemy.engine.Engine [cached since 180.7s ago] (2,)
2026-02-11 00:45:50,291 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52660 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:46:00,169 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:46:00,171 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:46:00,171 INFO sqlalchemy.engine.Engine [cached since 1379s ago] ('Bagong99',)
2026-02-11 00:46:00,180 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:46:00,180 INFO sqlalchemy.engine.Engine [cached since 1379s ago] (2,)
2026-02-11 00:46:00,187 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:46:00,187 INFO sqlalchemy.engine.Engine [cached since 1379s ago] ('active', 2)
2026-02-11 00:46:00,194 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:46:00,194 INFO sqlalchemy.engine.Engine [cached since 1379s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:46:00,201 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:00,202 INFO sqlalchemy.engine.Engine [cached since 1379s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 0, 178241, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:00,209 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:00,209 INFO sqlalchemy.engine.Engine [cached since 1379s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 0, 178241, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:00,214 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:46:00,215 INFO sqlalchemy.engine.Engine [cached since 1379s ago] (2,)
2026-02-11 00:46:00,223 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:46:00,223 INFO sqlalchemy.engine.Engine [cached since 1379s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 0, 178241, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:00,230 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:46:00,231 INFO sqlalchemy.engine.Engine [cached since 1379s ago] ('pending', 'running', 2, 10)
2026-02-11 00:46:00,238 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:46:00,238 INFO sqlalchemy.engine.Engine [cached since 1379s ago] (2,)
2026-02-11 00:46:00,245 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:00,245 INFO sqlalchemy.engine.Engine [cached since 1379s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 0, 178241, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:00,253 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:46:00,254 INFO sqlalchemy.engine.Engine [cached since 1379s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 46, 0, 252555, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:46:00,260 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:46:00,260 INFO sqlalchemy.engine.Engine [cached since 190.6s ago] ('supreme',)
2026-02-11 00:46:00,267 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:46:00,268 INFO sqlalchemy.engine.Engine [cached since 190.6s ago] (2,)
2026-02-11 00:46:00,274 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52676 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:46:10,168 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:46:10,169 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:46:10,169 INFO sqlalchemy.engine.Engine [cached since 1389s ago] ('Bagong99',)
2026-02-11 00:46:10,176 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:46:10,177 INFO sqlalchemy.engine.Engine [cached since 1389s ago] (2,)
2026-02-11 00:46:10,184 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:46:10,185 INFO sqlalchemy.engine.Engine [cached since 1389s ago] ('active', 2)
2026-02-11 00:46:10,190 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:46:10,190 INFO sqlalchemy.engine.Engine [cached since 1389s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:46:10,195 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:10,196 INFO sqlalchemy.engine.Engine [cached since 1389s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 10, 175595, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:10,204 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:10,205 INFO sqlalchemy.engine.Engine [cached since 1389s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 10, 175595, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:10,212 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:46:10,212 INFO sqlalchemy.engine.Engine [cached since 1389s ago] (2,)
2026-02-11 00:46:10,217 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:46:10,217 INFO sqlalchemy.engine.Engine [cached since 1389s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 10, 175595, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:10,225 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:46:10,225 INFO sqlalchemy.engine.Engine [cached since 1389s ago] ('pending', 'running', 2, 10)
2026-02-11 00:46:10,234 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:46:10,234 INFO sqlalchemy.engine.Engine [cached since 1389s ago] (2,)
2026-02-11 00:46:10,244 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:10,244 INFO sqlalchemy.engine.Engine [cached since 1389s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 10, 175595, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:10,253 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:46:10,253 INFO sqlalchemy.engine.Engine [cached since 1389s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 46, 10, 251661, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:46:10,262 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:46:10,262 INFO sqlalchemy.engine.Engine [cached since 200.6s ago] ('supreme',)
2026-02-11 00:46:10,270 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:46:10,270 INFO sqlalchemy.engine.Engine [cached since 200.6s ago] (2,)
2026-02-11 00:46:10,277 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52694 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:46:20,170 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:46:20,172 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:46:20,172 INFO sqlalchemy.engine.Engine [cached since 1399s ago] ('Bagong99',)
2026-02-11 00:46:20,185 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:46:20,185 INFO sqlalchemy.engine.Engine [cached since 1399s ago] (2,)
2026-02-11 00:46:20,191 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:46:20,192 INFO sqlalchemy.engine.Engine [cached since 1399s ago] ('active', 2)
2026-02-11 00:46:20,199 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:46:20,199 INFO sqlalchemy.engine.Engine [cached since 1399s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:46:20,206 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:20,206 INFO sqlalchemy.engine.Engine [cached since 1399s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 20, 184515, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:20,212 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:20,213 INFO sqlalchemy.engine.Engine [cached since 1399s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 20, 184515, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:20,220 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:46:20,220 INFO sqlalchemy.engine.Engine [cached since 1399s ago] (2,)
2026-02-11 00:46:20,228 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:46:20,228 INFO sqlalchemy.engine.Engine [cached since 1399s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 20, 184515, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:20,235 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:46:20,235 INFO sqlalchemy.engine.Engine [cached since 1399s ago] ('pending', 'running', 2, 10)
2026-02-11 00:46:20,245 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:46:20,245 INFO sqlalchemy.engine.Engine [cached since 1399s ago] (2,)
2026-02-11 00:46:20,252 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:20,252 INFO sqlalchemy.engine.Engine [cached since 1399s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 20, 184515, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:20,258 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:46:20,258 INFO sqlalchemy.engine.Engine [cached since 1399s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 46, 20, 257528, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:46:20,264 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:46:20,264 INFO sqlalchemy.engine.Engine [cached since 210.7s ago] ('supreme',)
2026-02-11 00:46:20,274 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:46:20,275 INFO sqlalchemy.engine.Engine [cached since 210.6s ago] (2,)
2026-02-11 00:46:20,284 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52711 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:46:30,189 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:46:30,192 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:46:30,192 INFO sqlalchemy.engine.Engine [cached since 1409s ago] ('Bagong99',)
2026-02-11 00:46:30,202 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:46:30,203 INFO sqlalchemy.engine.Engine [cached since 1409s ago] (2,)
2026-02-11 00:46:30,210 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:46:30,210 INFO sqlalchemy.engine.Engine [cached since 1409s ago] ('active', 2)
2026-02-11 00:46:30,218 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:46:30,218 INFO sqlalchemy.engine.Engine [cached since 1409s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:46:30,224 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:30,224 INFO sqlalchemy.engine.Engine [cached since 1409s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 30, 201238, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:30,230 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:30,230 INFO sqlalchemy.engine.Engine [cached since 1409s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 30, 201238, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:30,238 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:46:30,238 INFO sqlalchemy.engine.Engine [cached since 1409s ago] (2,)
2026-02-11 00:46:30,245 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:46:30,245 INFO sqlalchemy.engine.Engine [cached since 1409s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 30, 201238, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:30,253 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:46:30,254 INFO sqlalchemy.engine.Engine [cached since 1409s ago] ('pending', 'running', 2, 10)
2026-02-11 00:46:30,261 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:46:30,261 INFO sqlalchemy.engine.Engine [cached since 1409s ago] (2,)
2026-02-11 00:46:30,267 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:30,267 INFO sqlalchemy.engine.Engine [cached since 1409s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 30, 201238, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:30,274 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:46:30,274 INFO sqlalchemy.engine.Engine [cached since 1409s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 46, 30, 272958, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:46:30,281 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:46:30,282 INFO sqlalchemy.engine.Engine [cached since 220.7s ago] ('supreme',)
2026-02-11 00:46:30,289 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:46:30,289 INFO sqlalchemy.engine.Engine [cached since 220.7s ago] (2,)
2026-02-11 00:46:30,296 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52732 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:46:40,561 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:46:40,563 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:46:40,563 INFO sqlalchemy.engine.Engine [cached since 1419s ago] ('Bagong99',)
2026-02-11 00:46:40,628 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:46:40,628 INFO sqlalchemy.engine.Engine [cached since 1419s ago] (2,)
2026-02-11 00:46:40,689 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:46:40,689 INFO sqlalchemy.engine.Engine [cached since 1419s ago] ('active', 2)
2026-02-11 00:46:40,748 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:46:40,748 INFO sqlalchemy.engine.Engine [cached since 1419s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:46:40,812 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:40,813 INFO sqlalchemy.engine.Engine [cached since 1419s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 40, 627313, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:40,873 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:40,873 INFO sqlalchemy.engine.Engine [cached since 1419s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 40, 627313, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:40,939 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:46:40,940 INFO sqlalchemy.engine.Engine [cached since 1419s ago] (2,)
2026-02-11 00:46:41,000 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:46:41,000 INFO sqlalchemy.engine.Engine [cached since 1419s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 40, 627313, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:41,061 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:46:41,061 INFO sqlalchemy.engine.Engine [cached since 1419s ago] ('pending', 'running', 2, 10)
2026-02-11 00:46:41,129 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:46:41,129 INFO sqlalchemy.engine.Engine [cached since 1419s ago] (2,)
2026-02-11 00:46:41,191 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:41,191 INFO sqlalchemy.engine.Engine [cached since 1419s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 40, 627313, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:41,246 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:46:41,246 INFO sqlalchemy.engine.Engine [cached since 1420s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 46, 41, 245332, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:46:41,308 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:46:41,308 INFO sqlalchemy.engine.Engine [cached since 231.7s ago] ('supreme',)
2026-02-11 00:46:41,372 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:46:41,373 INFO sqlalchemy.engine.Engine [cached since 231.7s ago] (2,)
2026-02-11 00:46:41,434 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52752 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:46:50,191 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:46:50,193 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:46:50,193 INFO sqlalchemy.engine.Engine [cached since 1429s ago] ('Bagong99',)
2026-02-11 00:46:50,208 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:46:50,208 INFO sqlalchemy.engine.Engine [cached since 1429s ago] (2,)
2026-02-11 00:46:50,215 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:46:50,215 INFO sqlalchemy.engine.Engine [cached since 1429s ago] ('active', 2)
2026-02-11 00:46:50,222 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:46:50,222 INFO sqlalchemy.engine.Engine [cached since 1429s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:46:50,229 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:50,229 INFO sqlalchemy.engine.Engine [cached since 1429s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 50, 207627, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:50,237 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:50,238 INFO sqlalchemy.engine.Engine [cached since 1429s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 50, 207627, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:50,244 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:46:50,244 INFO sqlalchemy.engine.Engine [cached since 1429s ago] (2,)
2026-02-11 00:46:50,251 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:46:50,251 INFO sqlalchemy.engine.Engine [cached since 1429s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 50, 207627, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:50,256 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:46:50,256 INFO sqlalchemy.engine.Engine [cached since 1429s ago] ('pending', 'running', 2, 10)
2026-02-11 00:46:50,264 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:46:50,264 INFO sqlalchemy.engine.Engine [cached since 1429s ago] (2,)
2026-02-11 00:46:50,270 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:46:50,271 INFO sqlalchemy.engine.Engine [cached since 1429s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 46, 50, 207627, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:46:50,279 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:46:50,280 INFO sqlalchemy.engine.Engine [cached since 1429s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 46, 50, 278410, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:46:50,287 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:46:50,287 INFO sqlalchemy.engine.Engine [cached since 240.7s ago] ('supreme',)
2026-02-11 00:46:50,294 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:46:50,295 INFO sqlalchemy.engine.Engine [cached since 240.7s ago] (2,)
2026-02-11 00:46:50,302 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52772 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:47:00,166 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:47:00,167 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:47:00,167 INFO sqlalchemy.engine.Engine [cached since 1439s ago] ('Bagong99',)
2026-02-11 00:47:00,174 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:47:00,174 INFO sqlalchemy.engine.Engine [cached since 1438s ago] (2,)
2026-02-11 00:47:00,181 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:47:00,182 INFO sqlalchemy.engine.Engine [cached since 1439s ago] ('active', 2)
2026-02-11 00:47:00,188 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:47:00,188 INFO sqlalchemy.engine.Engine [cached since 1439s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:47:00,195 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:00,195 INFO sqlalchemy.engine.Engine [cached since 1439s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 0, 172943, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:00,204 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:00,205 INFO sqlalchemy.engine.Engine [cached since 1439s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 0, 172943, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:00,212 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:47:00,212 INFO sqlalchemy.engine.Engine [cached since 1439s ago] (2,)
2026-02-11 00:47:00,219 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:47:00,219 INFO sqlalchemy.engine.Engine [cached since 1439s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 0, 172943, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:00,229 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:47:00,229 INFO sqlalchemy.engine.Engine [cached since 1439s ago] ('pending', 'running', 2, 10)
2026-02-11 00:47:00,237 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:47:00,238 INFO sqlalchemy.engine.Engine [cached since 1439s ago] (2,)
2026-02-11 00:47:00,245 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:00,245 INFO sqlalchemy.engine.Engine [cached since 1439s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 0, 172943, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:00,254 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:47:00,254 INFO sqlalchemy.engine.Engine [cached since 1439s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 47, 0, 252715, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:47:00,260 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:47:00,260 INFO sqlalchemy.engine.Engine [cached since 250.6s ago] ('supreme',)
2026-02-11 00:47:00,267 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:47:00,267 INFO sqlalchemy.engine.Engine [cached since 250.6s ago] (2,)
2026-02-11 00:47:00,274 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52791 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:47:10,169 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:47:10,171 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:47:10,171 INFO sqlalchemy.engine.Engine [cached since 1449s ago] ('Bagong99',)
2026-02-11 00:47:10,181 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:47:10,181 INFO sqlalchemy.engine.Engine [cached since 1449s ago] (2,)
2026-02-11 00:47:10,187 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:47:10,188 INFO sqlalchemy.engine.Engine [cached since 1449s ago] ('active', 2)
2026-02-11 00:47:10,194 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:47:10,194 INFO sqlalchemy.engine.Engine [cached since 1449s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:47:10,200 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:10,200 INFO sqlalchemy.engine.Engine [cached since 1449s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 10, 180327, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:10,205 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:10,206 INFO sqlalchemy.engine.Engine [cached since 1449s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 10, 180327, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:10,213 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:47:10,213 INFO sqlalchemy.engine.Engine [cached since 1449s ago] (2,)
2026-02-11 00:47:10,221 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:47:10,221 INFO sqlalchemy.engine.Engine [cached since 1449s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 10, 180327, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:10,230 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:47:10,231 INFO sqlalchemy.engine.Engine [cached since 1449s ago] ('pending', 'running', 2, 10)
2026-02-11 00:47:10,237 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:47:10,237 INFO sqlalchemy.engine.Engine [cached since 1449s ago] (2,)
2026-02-11 00:47:10,244 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:10,245 INFO sqlalchemy.engine.Engine [cached since 1449s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 10, 180327, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:10,265 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:47:10,265 INFO sqlalchemy.engine.Engine [cached since 1449s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 47, 10, 264190, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:47:10,273 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:47:10,273 INFO sqlalchemy.engine.Engine [cached since 260.7s ago] ('supreme',)
2026-02-11 00:47:10,281 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:47:10,282 INFO sqlalchemy.engine.Engine [cached since 260.7s ago] (2,)
2026-02-11 00:47:10,288 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52812 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:47:20,170 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:47:20,171 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:47:20,171 INFO sqlalchemy.engine.Engine [cached since 1459s ago] ('Bagong99',)
2026-02-11 00:47:20,179 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:47:20,180 INFO sqlalchemy.engine.Engine [cached since 1459s ago] (2,)
2026-02-11 00:47:20,186 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:47:20,186 INFO sqlalchemy.engine.Engine [cached since 1459s ago] ('active', 2)
2026-02-11 00:47:20,193 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:47:20,193 INFO sqlalchemy.engine.Engine [cached since 1459s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:47:20,200 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:20,201 INFO sqlalchemy.engine.Engine [cached since 1459s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 20, 178969, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:20,208 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:20,208 INFO sqlalchemy.engine.Engine [cached since 1459s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 20, 178969, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:20,215 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:47:20,219 INFO sqlalchemy.engine.Engine [cached since 1459s ago] (2,)
2026-02-11 00:47:20,228 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:47:20,228 INFO sqlalchemy.engine.Engine [cached since 1459s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 20, 178969, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:20,236 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:47:20,236 INFO sqlalchemy.engine.Engine [cached since 1459s ago] ('pending', 'running', 2, 10)
2026-02-11 00:47:20,248 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:47:20,248 INFO sqlalchemy.engine.Engine [cached since 1459s ago] (2,)
2026-02-11 00:47:20,254 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:20,255 INFO sqlalchemy.engine.Engine [cached since 1459s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 20, 178969, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:20,266 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:47:20,266 INFO sqlalchemy.engine.Engine [cached since 1459s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 47, 20, 264835, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:47:20,276 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:47:20,276 INFO sqlalchemy.engine.Engine [cached since 270.7s ago] ('supreme',)
2026-02-11 00:47:20,289 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:47:20,289 INFO sqlalchemy.engine.Engine [cached since 270.7s ago] (2,)
2026-02-11 00:47:20,296 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52838 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:47:30,176 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:47:30,178 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:47:30,178 INFO sqlalchemy.engine.Engine [cached since 1469s ago] ('Bagong99',)
2026-02-11 00:47:30,187 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:47:30,187 INFO sqlalchemy.engine.Engine [cached since 1469s ago] (2,)
2026-02-11 00:47:30,193 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:47:30,193 INFO sqlalchemy.engine.Engine [cached since 1469s ago] ('active', 2)
2026-02-11 00:47:30,199 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:47:30,200 INFO sqlalchemy.engine.Engine [cached since 1469s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:47:30,206 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:30,206 INFO sqlalchemy.engine.Engine [cached since 1469s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 30, 186338, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:30,212 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:30,212 INFO sqlalchemy.engine.Engine [cached since 1469s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 30, 186338, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:30,218 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:47:30,218 INFO sqlalchemy.engine.Engine [cached since 1469s ago] (2,)
2026-02-11 00:47:30,224 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:47:30,224 INFO sqlalchemy.engine.Engine [cached since 1469s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 30, 186338, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:30,230 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:47:30,230 INFO sqlalchemy.engine.Engine [cached since 1469s ago] ('pending', 'running', 2, 10)
2026-02-11 00:47:30,238 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:47:30,238 INFO sqlalchemy.engine.Engine [cached since 1469s ago] (2,)
2026-02-11 00:47:30,247 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:30,247 INFO sqlalchemy.engine.Engine [cached since 1469s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 30, 186338, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:30,256 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:47:30,256 INFO sqlalchemy.engine.Engine [cached since 1469s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 47, 30, 255492, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:47:30,266 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:47:30,266 INFO sqlalchemy.engine.Engine [cached since 280.7s ago] ('supreme',)
2026-02-11 00:47:30,292 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:47:30,292 INFO sqlalchemy.engine.Engine [cached since 280.7s ago] (2,)
2026-02-11 00:47:30,299 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52858 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:47:40,162 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:47:40,162 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:47:40,162 INFO sqlalchemy.engine.Engine [cached since 1479s ago] ('Bagong99',)
2026-02-11 00:47:40,168 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:47:40,168 INFO sqlalchemy.engine.Engine [cached since 1478s ago] (2,)
2026-02-11 00:47:40,174 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:47:40,175 INFO sqlalchemy.engine.Engine [cached since 1478s ago] ('active', 2)
2026-02-11 00:47:40,183 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:47:40,183 INFO sqlalchemy.engine.Engine [cached since 1478s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:47:40,190 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:40,190 INFO sqlalchemy.engine.Engine [cached since 1478s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 40, 167951, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:40,198 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:40,198 INFO sqlalchemy.engine.Engine [cached since 1479s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 40, 167951, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:40,204 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:47:40,205 INFO sqlalchemy.engine.Engine [cached since 1479s ago] (2,)
2026-02-11 00:47:40,210 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:47:40,210 INFO sqlalchemy.engine.Engine [cached since 1479s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 40, 167951, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:40,217 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:47:40,217 INFO sqlalchemy.engine.Engine [cached since 1479s ago] ('pending', 'running', 2, 10)
2026-02-11 00:47:40,224 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:47:40,225 INFO sqlalchemy.engine.Engine [cached since 1479s ago] (2,)
2026-02-11 00:47:40,230 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:40,230 INFO sqlalchemy.engine.Engine [cached since 1479s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 40, 167951, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:40,238 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:47:40,238 INFO sqlalchemy.engine.Engine [cached since 1479s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 47, 40, 236845, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:47:40,246 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:47:40,247 INFO sqlalchemy.engine.Engine [cached since 290.6s ago] ('supreme',)
2026-02-11 00:47:40,254 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:47:40,254 INFO sqlalchemy.engine.Engine [cached since 290.6s ago] (2,)
2026-02-11 00:47:40,263 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52877 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:47:50,162 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:47:50,163 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:47:50,163 INFO sqlalchemy.engine.Engine [cached since 1489s ago] ('Bagong99',)
2026-02-11 00:47:50,169 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:47:50,169 INFO sqlalchemy.engine.Engine [cached since 1488s ago] (2,)
2026-02-11 00:47:50,176 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:47:50,176 INFO sqlalchemy.engine.Engine [cached since 1488s ago] ('active', 2)
2026-02-11 00:47:50,183 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:47:50,183 INFO sqlalchemy.engine.Engine [cached since 1488s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:47:50,190 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:50,190 INFO sqlalchemy.engine.Engine [cached since 1488s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 50, 168991, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:50,201 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:50,202 INFO sqlalchemy.engine.Engine [cached since 1489s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 50, 168991, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:50,208 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:47:50,208 INFO sqlalchemy.engine.Engine [cached since 1489s ago] (2,)
2026-02-11 00:47:50,214 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:47:50,215 INFO sqlalchemy.engine.Engine [cached since 1489s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 50, 168991, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:50,222 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:47:50,222 INFO sqlalchemy.engine.Engine [cached since 1489s ago] ('pending', 'running', 2, 10)
2026-02-11 00:47:50,230 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:47:50,230 INFO sqlalchemy.engine.Engine [cached since 1489s ago] (2,)
2026-02-11 00:47:50,240 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:47:50,240 INFO sqlalchemy.engine.Engine [cached since 1489s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 47, 50, 168991, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:47:50,248 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:47:50,248 INFO sqlalchemy.engine.Engine [cached since 1489s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 47, 50, 246578, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:47:50,256 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:47:50,256 INFO sqlalchemy.engine.Engine [cached since 300.6s ago] ('supreme',)
2026-02-11 00:47:50,263 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:47:50,263 INFO sqlalchemy.engine.Engine [cached since 300.6s ago] (2,)
2026-02-11 00:47:50,268 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52912 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:48:00,168 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:48:00,179 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:48:00,180 INFO sqlalchemy.engine.Engine [cached since 1499s ago] ('Bagong99',)
2026-02-11 00:48:00,188 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:48:00,188 INFO sqlalchemy.engine.Engine [cached since 1499s ago] (2,)
2026-02-11 00:48:00,194 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:48:00,195 INFO sqlalchemy.engine.Engine [cached since 1499s ago] ('active', 2)
2026-02-11 00:48:00,201 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:48:00,202 INFO sqlalchemy.engine.Engine [cached since 1499s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:48:00,209 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:00,209 INFO sqlalchemy.engine.Engine [cached since 1499s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 0, 187139, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:00,217 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:00,217 INFO sqlalchemy.engine.Engine [cached since 1499s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 0, 187139, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:00,224 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:48:00,224 INFO sqlalchemy.engine.Engine [cached since 1499s ago] (2,)
2026-02-11 00:48:00,231 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:48:00,232 INFO sqlalchemy.engine.Engine [cached since 1499s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 0, 187139, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:00,238 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:48:00,239 INFO sqlalchemy.engine.Engine [cached since 1499s ago] ('pending', 'running', 2, 10)
2026-02-11 00:48:00,246 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:48:00,246 INFO sqlalchemy.engine.Engine [cached since 1499s ago] (2,)
2026-02-11 00:48:00,252 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:00,252 INFO sqlalchemy.engine.Engine [cached since 1499s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 0, 187139, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:00,260 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:48:00,260 INFO sqlalchemy.engine.Engine [cached since 1499s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 48, 0, 259502, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:48:00,268 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:48:00,268 INFO sqlalchemy.engine.Engine [cached since 310.7s ago] ('supreme',)
2026-02-11 00:48:00,275 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:48:00,275 INFO sqlalchemy.engine.Engine [cached since 310.6s ago] (2,)
2026-02-11 00:48:00,282 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52949 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:48:10,186 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:48:10,188 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:48:10,188 INFO sqlalchemy.engine.Engine [cached since 1509s ago] ('Bagong99',)
2026-02-11 00:48:10,195 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:48:10,195 INFO sqlalchemy.engine.Engine [cached since 1509s ago] (2,)
2026-02-11 00:48:10,201 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:48:10,201 INFO sqlalchemy.engine.Engine [cached since 1509s ago] ('active', 2)
2026-02-11 00:48:10,208 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:48:10,208 INFO sqlalchemy.engine.Engine [cached since 1509s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:48:10,214 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:10,214 INFO sqlalchemy.engine.Engine [cached since 1509s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 10, 194134, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:10,221 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:10,221 INFO sqlalchemy.engine.Engine [cached since 1509s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 10, 194134, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:10,228 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:48:10,229 INFO sqlalchemy.engine.Engine [cached since 1509s ago] (2,)
2026-02-11 00:48:10,236 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:48:10,236 INFO sqlalchemy.engine.Engine [cached since 1509s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 10, 194134, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:10,244 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:48:10,244 INFO sqlalchemy.engine.Engine [cached since 1509s ago] ('pending', 'running', 2, 10)
2026-02-11 00:48:10,252 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:48:10,252 INFO sqlalchemy.engine.Engine [cached since 1509s ago] (2,)
2026-02-11 00:48:10,258 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:10,258 INFO sqlalchemy.engine.Engine [cached since 1509s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 10, 194134, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:10,267 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:48:10,267 INFO sqlalchemy.engine.Engine [cached since 1509s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 48, 10, 265619, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:48:10,289 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:48:10,289 INFO sqlalchemy.engine.Engine [cached since 320.7s ago] ('supreme',)
2026-02-11 00:48:10,296 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:48:10,296 INFO sqlalchemy.engine.Engine [cached since 320.7s ago] (2,)
2026-02-11 00:48:10,304 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52969 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:48:20,212 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:48:20,215 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:48:20,215 INFO sqlalchemy.engine.Engine [cached since 1519s ago] ('Bagong99',)
2026-02-11 00:48:20,223 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:48:20,223 INFO sqlalchemy.engine.Engine [cached since 1519s ago] (2,)
2026-02-11 00:48:20,229 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:48:20,230 INFO sqlalchemy.engine.Engine [cached since 1519s ago] ('active', 2)
2026-02-11 00:48:20,236 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:48:20,237 INFO sqlalchemy.engine.Engine [cached since 1519s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:48:20,243 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:20,243 INFO sqlalchemy.engine.Engine [cached since 1519s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 20, 222253, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:20,249 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:20,249 INFO sqlalchemy.engine.Engine [cached since 1519s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 20, 222253, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:20,255 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:48:20,255 INFO sqlalchemy.engine.Engine [cached since 1519s ago] (2,)
2026-02-11 00:48:20,262 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:48:20,262 INFO sqlalchemy.engine.Engine [cached since 1519s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 20, 222253, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:20,268 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:48:20,269 INFO sqlalchemy.engine.Engine [cached since 1519s ago] ('pending', 'running', 2, 10)
2026-02-11 00:48:20,276 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:48:20,276 INFO sqlalchemy.engine.Engine [cached since 1519s ago] (2,)
2026-02-11 00:48:20,282 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:20,282 INFO sqlalchemy.engine.Engine [cached since 1519s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 20, 222253, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:20,290 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:48:20,290 INFO sqlalchemy.engine.Engine [cached since 1519s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 48, 20, 289118, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:48:20,297 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:48:20,297 INFO sqlalchemy.engine.Engine [cached since 330.7s ago] ('supreme',)
2026-02-11 00:48:20,305 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:48:20,305 INFO sqlalchemy.engine.Engine [cached since 330.7s ago] (2,)
2026-02-11 00:48:20,311 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52987 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:48:30,168 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:48:30,168 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:48:30,168 INFO sqlalchemy.engine.Engine [cached since 1529s ago] ('Bagong99',)
2026-02-11 00:48:30,176 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:48:30,176 INFO sqlalchemy.engine.Engine [cached since 1528s ago] (2,)
2026-02-11 00:48:30,182 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:48:30,182 INFO sqlalchemy.engine.Engine [cached since 1529s ago] ('active', 2)
2026-02-11 00:48:30,189 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:48:30,189 INFO sqlalchemy.engine.Engine [cached since 1529s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:48:30,195 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:30,195 INFO sqlalchemy.engine.Engine [cached since 1529s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 30, 175373, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:30,201 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:30,201 INFO sqlalchemy.engine.Engine [cached since 1529s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 30, 175373, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:30,207 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:48:30,207 INFO sqlalchemy.engine.Engine [cached since 1529s ago] (2,)
2026-02-11 00:48:30,212 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:48:30,212 INFO sqlalchemy.engine.Engine [cached since 1529s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 30, 175373, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:30,218 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:48:30,218 INFO sqlalchemy.engine.Engine [cached since 1529s ago] ('pending', 'running', 2, 10)
2026-02-11 00:48:30,235 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:48:30,235 INFO sqlalchemy.engine.Engine [cached since 1529s ago] (2,)
2026-02-11 00:48:30,241 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:30,241 INFO sqlalchemy.engine.Engine [cached since 1529s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 30, 175373, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:30,250 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:48:30,250 INFO sqlalchemy.engine.Engine [cached since 1529s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 48, 30, 249004, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:48:30,257 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:48:30,257 INFO sqlalchemy.engine.Engine [cached since 340.6s ago] ('supreme',)
2026-02-11 00:48:30,264 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:48:30,264 INFO sqlalchemy.engine.Engine [cached since 340.6s ago] (2,)
2026-02-11 00:48:30,270 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53002 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: POST /api/v1/accounts/auth/login
2026-02-11 00:48:36,307 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:48:36,308 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:48:36,309 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('Bagong99',)
2026-02-11 00:48:36,342 INFO sqlalchemy.engine.Engine UPDATE users SET last_jti=%s WHERE users.id = %s
2026-02-11 00:48:36,342 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('7473d160-2bcc-47e9-8d03-42f3a3e755c1', 2)
2026-02-11 00:48:36,349 INFO sqlalchemy.engine.Engine COMMIT
âœ… Response: POST /api/v1/accounts/auth/login -> 200
INFO:     127.0.0.1:53013 - "POST /api/v1/accounts/auth/login HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:48:36,406 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:48:36,407 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:48:36,407 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('Bagong99',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:53013 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:48:36,413 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:48:36,457 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:48:36,458 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:48:36,458 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('Bagong99',)
2026-02-11 00:48:36,466 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:48:36,466 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (2,)
2026-02-11 00:48:36,472 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:48:36,472 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('active', 2)
2026-02-11 00:48:36,481 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:48:36,482 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:48:36,489 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:36,490 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 36, 465206, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:36,496 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:36,497 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 36, 465206, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:36,502 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:48:36,502 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (2,)
2026-02-11 00:48:36,508 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:48:36,508 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 36, 465206, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:36,513 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:48:36,513 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('pending', 'running', 2, 10)
2026-02-11 00:48:36,519 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:48:36,519 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (2,)
2026-02-11 00:48:36,525 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:36,526 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 36, 465206, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:36,533 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:48:36,534 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 48, 36, 532316, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:48:36,540 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:48:36,541 INFO sqlalchemy.engine.Engine [cached since 346.9s ago] ('supreme',)
2026-02-11 00:48:36,548 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:48:36,548 INFO sqlalchemy.engine.Engine [cached since 346.9s ago] (2,)
2026-02-11 00:48:36,554 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53013 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:48:36,663 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:48:36,663 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:48:36,663 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('Bagong99',)
2026-02-11 00:48:36,664 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:48:36,665 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:48:36,665 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('Bagong99',)
2026-02-11 00:48:36,668 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:48:36,668 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (2,)
2026-02-11 00:48:36,669 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:48:36,670 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (2,)
2026-02-11 00:48:36,672 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:48:36,672 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('active', 2)
2026-02-11 00:48:36,674 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:48:36,675 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('active', 2)
2026-02-11 00:48:36,677 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:48:36,678 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:48:36,679 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:48:36,679 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:48:36,683 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:36,683 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 36, 667832, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:36,685 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:36,685 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 36, 669477, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:36,690 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:36,690 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 36, 667832, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:36,692 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:36,692 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 36, 669477, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:36,694 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:48:36,695 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (2,)
2026-02-11 00:48:36,697 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:48:36,698 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (2,)
2026-02-11 00:48:36,700 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:48:36,700 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 36, 667832, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:36,702 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:48:36,702 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 36, 669477, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:36,706 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:48:36,707 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('pending', 'running', 2, 10)
2026-02-11 00:48:36,709 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:48:36,709 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('pending', 'running', 2, 10)
2026-02-11 00:48:36,714 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:48:36,714 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (2,)
2026-02-11 00:48:36,716 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:48:36,716 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (2,)
2026-02-11 00:48:36,718 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:36,719 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 36, 667832, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:36,720 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:36,720 INFO sqlalchemy.engine.Engine [cached since 1535s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 36, 669477, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:36,726 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:48:36,726 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 48, 36, 724850, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:48:36,727 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:48:36,727 INFO sqlalchemy.engine.Engine [cached since 1535s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 48, 36, 727184, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:48:36,732 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:48:36,732 INFO sqlalchemy.engine.Engine [cached since 347.1s ago] ('supreme',)
2026-02-11 00:48:36,734 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:48:36,734 INFO sqlalchemy.engine.Engine [cached since 347.1s ago] ('supreme',)
2026-02-11 00:48:36,738 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:48:36,738 INFO sqlalchemy.engine.Engine [cached since 347.1s ago] (2,)
2026-02-11 00:48:36,740 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:48:36,740 INFO sqlalchemy.engine.Engine [cached since 347.1s ago] (2,)
2026-02-11 00:48:36,742 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:48:36,745 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53025 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:53024 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:48:40,158 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:48:40,159 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:48:40,159 INFO sqlalchemy.engine.Engine [cached since 1539s ago] ('Bagong99',)
2026-02-11 00:48:40,164 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53045 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:48:46,746 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:48:46,747 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:48:46,748 INFO sqlalchemy.engine.Engine [cached since 1545s ago] ('Bagong99',)
2026-02-11 00:48:46,754 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:48:46,754 INFO sqlalchemy.engine.Engine [cached since 1545s ago] (2,)
2026-02-11 00:48:46,760 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:48:46,760 INFO sqlalchemy.engine.Engine [cached since 1545s ago] ('active', 2)
2026-02-11 00:48:46,766 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:48:46,766 INFO sqlalchemy.engine.Engine [cached since 1545s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:48:46,773 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:46,773 INFO sqlalchemy.engine.Engine [cached since 1545s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 46, 754060, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:46,779 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:46,779 INFO sqlalchemy.engine.Engine [cached since 1545s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 46, 754060, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:46,786 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:48:46,786 INFO sqlalchemy.engine.Engine [cached since 1545s ago] (2,)
2026-02-11 00:48:46,794 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:48:46,794 INFO sqlalchemy.engine.Engine [cached since 1545s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 46, 754060, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:46,801 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:48:46,802 INFO sqlalchemy.engine.Engine [cached since 1545s ago] ('pending', 'running', 2, 10)
2026-02-11 00:48:46,811 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:48:46,811 INFO sqlalchemy.engine.Engine [cached since 1545s ago] (2,)
2026-02-11 00:48:46,819 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:46,819 INFO sqlalchemy.engine.Engine [cached since 1545s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 46, 754060, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:46,828 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:48:46,828 INFO sqlalchemy.engine.Engine [cached since 1545s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 48, 46, 826893, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:48:46,836 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:48:46,836 INFO sqlalchemy.engine.Engine [cached since 357.2s ago] ('supreme',)
2026-02-11 00:48:46,843 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:48:46,843 INFO sqlalchemy.engine.Engine [cached since 357.2s ago] (2,)
2026-02-11 00:48:46,849 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53071 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:48:50,164 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:48:50,164 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:48:50,165 INFO sqlalchemy.engine.Engine [cached since 1549s ago] ('Bagong99',)
2026-02-11 00:48:50,170 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53080 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:48:56,657 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:48:56,658 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:48:56,658 INFO sqlalchemy.engine.Engine [cached since 1555s ago] ('Bagong99',)
2026-02-11 00:48:56,665 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:48:56,665 INFO sqlalchemy.engine.Engine [cached since 1555s ago] (2,)
2026-02-11 00:48:56,671 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:48:56,672 INFO sqlalchemy.engine.Engine [cached since 1555s ago] ('active', 2)
2026-02-11 00:48:56,676 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:48:56,676 INFO sqlalchemy.engine.Engine [cached since 1555s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:48:56,685 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:56,685 INFO sqlalchemy.engine.Engine [cached since 1555s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 56, 665024, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:56,693 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:56,693 INFO sqlalchemy.engine.Engine [cached since 1555s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 56, 665024, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:56,699 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:48:56,699 INFO sqlalchemy.engine.Engine [cached since 1555s ago] (2,)
2026-02-11 00:48:56,706 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:48:56,706 INFO sqlalchemy.engine.Engine [cached since 1555s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 56, 665024, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:56,713 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:48:56,713 INFO sqlalchemy.engine.Engine [cached since 1555s ago] ('pending', 'running', 2, 10)
2026-02-11 00:48:56,719 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:48:56,720 INFO sqlalchemy.engine.Engine [cached since 1555s ago] (2,)
2026-02-11 00:48:56,725 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:48:56,725 INFO sqlalchemy.engine.Engine [cached since 1555s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 48, 56, 665024, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:48:56,732 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:48:56,733 INFO sqlalchemy.engine.Engine [cached since 1555s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 48, 56, 731600, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:48:56,739 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:48:56,740 INFO sqlalchemy.engine.Engine [cached since 367.1s ago] ('supreme',)
2026-02-11 00:48:56,745 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:48:56,745 INFO sqlalchemy.engine.Engine [cached since 367.1s ago] (2,)
2026-02-11 00:48:56,751 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53093 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:49:00,167 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:49:00,167 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:49:00,167 INFO sqlalchemy.engine.Engine [cached since 1559s ago] ('Bagong99',)
2026-02-11 00:49:00,174 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53103 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53120 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:49:10,163 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:49:10,165 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:49:10,165 INFO sqlalchemy.engine.Engine [cached since 1569s ago] ('Bagong99',)
2026-02-11 00:49:10,171 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53143 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53155 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:49:20,163 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:49:20,163 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:49:20,164 INFO sqlalchemy.engine.Engine [cached since 1579s ago] ('Bagong99',)
2026-02-11 00:49:20,168 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53164 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53190 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:49:30,163 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:49:30,164 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:49:30,164 INFO sqlalchemy.engine.Engine [cached since 1589s ago] ('Bagong99',)
2026-02-11 00:49:30,169 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53195 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53207 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:49:40,157 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:49:40,158 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:49:40,158 INFO sqlalchemy.engine.Engine [cached since 1599s ago] ('Bagong99',)
2026-02-11 00:49:40,162 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53213 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53229 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:49:50,165 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:49:50,167 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:49:50,167 INFO sqlalchemy.engine.Engine [cached since 1609s ago] ('Bagong99',)
2026-02-11 00:49:50,174 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53234 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53247 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:50:00,167 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:00,167 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:00,168 INFO sqlalchemy.engine.Engine [cached since 1619s ago] ('Bagong99',)
2026-02-11 00:50:00,174 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53254 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: POST /api/v1/accounts/auth/login
2026-02-11 00:50:02,414 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:02,415 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:02,415 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('Bagong99',)
2026-02-11 00:50:02,447 INFO sqlalchemy.engine.Engine UPDATE users SET last_jti=%s WHERE users.id = %s
2026-02-11 00:50:02,447 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('b3790904-6aaf-4876-9951-4ef616b8a7fb', 2)
2026-02-11 00:50:02,452 INFO sqlalchemy.engine.Engine COMMIT
âœ… Response: POST /api/v1/accounts/auth/login -> 200
INFO:     127.0.0.1:53270 - "POST /api/v1/accounts/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:53270 - "OPTIONS /api/v1/accounts/auth/me HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:50:02,509 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:02,510 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:02,510 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('Bagong99',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:53270 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:50:02,519 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53270 - "OPTIONS /api/v1/dashboard/stats HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:50:02,565 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:02,566 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:02,566 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('Bagong99',)
2026-02-11 00:50:02,577 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:50:02,577 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (2,)
2026-02-11 00:50:02,583 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:50:02,584 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('active', 2)
2026-02-11 00:50:02,591 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:50:02,592 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:50:02,598 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:02,598 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 2, 575559, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:02,606 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:02,607 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 2, 575559, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:02,613 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:50:02,613 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (2,)
2026-02-11 00:50:02,619 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:50:02,619 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 2, 575559, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:02,625 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:50:02,626 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('pending', 'running', 2, 10)
2026-02-11 00:50:02,638 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:50:02,638 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (2,)
2026-02-11 00:50:02,644 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:02,644 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 2, 575559, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:02,656 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:50:02,657 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 50, 2, 654905, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:50:02,674 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:50:02,674 INFO sqlalchemy.engine.Engine [cached since 433.1s ago] ('supreme',)
2026-02-11 00:50:02,684 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:50:02,684 INFO sqlalchemy.engine.Engine [cached since 433.1s ago] (2,)
2026-02-11 00:50:02,694 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53270 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
INFO:     127.0.0.1:53279 - "OPTIONS /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:50:02,780 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:02,781 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:02,781 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('Bagong99',)
2026-02-11 00:50:02,783 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:02,784 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:02,784 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('Bagong99',)
2026-02-11 00:50:02,787 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:50:02,788 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (2,)
2026-02-11 00:50:02,790 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:50:02,790 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (2,)
2026-02-11 00:50:02,794 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:50:02,794 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('active', 2)
2026-02-11 00:50:02,795 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:50:02,796 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('active', 2)
2026-02-11 00:50:02,801 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:50:02,801 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:50:02,802 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:50:02,802 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:50:02,807 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:02,808 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 2, 786668, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:02,809 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:02,809 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 2, 789745, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:02,815 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:02,815 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 2, 786668, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:02,818 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:02,818 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 2, 789745, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:02,823 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:50:02,824 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (2,)
2026-02-11 00:50:02,825 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:50:02,825 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (2,)
2026-02-11 00:50:02,829 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:50:02,830 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 2, 786668, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:02,831 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:50:02,831 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 2, 789745, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:02,835 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:50:02,835 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('pending', 'running', 2, 10)
2026-02-11 00:50:02,837 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:50:02,837 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('pending', 'running', 2, 10)
2026-02-11 00:50:02,840 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:50:02,840 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (2,)
2026-02-11 00:50:02,842 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:50:02,842 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (2,)
2026-02-11 00:50:02,846 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:02,847 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 2, 786668, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:02,849 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:02,849 INFO sqlalchemy.engine.Engine [cached since 1621s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 2, 789745, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:02,859 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:50:02,860 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 50, 2, 858494, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:50:02,863 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:50:02,864 INFO sqlalchemy.engine.Engine [cached since 1621s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 50, 2, 862371, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:50:02,869 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:50:02,869 INFO sqlalchemy.engine.Engine [cached since 433.3s ago] ('supreme',)
2026-02-11 00:50:02,871 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:50:02,872 INFO sqlalchemy.engine.Engine [cached since 433.3s ago] ('supreme',)
2026-02-11 00:50:02,877 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:50:02,878 INFO sqlalchemy.engine.Engine [cached since 433.3s ago] (2,)
2026-02-11 00:50:02,880 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:50:02,880 INFO sqlalchemy.engine.Engine [cached since 433.3s ago] (2,)
2026-02-11 00:50:02,889 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:50:02,891 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53278 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:53279 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:50:10,160 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:10,161 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:10,162 INFO sqlalchemy.engine.Engine [cached since 1629s ago] ('Bagong99',)
2026-02-11 00:50:10,167 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53303 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:50:12,767 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:12,768 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:12,768 INFO sqlalchemy.engine.Engine [cached since 1631s ago] ('Bagong99',)
2026-02-11 00:50:12,773 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:50:12,774 INFO sqlalchemy.engine.Engine [cached since 1631s ago] (2,)
2026-02-11 00:50:12,779 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:50:12,779 INFO sqlalchemy.engine.Engine [cached since 1631s ago] ('active', 2)
2026-02-11 00:50:12,785 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:50:12,786 INFO sqlalchemy.engine.Engine [cached since 1631s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:50:12,792 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:12,793 INFO sqlalchemy.engine.Engine [cached since 1631s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 12, 772829, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:12,798 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:12,798 INFO sqlalchemy.engine.Engine [cached since 1631s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 12, 772829, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:12,803 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:50:12,803 INFO sqlalchemy.engine.Engine [cached since 1631s ago] (2,)
2026-02-11 00:50:12,808 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:50:12,809 INFO sqlalchemy.engine.Engine [cached since 1631s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 12, 772829, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:12,814 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:50:12,814 INFO sqlalchemy.engine.Engine [cached since 1631s ago] ('pending', 'running', 2, 10)
2026-02-11 00:50:12,822 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:50:12,823 INFO sqlalchemy.engine.Engine [cached since 1631s ago] (2,)
2026-02-11 00:50:12,829 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:12,829 INFO sqlalchemy.engine.Engine [cached since 1631s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 12, 772829, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:12,836 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:50:12,837 INFO sqlalchemy.engine.Engine [cached since 1631s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 50, 12, 835383, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:50:12,844 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:50:12,844 INFO sqlalchemy.engine.Engine [cached since 443.2s ago] ('supreme',)
2026-02-11 00:50:12,850 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:50:12,851 INFO sqlalchemy.engine.Engine [cached since 443.2s ago] (2,)
2026-02-11 00:50:12,856 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53309 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /health
âœ… Response: GET /health -> 200
INFO:     127.0.0.1:53296 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:53334 - "OPTIONS /api/v1/accounts/auth/sso-token HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
ðŸ” Incoming: GET /api/v1/accounts/auth/sso-token
2026-02-11 00:50:19,758 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:19,758 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:19,758 INFO sqlalchemy.engine.Engine [cached since 1638s ago] ('Bagong99',)
2026-02-11 00:50:19,759 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:19,759 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:19,759 INFO sqlalchemy.engine.Engine [cached since 1638s ago] ('Bagong99',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:53335 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:50:19,763 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/accounts/auth/sso-token -> 200
INFO:     127.0.0.1:53334 - "GET /api/v1/accounts/auth/sso-token HTTP/1.1" 200 OK
2026-02-11 00:50:19,768 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:50:20,168 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:20,169 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:20,169 INFO sqlalchemy.engine.Engine [cached since 1639s ago] ('Bagong99',)
2026-02-11 00:50:20,176 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53342 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:50:23,008 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:23,009 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:23,009 INFO sqlalchemy.engine.Engine [cached since 1641s ago] ('Bagong99',)
2026-02-11 00:50:23,025 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:50:23,026 INFO sqlalchemy.engine.Engine [cached since 1641s ago] (2,)
2026-02-11 00:50:23,033 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:50:23,033 INFO sqlalchemy.engine.Engine [cached since 1641s ago] ('active', 2)
2026-02-11 00:50:23,038 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:50:23,039 INFO sqlalchemy.engine.Engine [cached since 1641s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:50:23,044 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:23,044 INFO sqlalchemy.engine.Engine [cached since 1641s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 23, 24421, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:23,051 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:23,051 INFO sqlalchemy.engine.Engine [cached since 1641s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 23, 24421, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:23,057 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:50:23,058 INFO sqlalchemy.engine.Engine [cached since 1641s ago] (2,)
2026-02-11 00:50:23,063 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:50:23,063 INFO sqlalchemy.engine.Engine [cached since 1641s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 23, 24421, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:23,073 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:50:23,074 INFO sqlalchemy.engine.Engine [cached since 1641s ago] ('pending', 'running', 2, 10)
2026-02-11 00:50:23,082 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:50:23,082 INFO sqlalchemy.engine.Engine [cached since 1641s ago] (2,)
2026-02-11 00:50:23,089 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:23,089 INFO sqlalchemy.engine.Engine [cached since 1641s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 23, 24421, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:23,098 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:50:23,098 INFO sqlalchemy.engine.Engine [cached since 1641s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 50, 23, 97124, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:50:23,105 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:50:23,105 INFO sqlalchemy.engine.Engine [cached since 453.5s ago] ('supreme',)
2026-02-11 00:50:23,123 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:50:23,123 INFO sqlalchemy.engine.Engine [cached since 453.5s ago] (2,)
2026-02-11 00:50:23,129 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53334 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:50:30,170 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:30,171 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:30,172 INFO sqlalchemy.engine.Engine [cached since 1649s ago] ('Bagong99',)
2026-02-11 00:50:30,178 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53359 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:50:33,018 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:33,019 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:33,019 INFO sqlalchemy.engine.Engine [cached since 1651s ago] ('Bagong99',)
2026-02-11 00:50:33,035 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:50:33,035 INFO sqlalchemy.engine.Engine [cached since 1651s ago] (2,)
2026-02-11 00:50:33,041 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:50:33,041 INFO sqlalchemy.engine.Engine [cached since 1651s ago] ('active', 2)
2026-02-11 00:50:33,047 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:50:33,048 INFO sqlalchemy.engine.Engine [cached since 1651s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:50:33,054 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:33,054 INFO sqlalchemy.engine.Engine [cached since 1651s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 33, 34402, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:33,060 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:33,060 INFO sqlalchemy.engine.Engine [cached since 1651s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 33, 34402, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:33,067 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:50:33,068 INFO sqlalchemy.engine.Engine [cached since 1651s ago] (2,)
2026-02-11 00:50:33,075 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:50:33,075 INFO sqlalchemy.engine.Engine [cached since 1651s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 33, 34402, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:33,082 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:50:33,083 INFO sqlalchemy.engine.Engine [cached since 1651s ago] ('pending', 'running', 2, 10)
2026-02-11 00:50:33,092 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:50:33,092 INFO sqlalchemy.engine.Engine [cached since 1651s ago] (2,)
2026-02-11 00:50:33,098 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:33,098 INFO sqlalchemy.engine.Engine [cached since 1651s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 33, 34402, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:33,106 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:50:33,106 INFO sqlalchemy.engine.Engine [cached since 1651s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 50, 33, 104992, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:50:33,113 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:50:33,113 INFO sqlalchemy.engine.Engine [cached since 463.5s ago] ('supreme',)
2026-02-11 00:50:33,122 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:50:33,122 INFO sqlalchemy.engine.Engine [cached since 463.5s ago] (2,)
2026-02-11 00:50:33,129 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53365 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:50:40,170 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:40,171 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:40,171 INFO sqlalchemy.engine.Engine [cached since 1659s ago] ('Bagong99',)
2026-02-11 00:50:40,187 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53378 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:50:42,997 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:42,998 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:42,998 INFO sqlalchemy.engine.Engine [cached since 1661s ago] ('Bagong99',)
2026-02-11 00:50:43,003 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:50:43,004 INFO sqlalchemy.engine.Engine [cached since 1661s ago] (2,)
2026-02-11 00:50:43,009 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:50:43,009 INFO sqlalchemy.engine.Engine [cached since 1661s ago] ('active', 2)
2026-02-11 00:50:43,013 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:50:43,014 INFO sqlalchemy.engine.Engine [cached since 1661s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:50:43,019 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:43,019 INFO sqlalchemy.engine.Engine [cached since 1661s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 43, 3177, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:43,025 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:43,025 INFO sqlalchemy.engine.Engine [cached since 1661s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 43, 3177, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:43,029 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:50:43,029 INFO sqlalchemy.engine.Engine [cached since 1661s ago] (2,)
2026-02-11 00:50:43,034 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:50:43,034 INFO sqlalchemy.engine.Engine [cached since 1661s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 43, 3177, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:43,039 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:50:43,039 INFO sqlalchemy.engine.Engine [cached since 1661s ago] ('pending', 'running', 2, 10)
2026-02-11 00:50:43,045 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:50:43,045 INFO sqlalchemy.engine.Engine [cached since 1661s ago] (2,)
2026-02-11 00:50:43,051 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:43,051 INFO sqlalchemy.engine.Engine [cached since 1661s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 43, 3177, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:43,058 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:50:43,059 INFO sqlalchemy.engine.Engine [cached since 1661s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 50, 43, 57670, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:50:43,067 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:50:43,067 INFO sqlalchemy.engine.Engine [cached since 473.5s ago] ('supreme',)
2026-02-11 00:50:43,073 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:50:43,073 INFO sqlalchemy.engine.Engine [cached since 473.4s ago] (2,)
2026-02-11 00:50:43,078 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53389 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:50:50,170 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:50,171 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:50,171 INFO sqlalchemy.engine.Engine [cached since 1669s ago] ('Bagong99',)
2026-02-11 00:50:50,177 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53402 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:50:53,002 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:50:53,003 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:50:53,003 INFO sqlalchemy.engine.Engine [cached since 1671s ago] ('Bagong99',)
2026-02-11 00:50:53,013 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:50:53,013 INFO sqlalchemy.engine.Engine [cached since 1671s ago] (2,)
2026-02-11 00:50:53,018 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:50:53,018 INFO sqlalchemy.engine.Engine [cached since 1671s ago] ('active', 2)
2026-02-11 00:50:53,025 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:50:53,025 INFO sqlalchemy.engine.Engine [cached since 1671s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:50:53,031 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:53,031 INFO sqlalchemy.engine.Engine [cached since 1671s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 53, 12931, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:53,038 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:53,038 INFO sqlalchemy.engine.Engine [cached since 1671s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 53, 12931, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:53,044 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:50:53,044 INFO sqlalchemy.engine.Engine [cached since 1671s ago] (2,)
2026-02-11 00:50:53,050 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:50:53,050 INFO sqlalchemy.engine.Engine [cached since 1671s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 53, 12931, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:53,056 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:50:53,056 INFO sqlalchemy.engine.Engine [cached since 1671s ago] ('pending', 'running', 2, 10)
2026-02-11 00:50:53,064 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:50:53,064 INFO sqlalchemy.engine.Engine [cached since 1671s ago] (2,)
2026-02-11 00:50:53,071 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:50:53,072 INFO sqlalchemy.engine.Engine [cached since 1671s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 50, 53, 12931, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:50:53,079 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:50:53,079 INFO sqlalchemy.engine.Engine [cached since 1671s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 50, 53, 78201, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:50:53,086 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:50:53,086 INFO sqlalchemy.engine.Engine [cached since 483.5s ago] ('supreme',)
2026-02-11 00:50:53,093 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:50:53,093 INFO sqlalchemy.engine.Engine [cached since 483.5s ago] (2,)
2026-02-11 00:50:53,099 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53412 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:51:00,168 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:51:00,169 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:51:00,169 INFO sqlalchemy.engine.Engine [cached since 1679s ago] ('Bagong99',)
2026-02-11 00:51:00,175 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53425 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:51:03,007 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:51:03,008 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:51:03,008 INFO sqlalchemy.engine.Engine [cached since 1681s ago] ('Bagong99',)
2026-02-11 00:51:03,016 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:51:03,016 INFO sqlalchemy.engine.Engine [cached since 1681s ago] (2,)
2026-02-11 00:51:03,021 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:51:03,021 INFO sqlalchemy.engine.Engine [cached since 1681s ago] ('active', 2)
2026-02-11 00:51:03,026 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:51:03,026 INFO sqlalchemy.engine.Engine [cached since 1681s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:51:03,032 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:03,032 INFO sqlalchemy.engine.Engine [cached since 1681s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 3, 14980, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:03,038 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:03,039 INFO sqlalchemy.engine.Engine [cached since 1681s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 3, 14980, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:03,045 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:51:03,046 INFO sqlalchemy.engine.Engine [cached since 1681s ago] (2,)
2026-02-11 00:51:03,051 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:51:03,051 INFO sqlalchemy.engine.Engine [cached since 1681s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 3, 14980, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:03,058 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:51:03,058 INFO sqlalchemy.engine.Engine [cached since 1681s ago] ('pending', 'running', 2, 10)
2026-02-11 00:51:03,066 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:51:03,066 INFO sqlalchemy.engine.Engine [cached since 1681s ago] (2,)
2026-02-11 00:51:03,073 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:03,074 INFO sqlalchemy.engine.Engine [cached since 1681s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 3, 14980, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:03,084 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:51:03,085 INFO sqlalchemy.engine.Engine [cached since 1681s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 51, 3, 83043, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:51:03,092 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:51:03,092 INFO sqlalchemy.engine.Engine [cached since 493.5s ago] ('supreme',)
2026-02-11 00:51:03,101 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:51:03,101 INFO sqlalchemy.engine.Engine [cached since 493.5s ago] (2,)
2026-02-11 00:51:03,108 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53433 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:51:10,228 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:51:10,230 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:51:10,230 INFO sqlalchemy.engine.Engine [cached since 1689s ago] ('Bagong99',)
2026-02-11 00:51:10,236 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53447 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:51:13,000 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:51:13,002 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:51:13,002 INFO sqlalchemy.engine.Engine [cached since 1691s ago] ('Bagong99',)
2026-02-11 00:51:13,010 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:51:13,010 INFO sqlalchemy.engine.Engine [cached since 1691s ago] (2,)
2026-02-11 00:51:13,016 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:51:13,016 INFO sqlalchemy.engine.Engine [cached since 1691s ago] ('active', 2)
2026-02-11 00:51:13,023 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:51:13,023 INFO sqlalchemy.engine.Engine [cached since 1691s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:51:13,029 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:13,030 INFO sqlalchemy.engine.Engine [cached since 1691s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 13, 9320, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:13,036 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:13,036 INFO sqlalchemy.engine.Engine [cached since 1691s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 13, 9320, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:13,043 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:51:13,043 INFO sqlalchemy.engine.Engine [cached since 1691s ago] (2,)
2026-02-11 00:51:13,048 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:51:13,048 INFO sqlalchemy.engine.Engine [cached since 1691s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 13, 9320, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:13,068 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:51:13,069 INFO sqlalchemy.engine.Engine [cached since 1691s ago] ('pending', 'running', 2, 10)
2026-02-11 00:51:13,079 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:51:13,079 INFO sqlalchemy.engine.Engine [cached since 1691s ago] (2,)
2026-02-11 00:51:13,085 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:13,085 INFO sqlalchemy.engine.Engine [cached since 1691s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 13, 9320, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:13,091 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:51:13,092 INFO sqlalchemy.engine.Engine [cached since 1691s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 51, 13, 90886, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:51:13,098 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:51:13,098 INFO sqlalchemy.engine.Engine [cached since 503.5s ago] ('supreme',)
2026-02-11 00:51:13,103 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:51:13,103 INFO sqlalchemy.engine.Engine [cached since 503.5s ago] (2,)
2026-02-11 00:51:13,108 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53457 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:51:16,728 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:51:16,729 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:51:16,729 INFO sqlalchemy.engine.Engine [cached since 1695s ago] ('Bagong99',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:53474 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:51:16,737 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:51:16,785 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:51:16,785 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:51:16,785 INFO sqlalchemy.engine.Engine [cached since 1695s ago] ('Bagong99',)
2026-02-11 00:51:16,785 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:51:16,786 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:51:16,786 INFO sqlalchemy.engine.Engine [cached since 1695s ago] ('Bagong99',)
2026-02-11 00:51:16,808 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:51:16,808 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (2,)
2026-02-11 00:51:16,811 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:51:16,812 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (2,)
2026-02-11 00:51:16,818 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:51:16,819 INFO sqlalchemy.engine.Engine [cached since 1695s ago] ('active', 2)
2026-02-11 00:51:16,821 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:51:16,821 INFO sqlalchemy.engine.Engine [cached since 1695s ago] ('active', 2)
2026-02-11 00:51:16,824 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:51:16,824 INFO sqlalchemy.engine.Engine [cached since 1695s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:51:16,827 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:51:16,828 INFO sqlalchemy.engine.Engine [cached since 1695s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:51:16,830 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:16,830 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 16, 808008, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:16,833 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:16,834 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 16, 810678, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:16,839 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:16,839 INFO sqlalchemy.engine.Engine [cached since 1695s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 16, 808008, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:16,840 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:16,840 INFO sqlalchemy.engine.Engine [cached since 1695s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 16, 810678, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:16,845 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:51:16,845 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (2,)
2026-02-11 00:51:16,846 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:51:16,846 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (2,)
2026-02-11 00:51:16,850 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:51:16,850 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 16, 808008, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:16,853 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:51:16,853 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 16, 810678, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:16,856 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:51:16,856 INFO sqlalchemy.engine.Engine [cached since 1695s ago] ('pending', 'running', 2, 10)
2026-02-11 00:51:16,862 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:51:16,862 INFO sqlalchemy.engine.Engine [cached since 1695s ago] ('pending', 'running', 2, 10)
2026-02-11 00:51:16,864 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:51:16,864 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (2,)
2026-02-11 00:51:16,869 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:51:16,870 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (2,)
2026-02-11 00:51:16,871 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:16,871 INFO sqlalchemy.engine.Engine [cached since 1695s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 16, 808008, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:16,877 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:16,877 INFO sqlalchemy.engine.Engine [cached since 1695s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 16, 810678, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:16,879 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:51:16,879 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 51, 16, 878804, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:51:16,885 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:51:16,885 INFO sqlalchemy.engine.Engine [cached since 1695s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 51, 16, 884267, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:51:16,888 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:51:16,888 INFO sqlalchemy.engine.Engine [cached since 507.3s ago] ('supreme',)
2026-02-11 00:51:16,891 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:51:16,891 INFO sqlalchemy.engine.Engine [cached since 507.3s ago] ('supreme',)
2026-02-11 00:51:16,895 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:51:16,895 INFO sqlalchemy.engine.Engine [cached since 507.3s ago] (2,)
2026-02-11 00:51:16,900 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:51:16,900 INFO sqlalchemy.engine.Engine [cached since 507.3s ago] (2,)
2026-02-11 00:51:16,901 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:51:16,906 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53477 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:53474 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:51:20,170 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:51:20,171 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:51:20,171 INFO sqlalchemy.engine.Engine [cached since 1699s ago] ('Bagong99',)
2026-02-11 00:51:20,177 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53485 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:51:26,792 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:51:26,793 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:51:26,793 INFO sqlalchemy.engine.Engine [cached since 1705s ago] ('Bagong99',)
2026-02-11 00:51:26,801 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:51:26,801 INFO sqlalchemy.engine.Engine [cached since 1705s ago] (2,)
2026-02-11 00:51:26,807 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:51:26,807 INFO sqlalchemy.engine.Engine [cached since 1705s ago] ('active', 2)
2026-02-11 00:51:26,815 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:51:26,816 INFO sqlalchemy.engine.Engine [cached since 1705s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:51:26,822 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:26,823 INFO sqlalchemy.engine.Engine [cached since 1705s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 26, 800781, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:26,831 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:26,832 INFO sqlalchemy.engine.Engine [cached since 1705s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 26, 800781, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:26,839 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:51:26,839 INFO sqlalchemy.engine.Engine [cached since 1705s ago] (2,)
2026-02-11 00:51:26,845 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:51:26,845 INFO sqlalchemy.engine.Engine [cached since 1705s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 26, 800781, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:26,851 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:51:26,852 INFO sqlalchemy.engine.Engine [cached since 1705s ago] ('pending', 'running', 2, 10)
2026-02-11 00:51:26,859 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:51:26,859 INFO sqlalchemy.engine.Engine [cached since 1705s ago] (2,)
2026-02-11 00:51:26,867 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:26,867 INFO sqlalchemy.engine.Engine [cached since 1705s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 26, 800781, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:26,875 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:51:26,875 INFO sqlalchemy.engine.Engine [cached since 1705s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 51, 26, 874616, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:51:26,882 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:51:26,883 INFO sqlalchemy.engine.Engine [cached since 517.3s ago] ('supreme',)
2026-02-11 00:51:26,889 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:51:26,889 INFO sqlalchemy.engine.Engine [cached since 517.3s ago] (2,)
2026-02-11 00:51:26,896 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53511 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:51:30,178 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:51:30,179 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:51:30,179 INFO sqlalchemy.engine.Engine [cached since 1709s ago] ('Bagong99',)
2026-02-11 00:51:30,193 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53517 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:51:36,797 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:51:36,797 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:51:36,797 INFO sqlalchemy.engine.Engine [cached since 1715s ago] ('Bagong99',)
2026-02-11 00:51:36,803 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:51:36,803 INFO sqlalchemy.engine.Engine [cached since 1715s ago] (2,)
2026-02-11 00:51:36,810 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:51:36,810 INFO sqlalchemy.engine.Engine [cached since 1715s ago] ('active', 2)
2026-02-11 00:51:36,815 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:51:36,815 INFO sqlalchemy.engine.Engine [cached since 1715s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:51:36,822 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:36,822 INFO sqlalchemy.engine.Engine [cached since 1715s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 36, 802994, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:36,829 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:36,829 INFO sqlalchemy.engine.Engine [cached since 1715s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 36, 802994, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:36,835 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:51:36,835 INFO sqlalchemy.engine.Engine [cached since 1715s ago] (2,)
2026-02-11 00:51:36,844 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:51:36,844 INFO sqlalchemy.engine.Engine [cached since 1715s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 36, 802994, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:36,854 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:51:36,855 INFO sqlalchemy.engine.Engine [cached since 1715s ago] ('pending', 'running', 2, 10)
2026-02-11 00:51:36,865 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:51:36,866 INFO sqlalchemy.engine.Engine [cached since 1715s ago] (2,)
2026-02-11 00:51:36,872 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:36,872 INFO sqlalchemy.engine.Engine [cached since 1715s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 36, 802994, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:36,888 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:51:36,888 INFO sqlalchemy.engine.Engine [cached since 1715s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 51, 36, 887048, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:51:36,895 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:51:36,895 INFO sqlalchemy.engine.Engine [cached since 527.3s ago] ('supreme',)
2026-02-11 00:51:36,901 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:51:36,901 INFO sqlalchemy.engine.Engine [cached since 527.3s ago] (2,)
2026-02-11 00:51:36,907 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53528 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:51:40,161 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:51:40,162 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:51:40,162 INFO sqlalchemy.engine.Engine [cached since 1719s ago] ('Bagong99',)
2026-02-11 00:51:40,167 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53538 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:51:46,782 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:51:46,784 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:51:46,784 INFO sqlalchemy.engine.Engine [cached since 1725s ago] ('Bagong99',)
2026-02-11 00:51:46,793 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:51:46,793 INFO sqlalchemy.engine.Engine [cached since 1725s ago] (2,)
2026-02-11 00:51:46,799 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:51:46,799 INFO sqlalchemy.engine.Engine [cached since 1725s ago] ('active', 2)
2026-02-11 00:51:46,804 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:51:46,804 INFO sqlalchemy.engine.Engine [cached since 1725s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:51:46,809 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:46,809 INFO sqlalchemy.engine.Engine [cached since 1725s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 46, 792226, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:46,814 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:46,814 INFO sqlalchemy.engine.Engine [cached since 1725s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 46, 792226, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:46,817 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:51:46,817 INFO sqlalchemy.engine.Engine [cached since 1725s ago] (2,)
2026-02-11 00:51:46,824 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:51:46,825 INFO sqlalchemy.engine.Engine [cached since 1725s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 46, 792226, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:46,831 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:51:46,831 INFO sqlalchemy.engine.Engine [cached since 1725s ago] ('pending', 'running', 2, 10)
2026-02-11 00:51:46,840 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:51:46,841 INFO sqlalchemy.engine.Engine [cached since 1725s ago] (2,)
2026-02-11 00:51:46,846 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:46,846 INFO sqlalchemy.engine.Engine [cached since 1725s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 46, 792226, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:46,857 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:51:46,857 INFO sqlalchemy.engine.Engine [cached since 1725s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 51, 46, 856134, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:51:46,864 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:51:46,864 INFO sqlalchemy.engine.Engine [cached since 537.2s ago] ('supreme',)
2026-02-11 00:51:46,871 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:51:46,871 INFO sqlalchemy.engine.Engine [cached since 537.2s ago] (2,)
2026-02-11 00:51:46,875 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53552 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:51:50,169 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:51:50,170 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:51:50,170 INFO sqlalchemy.engine.Engine [cached since 1729s ago] ('Bagong99',)
2026-02-11 00:51:50,175 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53559 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:51:56,789 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:51:56,790 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:51:56,790 INFO sqlalchemy.engine.Engine [cached since 1735s ago] ('Bagong99',)
2026-02-11 00:51:56,798 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:51:56,798 INFO sqlalchemy.engine.Engine [cached since 1735s ago] (2,)
2026-02-11 00:51:56,805 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:51:56,805 INFO sqlalchemy.engine.Engine [cached since 1735s ago] ('active', 2)
2026-02-11 00:51:56,811 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:51:56,811 INFO sqlalchemy.engine.Engine [cached since 1735s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:51:56,817 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:56,817 INFO sqlalchemy.engine.Engine [cached since 1735s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 56, 797476, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:56,823 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:56,823 INFO sqlalchemy.engine.Engine [cached since 1735s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 56, 797476, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:56,829 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:51:56,829 INFO sqlalchemy.engine.Engine [cached since 1735s ago] (2,)
2026-02-11 00:51:56,835 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:51:56,835 INFO sqlalchemy.engine.Engine [cached since 1735s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 56, 797476, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:56,843 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:51:56,843 INFO sqlalchemy.engine.Engine [cached since 1735s ago] ('pending', 'running', 2, 10)
2026-02-11 00:51:56,850 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:51:56,850 INFO sqlalchemy.engine.Engine [cached since 1735s ago] (2,)
2026-02-11 00:51:56,856 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:51:56,857 INFO sqlalchemy.engine.Engine [cached since 1735s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 51, 56, 797476, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:51:56,864 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:51:56,864 INFO sqlalchemy.engine.Engine [cached since 1735s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 51, 56, 862989, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:51:56,871 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:51:56,872 INFO sqlalchemy.engine.Engine [cached since 547.3s ago] ('supreme',)
2026-02-11 00:51:56,879 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:51:56,879 INFO sqlalchemy.engine.Engine [cached since 547.3s ago] (2,)
2026-02-11 00:51:56,885 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53585 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:52:00,177 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:52:00,178 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:52:00,178 INFO sqlalchemy.engine.Engine [cached since 1739s ago] ('Bagong99',)
2026-02-11 00:52:00,193 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53593 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:52:06,792 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:52:06,793 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:52:06,793 INFO sqlalchemy.engine.Engine [cached since 1745s ago] ('Bagong99',)
2026-02-11 00:52:06,800 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:52:06,800 INFO sqlalchemy.engine.Engine [cached since 1745s ago] (2,)
2026-02-11 00:52:06,808 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:52:06,808 INFO sqlalchemy.engine.Engine [cached since 1745s ago] ('active', 2)
2026-02-11 00:52:06,821 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:52:06,822 INFO sqlalchemy.engine.Engine [cached since 1745s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:52:06,827 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:06,828 INFO sqlalchemy.engine.Engine [cached since 1745s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 6, 799102, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:06,834 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:06,834 INFO sqlalchemy.engine.Engine [cached since 1745s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 6, 799102, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:06,841 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:52:06,841 INFO sqlalchemy.engine.Engine [cached since 1745s ago] (2,)
2026-02-11 00:52:06,847 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:52:06,847 INFO sqlalchemy.engine.Engine [cached since 1745s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 6, 799102, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:06,853 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:52:06,854 INFO sqlalchemy.engine.Engine [cached since 1745s ago] ('pending', 'running', 2, 10)
2026-02-11 00:52:06,863 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:52:06,863 INFO sqlalchemy.engine.Engine [cached since 1745s ago] (2,)
2026-02-11 00:52:06,868 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:06,868 INFO sqlalchemy.engine.Engine [cached since 1745s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 6, 799102, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:06,876 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:52:06,876 INFO sqlalchemy.engine.Engine [cached since 1745s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 52, 6, 875016, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:52:06,885 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:52:06,886 INFO sqlalchemy.engine.Engine [cached since 557.3s ago] ('supreme',)
2026-02-11 00:52:06,893 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:52:06,893 INFO sqlalchemy.engine.Engine [cached since 557.3s ago] (2,)
2026-02-11 00:52:06,900 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53613 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:52:10,158 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:52:10,158 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:52:10,159 INFO sqlalchemy.engine.Engine [cached since 1749s ago] ('Bagong99',)
2026-02-11 00:52:10,165 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53621 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:52:16,786 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:52:16,787 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:52:16,787 INFO sqlalchemy.engine.Engine [cached since 1755s ago] ('Bagong99',)
2026-02-11 00:52:16,793 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:52:16,793 INFO sqlalchemy.engine.Engine [cached since 1755s ago] (2,)
2026-02-11 00:52:16,798 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:52:16,799 INFO sqlalchemy.engine.Engine [cached since 1755s ago] ('active', 2)
2026-02-11 00:52:16,804 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:52:16,804 INFO sqlalchemy.engine.Engine [cached since 1755s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:52:16,809 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:16,809 INFO sqlalchemy.engine.Engine [cached since 1755s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 16, 792331, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:16,814 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:16,815 INFO sqlalchemy.engine.Engine [cached since 1755s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 16, 792331, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:16,821 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:52:16,821 INFO sqlalchemy.engine.Engine [cached since 1755s ago] (2,)
2026-02-11 00:52:16,827 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:52:16,827 INFO sqlalchemy.engine.Engine [cached since 1755s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 16, 792331, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:16,833 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:52:16,833 INFO sqlalchemy.engine.Engine [cached since 1755s ago] ('pending', 'running', 2, 10)
2026-02-11 00:52:16,840 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:52:16,840 INFO sqlalchemy.engine.Engine [cached since 1755s ago] (2,)
2026-02-11 00:52:16,846 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:16,846 INFO sqlalchemy.engine.Engine [cached since 1755s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 16, 792331, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:16,855 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:52:16,855 INFO sqlalchemy.engine.Engine [cached since 1755s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 52, 16, 854716, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:52:16,862 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:52:16,862 INFO sqlalchemy.engine.Engine [cached since 567.2s ago] ('supreme',)
2026-02-11 00:52:16,867 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:52:16,867 INFO sqlalchemy.engine.Engine [cached since 567.2s ago] (2,)
2026-02-11 00:52:16,872 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53634 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:52:20,177 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:52:20,178 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:52:20,178 INFO sqlalchemy.engine.Engine [cached since 1759s ago] ('Bagong99',)
2026-02-11 00:52:20,186 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53641 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:52:26,788 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:52:26,788 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:52:26,788 INFO sqlalchemy.engine.Engine [cached since 1765s ago] ('Bagong99',)
2026-02-11 00:52:26,794 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:52:26,794 INFO sqlalchemy.engine.Engine [cached since 1765s ago] (2,)
2026-02-11 00:52:26,799 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:52:26,800 INFO sqlalchemy.engine.Engine [cached since 1765s ago] ('active', 2)
2026-02-11 00:52:26,805 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:52:26,805 INFO sqlalchemy.engine.Engine [cached since 1765s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:52:26,810 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:26,810 INFO sqlalchemy.engine.Engine [cached since 1765s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 26, 793355, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:26,816 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:26,816 INFO sqlalchemy.engine.Engine [cached since 1765s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 26, 793355, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:26,822 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:52:26,822 INFO sqlalchemy.engine.Engine [cached since 1765s ago] (2,)
2026-02-11 00:52:26,827 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:52:26,828 INFO sqlalchemy.engine.Engine [cached since 1765s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 26, 793355, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:26,844 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:52:26,844 INFO sqlalchemy.engine.Engine [cached since 1765s ago] ('pending', 'running', 2, 10)
2026-02-11 00:52:26,850 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:52:26,851 INFO sqlalchemy.engine.Engine [cached since 1765s ago] (2,)
2026-02-11 00:52:26,855 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:26,855 INFO sqlalchemy.engine.Engine [cached since 1765s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 26, 793355, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:26,862 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:52:26,863 INFO sqlalchemy.engine.Engine [cached since 1765s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 52, 26, 861253, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:52:26,869 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:52:26,869 INFO sqlalchemy.engine.Engine [cached since 577.3s ago] ('supreme',)
2026-02-11 00:52:26,875 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:52:26,875 INFO sqlalchemy.engine.Engine [cached since 577.2s ago] (2,)
2026-02-11 00:52:26,881 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53653 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:52:30,166 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:52:30,167 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:52:30,167 INFO sqlalchemy.engine.Engine [cached since 1769s ago] ('Bagong99',)
2026-02-11 00:52:30,174 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53659 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:52:36,797 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:52:36,797 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:52:36,797 INFO sqlalchemy.engine.Engine [cached since 1775s ago] ('Bagong99',)
2026-02-11 00:52:36,804 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:52:36,804 INFO sqlalchemy.engine.Engine [cached since 1775s ago] (2,)
2026-02-11 00:52:36,810 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:52:36,810 INFO sqlalchemy.engine.Engine [cached since 1775s ago] ('active', 2)
2026-02-11 00:52:36,817 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:52:36,817 INFO sqlalchemy.engine.Engine [cached since 1775s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:52:36,824 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:36,824 INFO sqlalchemy.engine.Engine [cached since 1775s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 36, 803628, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:36,831 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:36,831 INFO sqlalchemy.engine.Engine [cached since 1775s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 36, 803628, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:36,839 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:52:36,839 INFO sqlalchemy.engine.Engine [cached since 1775s ago] (2,)
2026-02-11 00:52:36,847 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:52:36,847 INFO sqlalchemy.engine.Engine [cached since 1775s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 36, 803628, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:36,855 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:52:36,855 INFO sqlalchemy.engine.Engine [cached since 1775s ago] ('pending', 'running', 2, 10)
2026-02-11 00:52:36,866 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:52:36,866 INFO sqlalchemy.engine.Engine [cached since 1775s ago] (2,)
2026-02-11 00:52:36,873 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:36,873 INFO sqlalchemy.engine.Engine [cached since 1775s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 36, 803628, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:36,881 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:52:36,881 INFO sqlalchemy.engine.Engine [cached since 1775s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 52, 36, 880448, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:52:36,888 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:52:36,888 INFO sqlalchemy.engine.Engine [cached since 587.3s ago] ('supreme',)
2026-02-11 00:52:36,895 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:52:36,896 INFO sqlalchemy.engine.Engine [cached since 587.3s ago] (2,)
2026-02-11 00:52:36,904 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53672 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:52:40,158 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:52:40,159 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:52:40,159 INFO sqlalchemy.engine.Engine [cached since 1779s ago] ('Bagong99',)
2026-02-11 00:52:40,165 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53679 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:52:46,784 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:52:46,785 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:52:46,785 INFO sqlalchemy.engine.Engine [cached since 1785s ago] ('Bagong99',)
2026-02-11 00:52:46,792 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:52:46,792 INFO sqlalchemy.engine.Engine [cached since 1785s ago] (2,)
2026-02-11 00:52:46,797 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:52:46,797 INFO sqlalchemy.engine.Engine [cached since 1785s ago] ('active', 2)
2026-02-11 00:52:46,803 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:52:46,803 INFO sqlalchemy.engine.Engine [cached since 1785s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:52:46,808 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:46,808 INFO sqlalchemy.engine.Engine [cached since 1785s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 46, 791038, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:46,813 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:46,813 INFO sqlalchemy.engine.Engine [cached since 1785s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 46, 791038, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:46,818 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:52:46,818 INFO sqlalchemy.engine.Engine [cached since 1785s ago] (2,)
2026-02-11 00:52:46,824 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:52:46,824 INFO sqlalchemy.engine.Engine [cached since 1785s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 46, 791038, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:46,828 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:52:46,828 INFO sqlalchemy.engine.Engine [cached since 1785s ago] ('pending', 'running', 2, 10)
2026-02-11 00:52:46,834 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:52:46,834 INFO sqlalchemy.engine.Engine [cached since 1785s ago] (2,)
2026-02-11 00:52:46,839 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:46,840 INFO sqlalchemy.engine.Engine [cached since 1785s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 46, 791038, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:46,847 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:52:46,847 INFO sqlalchemy.engine.Engine [cached since 1785s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 52, 46, 846042, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:52:46,853 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:52:46,854 INFO sqlalchemy.engine.Engine [cached since 597.2s ago] ('supreme',)
2026-02-11 00:52:46,860 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:52:46,860 INFO sqlalchemy.engine.Engine [cached since 597.2s ago] (2,)
2026-02-11 00:52:46,865 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53695 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:52:50,169 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:52:50,171 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:52:50,171 INFO sqlalchemy.engine.Engine [cached since 1789s ago] ('Bagong99',)
2026-02-11 00:52:50,177 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53701 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:52:56,800 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:52:56,801 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:52:56,801 INFO sqlalchemy.engine.Engine [cached since 1795s ago] ('Bagong99',)
2026-02-11 00:52:56,809 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:52:56,809 INFO sqlalchemy.engine.Engine [cached since 1795s ago] (2,)
2026-02-11 00:52:56,816 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:52:56,817 INFO sqlalchemy.engine.Engine [cached since 1795s ago] ('active', 2)
2026-02-11 00:52:56,823 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:52:56,823 INFO sqlalchemy.engine.Engine [cached since 1795s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:52:56,830 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:56,830 INFO sqlalchemy.engine.Engine [cached since 1795s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 56, 808343, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:56,837 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:56,838 INFO sqlalchemy.engine.Engine [cached since 1795s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 56, 808343, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:56,844 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:52:56,844 INFO sqlalchemy.engine.Engine [cached since 1795s ago] (2,)
2026-02-11 00:52:56,851 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:52:56,851 INFO sqlalchemy.engine.Engine [cached since 1795s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 56, 808343, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:56,857 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:52:56,858 INFO sqlalchemy.engine.Engine [cached since 1795s ago] ('pending', 'running', 2, 10)
2026-02-11 00:52:56,865 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:52:56,865 INFO sqlalchemy.engine.Engine [cached since 1795s ago] (2,)
2026-02-11 00:52:56,871 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:52:56,872 INFO sqlalchemy.engine.Engine [cached since 1795s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 52, 56, 808343, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:52:56,879 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:52:56,880 INFO sqlalchemy.engine.Engine [cached since 1795s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 52, 56, 878429, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:52:56,888 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:52:56,888 INFO sqlalchemy.engine.Engine [cached since 607.3s ago] ('supreme',)
2026-02-11 00:52:56,895 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:52:56,896 INFO sqlalchemy.engine.Engine [cached since 607.3s ago] (2,)
2026-02-11 00:52:56,902 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53714 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:53:00,171 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:53:00,172 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:53:00,172 INFO sqlalchemy.engine.Engine [cached since 1799s ago] ('Bagong99',)
2026-02-11 00:53:00,179 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53724 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:53:06,782 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:53:06,783 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:53:06,783 INFO sqlalchemy.engine.Engine [cached since 1805s ago] ('Bagong99',)
2026-02-11 00:53:06,788 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:53:06,789 INFO sqlalchemy.engine.Engine [cached since 1805s ago] (2,)
2026-02-11 00:53:06,794 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:53:06,794 INFO sqlalchemy.engine.Engine [cached since 1805s ago] ('active', 2)
2026-02-11 00:53:06,799 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:53:06,799 INFO sqlalchemy.engine.Engine [cached since 1805s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:53:06,805 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:06,805 INFO sqlalchemy.engine.Engine [cached since 1805s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 6, 788408, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:06,814 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:06,814 INFO sqlalchemy.engine.Engine [cached since 1805s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 6, 788408, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:06,819 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:53:06,819 INFO sqlalchemy.engine.Engine [cached since 1805s ago] (2,)
2026-02-11 00:53:06,823 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:53:06,823 INFO sqlalchemy.engine.Engine [cached since 1805s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 6, 788408, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:06,829 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:53:06,829 INFO sqlalchemy.engine.Engine [cached since 1805s ago] ('pending', 'running', 2, 10)
2026-02-11 00:53:06,836 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:53:06,837 INFO sqlalchemy.engine.Engine [cached since 1805s ago] (2,)
2026-02-11 00:53:06,844 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:06,844 INFO sqlalchemy.engine.Engine [cached since 1805s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 6, 788408, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:06,854 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:53:06,854 INFO sqlalchemy.engine.Engine [cached since 1805s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 53, 6, 853049, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:53:06,860 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:53:06,860 INFO sqlalchemy.engine.Engine [cached since 617.2s ago] ('supreme',)
2026-02-11 00:53:06,867 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:53:06,867 INFO sqlalchemy.engine.Engine [cached since 617.2s ago] (2,)
2026-02-11 00:53:06,872 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53740 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:53:10,163 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:53:10,163 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:53:10,163 INFO sqlalchemy.engine.Engine [cached since 1809s ago] ('Bagong99',)
2026-02-11 00:53:10,167 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53749 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:53:16,814 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:53:16,815 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:53:16,815 INFO sqlalchemy.engine.Engine [cached since 1815s ago] ('Bagong99',)
2026-02-11 00:53:16,823 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:53:16,823 INFO sqlalchemy.engine.Engine [cached since 1815s ago] (2,)
2026-02-11 00:53:16,829 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:53:16,829 INFO sqlalchemy.engine.Engine [cached since 1815s ago] ('active', 2)
2026-02-11 00:53:16,835 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:53:16,835 INFO sqlalchemy.engine.Engine [cached since 1815s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:53:16,843 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:16,843 INFO sqlalchemy.engine.Engine [cached since 1815s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 16, 821956, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:16,850 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:16,850 INFO sqlalchemy.engine.Engine [cached since 1815s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 16, 821956, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:16,859 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:53:16,859 INFO sqlalchemy.engine.Engine [cached since 1815s ago] (2,)
2026-02-11 00:53:16,867 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:53:16,867 INFO sqlalchemy.engine.Engine [cached since 1815s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 16, 821956, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:16,873 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:53:16,873 INFO sqlalchemy.engine.Engine [cached since 1815s ago] ('pending', 'running', 2, 10)
2026-02-11 00:53:16,880 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:53:16,880 INFO sqlalchemy.engine.Engine [cached since 1815s ago] (2,)
2026-02-11 00:53:16,891 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:16,891 INFO sqlalchemy.engine.Engine [cached since 1815s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 16, 821956, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:16,899 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:53:16,899 INFO sqlalchemy.engine.Engine [cached since 1815s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 53, 16, 898362, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:53:16,907 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:53:16,907 INFO sqlalchemy.engine.Engine [cached since 627.3s ago] ('supreme',)
2026-02-11 00:53:16,915 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:53:16,915 INFO sqlalchemy.engine.Engine [cached since 627.3s ago] (2,)
2026-02-11 00:53:16,923 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53761 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:53:20,165 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:53:20,166 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:53:20,167 INFO sqlalchemy.engine.Engine [cached since 1819s ago] ('Bagong99',)
2026-02-11 00:53:20,173 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53769 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:53:26,796 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:53:26,796 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:53:26,796 INFO sqlalchemy.engine.Engine [cached since 1825s ago] ('Bagong99',)
2026-02-11 00:53:26,805 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:53:26,805 INFO sqlalchemy.engine.Engine [cached since 1825s ago] (2,)
2026-02-11 00:53:26,811 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:53:26,811 INFO sqlalchemy.engine.Engine [cached since 1825s ago] ('active', 2)
2026-02-11 00:53:26,817 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:53:26,817 INFO sqlalchemy.engine.Engine [cached since 1825s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:53:26,825 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:26,825 INFO sqlalchemy.engine.Engine [cached since 1825s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 26, 804160, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:26,830 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:26,830 INFO sqlalchemy.engine.Engine [cached since 1825s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 26, 804160, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:26,837 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:53:26,837 INFO sqlalchemy.engine.Engine [cached since 1825s ago] (2,)
2026-02-11 00:53:26,844 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:53:26,844 INFO sqlalchemy.engine.Engine [cached since 1825s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 26, 804160, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:26,851 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:53:26,852 INFO sqlalchemy.engine.Engine [cached since 1825s ago] ('pending', 'running', 2, 10)
2026-02-11 00:53:26,868 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:53:26,868 INFO sqlalchemy.engine.Engine [cached since 1825s ago] (2,)
2026-02-11 00:53:26,875 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:26,875 INFO sqlalchemy.engine.Engine [cached since 1825s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 26, 804160, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:26,884 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:53:26,884 INFO sqlalchemy.engine.Engine [cached since 1825s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 53, 26, 883186, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:53:26,894 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:53:26,894 INFO sqlalchemy.engine.Engine [cached since 637.3s ago] ('supreme',)
2026-02-11 00:53:26,902 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:53:26,902 INFO sqlalchemy.engine.Engine [cached since 637.3s ago] (2,)
2026-02-11 00:53:26,908 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53780 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:53:30,170 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:53:30,171 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:53:30,171 INFO sqlalchemy.engine.Engine [cached since 1829s ago] ('Bagong99',)
2026-02-11 00:53:30,177 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53786 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:53:36,790 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:53:36,791 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:53:36,791 INFO sqlalchemy.engine.Engine [cached since 1835s ago] ('Bagong99',)
2026-02-11 00:53:36,800 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:53:36,800 INFO sqlalchemy.engine.Engine [cached since 1835s ago] (2,)
2026-02-11 00:53:36,805 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:53:36,806 INFO sqlalchemy.engine.Engine [cached since 1835s ago] ('active', 2)
2026-02-11 00:53:36,813 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:53:36,813 INFO sqlalchemy.engine.Engine [cached since 1835s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:53:36,818 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:36,818 INFO sqlalchemy.engine.Engine [cached since 1835s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 36, 799885, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:36,825 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:36,825 INFO sqlalchemy.engine.Engine [cached since 1835s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 36, 799885, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:36,832 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:53:36,832 INFO sqlalchemy.engine.Engine [cached since 1835s ago] (2,)
2026-02-11 00:53:36,838 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:53:36,838 INFO sqlalchemy.engine.Engine [cached since 1835s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 36, 799885, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:36,846 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:53:36,846 INFO sqlalchemy.engine.Engine [cached since 1835s ago] ('pending', 'running', 2, 10)
2026-02-11 00:53:36,863 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:53:36,863 INFO sqlalchemy.engine.Engine [cached since 1835s ago] (2,)
2026-02-11 00:53:36,870 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:36,870 INFO sqlalchemy.engine.Engine [cached since 1835s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 36, 799885, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:36,879 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:53:36,879 INFO sqlalchemy.engine.Engine [cached since 1835s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 53, 36, 877882, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:53:36,888 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:53:36,888 INFO sqlalchemy.engine.Engine [cached since 647.3s ago] ('supreme',)
2026-02-11 00:53:36,895 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:53:36,896 INFO sqlalchemy.engine.Engine [cached since 647.3s ago] (2,)
2026-02-11 00:53:36,902 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53798 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:53:40,163 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:53:40,164 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:53:40,164 INFO sqlalchemy.engine.Engine [cached since 1839s ago] ('Bagong99',)
2026-02-11 00:53:40,171 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53805 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:53:46,793 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:53:46,794 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:53:46,794 INFO sqlalchemy.engine.Engine [cached since 1845s ago] ('Bagong99',)
2026-02-11 00:53:46,801 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:53:46,801 INFO sqlalchemy.engine.Engine [cached since 1845s ago] (2,)
2026-02-11 00:53:46,808 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:53:46,808 INFO sqlalchemy.engine.Engine [cached since 1845s ago] ('active', 2)
2026-02-11 00:53:46,814 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:53:46,814 INFO sqlalchemy.engine.Engine [cached since 1845s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:53:46,822 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:46,822 INFO sqlalchemy.engine.Engine [cached since 1845s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 46, 800803, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:46,830 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:46,830 INFO sqlalchemy.engine.Engine [cached since 1845s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 46, 800803, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:46,836 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:53:46,836 INFO sqlalchemy.engine.Engine [cached since 1845s ago] (2,)
2026-02-11 00:53:46,842 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:53:46,842 INFO sqlalchemy.engine.Engine [cached since 1845s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 46, 800803, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:46,850 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:53:46,850 INFO sqlalchemy.engine.Engine [cached since 1845s ago] ('pending', 'running', 2, 10)
2026-02-11 00:53:46,858 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:53:46,859 INFO sqlalchemy.engine.Engine [cached since 1845s ago] (2,)
2026-02-11 00:53:46,866 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:46,866 INFO sqlalchemy.engine.Engine [cached since 1845s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 46, 800803, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:46,877 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:53:46,877 INFO sqlalchemy.engine.Engine [cached since 1845s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 53, 46, 875809, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:53:46,885 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:53:46,885 INFO sqlalchemy.engine.Engine [cached since 657.3s ago] ('supreme',)
2026-02-11 00:53:46,893 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:53:46,894 INFO sqlalchemy.engine.Engine [cached since 657.3s ago] (2,)
2026-02-11 00:53:46,900 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53821 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:53:50,166 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:53:50,167 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:53:50,167 INFO sqlalchemy.engine.Engine [cached since 1849s ago] ('Bagong99',)
2026-02-11 00:53:50,173 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53828 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:53:56,787 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:53:56,788 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:53:56,788 INFO sqlalchemy.engine.Engine [cached since 1855s ago] ('Bagong99',)
2026-02-11 00:53:56,796 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:53:56,797 INFO sqlalchemy.engine.Engine [cached since 1855s ago] (2,)
2026-02-11 00:53:56,801 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:53:56,802 INFO sqlalchemy.engine.Engine [cached since 1855s ago] ('active', 2)
2026-02-11 00:53:56,808 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:53:56,808 INFO sqlalchemy.engine.Engine [cached since 1855s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:53:56,813 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:56,813 INFO sqlalchemy.engine.Engine [cached since 1855s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 56, 796269, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:56,820 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:56,820 INFO sqlalchemy.engine.Engine [cached since 1855s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 56, 796269, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:56,825 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:53:56,826 INFO sqlalchemy.engine.Engine [cached since 1855s ago] (2,)
2026-02-11 00:53:56,830 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:53:56,830 INFO sqlalchemy.engine.Engine [cached since 1855s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 56, 796269, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:56,847 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:53:56,847 INFO sqlalchemy.engine.Engine [cached since 1855s ago] ('pending', 'running', 2, 10)
2026-02-11 00:53:56,852 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:53:56,852 INFO sqlalchemy.engine.Engine [cached since 1855s ago] (2,)
2026-02-11 00:53:56,859 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:53:56,859 INFO sqlalchemy.engine.Engine [cached since 1855s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 53, 56, 796269, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:53:56,866 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:53:56,867 INFO sqlalchemy.engine.Engine [cached since 1855s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 53, 56, 865578, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:53:56,872 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:53:56,872 INFO sqlalchemy.engine.Engine [cached since 667.3s ago] ('supreme',)
2026-02-11 00:53:56,877 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:53:56,877 INFO sqlalchemy.engine.Engine [cached since 667.3s ago] (2,)
2026-02-11 00:53:56,883 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53840 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:53849 - "OPTIONS /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:54:00,161 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:54:00,162 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:54:00,162 INFO sqlalchemy.engine.Engine [cached since 1859s ago] ('Bagong99',)
2026-02-11 00:54:00,168 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53849 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:54:06,805 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:54:06,806 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:54:06,806 INFO sqlalchemy.engine.Engine [cached since 1865s ago] ('Bagong99',)
2026-02-11 00:54:06,814 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:54:06,815 INFO sqlalchemy.engine.Engine [cached since 1865s ago] (2,)
2026-02-11 00:54:06,820 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:54:06,820 INFO sqlalchemy.engine.Engine [cached since 1865s ago] ('active', 2)
2026-02-11 00:54:06,825 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:54:06,825 INFO sqlalchemy.engine.Engine [cached since 1865s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:54:06,831 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:06,831 INFO sqlalchemy.engine.Engine [cached since 1865s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 6, 813737, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:06,837 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:06,838 INFO sqlalchemy.engine.Engine [cached since 1865s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 6, 813737, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:06,845 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:54:06,845 INFO sqlalchemy.engine.Engine [cached since 1865s ago] (2,)
2026-02-11 00:54:06,852 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:54:06,852 INFO sqlalchemy.engine.Engine [cached since 1865s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 6, 813737, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:06,859 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:54:06,859 INFO sqlalchemy.engine.Engine [cached since 1865s ago] ('pending', 'running', 2, 10)
2026-02-11 00:54:06,867 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:54:06,867 INFO sqlalchemy.engine.Engine [cached since 1865s ago] (2,)
2026-02-11 00:54:06,875 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:06,875 INFO sqlalchemy.engine.Engine [cached since 1865s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 6, 813737, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:06,884 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:54:06,884 INFO sqlalchemy.engine.Engine [cached since 1865s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 54, 6, 883741, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:54:06,893 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:54:06,893 INFO sqlalchemy.engine.Engine [cached since 677.3s ago] ('supreme',)
2026-02-11 00:54:06,901 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:54:06,901 INFO sqlalchemy.engine.Engine [cached since 677.3s ago] (2,)
2026-02-11 00:54:06,908 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53864 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:54:10,166 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:54:10,167 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:54:10,167 INFO sqlalchemy.engine.Engine [cached since 1869s ago] ('Bagong99',)
2026-02-11 00:54:10,173 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53873 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:54:16,784 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:54:16,785 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:54:16,785 INFO sqlalchemy.engine.Engine [cached since 1875s ago] ('Bagong99',)
2026-02-11 00:54:16,794 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:54:16,794 INFO sqlalchemy.engine.Engine [cached since 1875s ago] (2,)
2026-02-11 00:54:16,800 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:54:16,800 INFO sqlalchemy.engine.Engine [cached since 1875s ago] ('active', 2)
2026-02-11 00:54:16,806 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:54:16,806 INFO sqlalchemy.engine.Engine [cached since 1875s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:54:16,813 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:16,813 INFO sqlalchemy.engine.Engine [cached since 1875s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 16, 793157, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:16,822 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:16,822 INFO sqlalchemy.engine.Engine [cached since 1875s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 16, 793157, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:16,829 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:54:16,829 INFO sqlalchemy.engine.Engine [cached since 1875s ago] (2,)
2026-02-11 00:54:16,835 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:54:16,835 INFO sqlalchemy.engine.Engine [cached since 1875s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 16, 793157, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:16,844 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:54:16,844 INFO sqlalchemy.engine.Engine [cached since 1875s ago] ('pending', 'running', 2, 10)
2026-02-11 00:54:16,854 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:54:16,854 INFO sqlalchemy.engine.Engine [cached since 1875s ago] (2,)
2026-02-11 00:54:16,862 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:16,862 INFO sqlalchemy.engine.Engine [cached since 1875s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 16, 793157, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:16,873 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:54:16,874 INFO sqlalchemy.engine.Engine [cached since 1875s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 54, 16, 873080, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:54:16,882 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:54:16,882 INFO sqlalchemy.engine.Engine [cached since 687.3s ago] ('supreme',)
2026-02-11 00:54:16,889 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:54:16,890 INFO sqlalchemy.engine.Engine [cached since 687.3s ago] (2,)
2026-02-11 00:54:16,899 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53885 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:54:20,158 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:54:20,159 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:54:20,159 INFO sqlalchemy.engine.Engine [cached since 1879s ago] ('Bagong99',)
2026-02-11 00:54:20,163 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53893 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:54:26,793 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:54:26,794 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:54:26,794 INFO sqlalchemy.engine.Engine [cached since 1885s ago] ('Bagong99',)
2026-02-11 00:54:26,805 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:54:26,806 INFO sqlalchemy.engine.Engine [cached since 1885s ago] (2,)
2026-02-11 00:54:26,813 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:54:26,813 INFO sqlalchemy.engine.Engine [cached since 1885s ago] ('active', 2)
2026-02-11 00:54:26,827 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:54:26,828 INFO sqlalchemy.engine.Engine [cached since 1885s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:54:26,833 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:26,834 INFO sqlalchemy.engine.Engine [cached since 1885s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 26, 805105, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:26,842 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:26,842 INFO sqlalchemy.engine.Engine [cached since 1885s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 26, 805105, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:26,848 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:54:26,848 INFO sqlalchemy.engine.Engine [cached since 1885s ago] (2,)
2026-02-11 00:54:26,854 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:54:26,854 INFO sqlalchemy.engine.Engine [cached since 1885s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 26, 805105, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:26,860 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:54:26,860 INFO sqlalchemy.engine.Engine [cached since 1885s ago] ('pending', 'running', 2, 10)
2026-02-11 00:54:26,867 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:54:26,867 INFO sqlalchemy.engine.Engine [cached since 1885s ago] (2,)
2026-02-11 00:54:26,873 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:26,873 INFO sqlalchemy.engine.Engine [cached since 1885s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 26, 805105, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:26,881 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:54:26,881 INFO sqlalchemy.engine.Engine [cached since 1885s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 54, 26, 880356, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:54:26,888 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:54:26,889 INFO sqlalchemy.engine.Engine [cached since 697.3s ago] ('supreme',)
2026-02-11 00:54:26,897 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:54:26,898 INFO sqlalchemy.engine.Engine [cached since 697.3s ago] (2,)
2026-02-11 00:54:26,905 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53904 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:54:30,164 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:54:30,166 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:54:30,166 INFO sqlalchemy.engine.Engine [cached since 1889s ago] ('Bagong99',)
2026-02-11 00:54:30,172 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53911 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:54:36,224 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:54:36,225 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:54:36,225 INFO sqlalchemy.engine.Engine [cached since 1895s ago] ('Bagong99',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:53930 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:54:36,231 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:54:36,279 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:54:36,280 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:54:36,280 INFO sqlalchemy.engine.Engine [cached since 1895s ago] ('Bagong99',)
2026-02-11 00:54:36,281 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:54:36,282 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:54:36,282 INFO sqlalchemy.engine.Engine [cached since 1895s ago] ('Bagong99',)
2026-02-11 00:54:36,285 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:54:36,285 INFO sqlalchemy.engine.Engine [cached since 1895s ago] (2,)
2026-02-11 00:54:36,289 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:54:36,289 INFO sqlalchemy.engine.Engine [cached since 1895s ago] (2,)
2026-02-11 00:54:36,290 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:54:36,290 INFO sqlalchemy.engine.Engine [cached since 1895s ago] ('active', 2)
2026-02-11 00:54:36,294 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:54:36,294 INFO sqlalchemy.engine.Engine [cached since 1895s ago] ('active', 2)
2026-02-11 00:54:36,295 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:54:36,295 INFO sqlalchemy.engine.Engine [cached since 1895s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:54:36,299 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:54:36,299 INFO sqlalchemy.engine.Engine [cached since 1895s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:54:36,301 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:36,301 INFO sqlalchemy.engine.Engine [cached since 1895s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 36, 284483, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:36,305 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:36,305 INFO sqlalchemy.engine.Engine [cached since 1895s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 36, 288769, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:36,307 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:36,307 INFO sqlalchemy.engine.Engine [cached since 1895s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 36, 284483, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:36,309 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:36,309 INFO sqlalchemy.engine.Engine [cached since 1895s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 36, 288769, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:36,311 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:54:36,312 INFO sqlalchemy.engine.Engine [cached since 1895s ago] (2,)
2026-02-11 00:54:36,313 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:54:36,313 INFO sqlalchemy.engine.Engine [cached since 1895s ago] (2,)
2026-02-11 00:54:36,316 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:54:36,316 INFO sqlalchemy.engine.Engine [cached since 1895s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 36, 284483, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:36,317 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:54:36,317 INFO sqlalchemy.engine.Engine [cached since 1895s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 36, 288769, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:36,320 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:54:36,320 INFO sqlalchemy.engine.Engine [cached since 1895s ago] ('pending', 'running', 2, 10)
2026-02-11 00:54:36,322 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:54:36,322 INFO sqlalchemy.engine.Engine [cached since 1895s ago] ('pending', 'running', 2, 10)
2026-02-11 00:54:36,326 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:54:36,326 INFO sqlalchemy.engine.Engine [cached since 1895s ago] (2,)
2026-02-11 00:54:36,331 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:54:36,331 INFO sqlalchemy.engine.Engine [cached since 1895s ago] (2,)
2026-02-11 00:54:36,333 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:36,333 INFO sqlalchemy.engine.Engine [cached since 1895s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 36, 284483, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:36,338 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:36,338 INFO sqlalchemy.engine.Engine [cached since 1895s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 36, 288769, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:36,340 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:54:36,340 INFO sqlalchemy.engine.Engine [cached since 1895s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 54, 36, 339652, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:54:36,346 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:54:36,346 INFO sqlalchemy.engine.Engine [cached since 1895s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 54, 36, 345453, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:54:36,348 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:54:36,348 INFO sqlalchemy.engine.Engine [cached since 706.7s ago] ('supreme',)
2026-02-11 00:54:36,355 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:54:36,355 INFO sqlalchemy.engine.Engine [cached since 706.7s ago] ('supreme',)
2026-02-11 00:54:36,357 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:54:36,358 INFO sqlalchemy.engine.Engine [cached since 706.7s ago] (2,)
2026-02-11 00:54:36,364 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:54:36,364 INFO sqlalchemy.engine.Engine [cached since 706.7s ago] (2,)
2026-02-11 00:54:36,365 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:54:36,371 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53930 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:53933 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:54:40,174 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:54:40,176 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:54:40,176 INFO sqlalchemy.engine.Engine [cached since 1899s ago] ('Bagong99',)
2026-02-11 00:54:40,183 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53942 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:54:46,288 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:54:46,288 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:54:46,288 INFO sqlalchemy.engine.Engine [cached since 1905s ago] ('Bagong99',)
2026-02-11 00:54:46,297 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:54:46,297 INFO sqlalchemy.engine.Engine [cached since 1905s ago] (2,)
2026-02-11 00:54:46,304 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:54:46,304 INFO sqlalchemy.engine.Engine [cached since 1905s ago] ('active', 2)
2026-02-11 00:54:46,312 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:54:46,313 INFO sqlalchemy.engine.Engine [cached since 1905s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:54:46,319 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:46,319 INFO sqlalchemy.engine.Engine [cached since 1905s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 46, 296727, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:46,325 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:46,325 INFO sqlalchemy.engine.Engine [cached since 1905s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 46, 296727, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:46,332 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:54:46,332 INFO sqlalchemy.engine.Engine [cached since 1905s ago] (2,)
2026-02-11 00:54:46,338 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:54:46,339 INFO sqlalchemy.engine.Engine [cached since 1905s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 46, 296727, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:46,354 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:54:46,354 INFO sqlalchemy.engine.Engine [cached since 1905s ago] ('pending', 'running', 2, 10)
2026-02-11 00:54:46,364 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:54:46,364 INFO sqlalchemy.engine.Engine [cached since 1905s ago] (2,)
2026-02-11 00:54:46,371 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:46,371 INFO sqlalchemy.engine.Engine [cached since 1905s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 46, 296727, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:46,379 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:54:46,380 INFO sqlalchemy.engine.Engine [cached since 1905s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 54, 46, 378333, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:54:46,387 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:54:46,387 INFO sqlalchemy.engine.Engine [cached since 716.8s ago] ('supreme',)
2026-02-11 00:54:46,393 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:54:46,393 INFO sqlalchemy.engine.Engine [cached since 716.8s ago] (2,)
2026-02-11 00:54:46,400 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53955 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:54:50,160 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:54:50,161 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:54:50,162 INFO sqlalchemy.engine.Engine [cached since 1909s ago] ('Bagong99',)
2026-02-11 00:54:50,167 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53962 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:54:56,287 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:54:56,288 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:54:56,289 INFO sqlalchemy.engine.Engine [cached since 1915s ago] ('Bagong99',)
2026-02-11 00:54:56,296 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:54:56,296 INFO sqlalchemy.engine.Engine [cached since 1915s ago] (2,)
2026-02-11 00:54:56,302 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:54:56,302 INFO sqlalchemy.engine.Engine [cached since 1915s ago] ('active', 2)
2026-02-11 00:54:56,309 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:54:56,309 INFO sqlalchemy.engine.Engine [cached since 1915s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:54:56,315 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:56,316 INFO sqlalchemy.engine.Engine [cached since 1915s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 56, 295135, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:56,324 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:56,324 INFO sqlalchemy.engine.Engine [cached since 1915s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 56, 295135, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:56,330 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:54:56,331 INFO sqlalchemy.engine.Engine [cached since 1915s ago] (2,)
2026-02-11 00:54:56,337 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:54:56,338 INFO sqlalchemy.engine.Engine [cached since 1915s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 56, 295135, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:56,344 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:54:56,345 INFO sqlalchemy.engine.Engine [cached since 1915s ago] ('pending', 'running', 2, 10)
2026-02-11 00:54:56,351 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:54:56,351 INFO sqlalchemy.engine.Engine [cached since 1915s ago] (2,)
2026-02-11 00:54:56,357 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:54:56,357 INFO sqlalchemy.engine.Engine [cached since 1915s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 54, 56, 295135, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:54:56,364 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:54:56,364 INFO sqlalchemy.engine.Engine [cached since 1915s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 54, 56, 363469, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:54:56,372 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:54:56,372 INFO sqlalchemy.engine.Engine [cached since 726.8s ago] ('supreme',)
2026-02-11 00:54:56,380 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:54:56,380 INFO sqlalchemy.engine.Engine [cached since 726.8s ago] (2,)
2026-02-11 00:54:56,388 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53975 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:55:00,167 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:55:00,168 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:55:00,168 INFO sqlalchemy.engine.Engine [cached since 1919s ago] ('Bagong99',)
2026-02-11 00:55:00,175 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:53982 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:55:06,283 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:55:06,284 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:55:06,284 INFO sqlalchemy.engine.Engine [cached since 1925s ago] ('Bagong99',)
2026-02-11 00:55:06,295 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:55:06,295 INFO sqlalchemy.engine.Engine [cached since 1925s ago] (2,)
2026-02-11 00:55:06,302 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:55:06,303 INFO sqlalchemy.engine.Engine [cached since 1925s ago] ('active', 2)
2026-02-11 00:55:06,307 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:55:06,308 INFO sqlalchemy.engine.Engine [cached since 1925s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:55:06,313 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:06,314 INFO sqlalchemy.engine.Engine [cached since 1925s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 6, 294542, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:06,321 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:06,321 INFO sqlalchemy.engine.Engine [cached since 1925s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 6, 294542, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:06,326 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:55:06,326 INFO sqlalchemy.engine.Engine [cached since 1925s ago] (2,)
2026-02-11 00:55:06,332 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:55:06,332 INFO sqlalchemy.engine.Engine [cached since 1925s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 6, 294542, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:06,338 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:55:06,338 INFO sqlalchemy.engine.Engine [cached since 1925s ago] ('pending', 'running', 2, 10)
2026-02-11 00:55:06,353 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:55:06,353 INFO sqlalchemy.engine.Engine [cached since 1925s ago] (2,)
2026-02-11 00:55:06,362 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:06,363 INFO sqlalchemy.engine.Engine [cached since 1925s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 6, 294542, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:06,370 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:55:06,371 INFO sqlalchemy.engine.Engine [cached since 1925s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 55, 6, 369259, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:55:06,377 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:55:06,377 INFO sqlalchemy.engine.Engine [cached since 736.8s ago] ('supreme',)
2026-02-11 00:55:06,384 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:55:06,384 INFO sqlalchemy.engine.Engine [cached since 736.8s ago] (2,)
2026-02-11 00:55:06,392 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:53994 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:55:10,173 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:55:10,175 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:55:10,175 INFO sqlalchemy.engine.Engine [cached since 1929s ago] ('Bagong99',)
2026-02-11 00:55:10,180 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54004 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:55:16,280 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:55:16,281 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:55:16,281 INFO sqlalchemy.engine.Engine [cached since 1935s ago] ('Bagong99',)
2026-02-11 00:55:16,287 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:55:16,287 INFO sqlalchemy.engine.Engine [cached since 1935s ago] (2,)
2026-02-11 00:55:16,292 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:55:16,292 INFO sqlalchemy.engine.Engine [cached since 1935s ago] ('active', 2)
2026-02-11 00:55:16,298 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:55:16,298 INFO sqlalchemy.engine.Engine [cached since 1935s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:55:16,303 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:16,304 INFO sqlalchemy.engine.Engine [cached since 1935s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 16, 286588, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:16,309 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:16,310 INFO sqlalchemy.engine.Engine [cached since 1935s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 16, 286588, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:16,314 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:55:16,314 INFO sqlalchemy.engine.Engine [cached since 1935s ago] (2,)
2026-02-11 00:55:16,320 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:55:16,320 INFO sqlalchemy.engine.Engine [cached since 1935s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 16, 286588, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:16,325 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:55:16,325 INFO sqlalchemy.engine.Engine [cached since 1935s ago] ('pending', 'running', 2, 10)
2026-02-11 00:55:16,332 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:55:16,332 INFO sqlalchemy.engine.Engine [cached since 1935s ago] (2,)
2026-02-11 00:55:16,337 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:16,337 INFO sqlalchemy.engine.Engine [cached since 1935s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 16, 286588, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:16,346 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:55:16,346 INFO sqlalchemy.engine.Engine [cached since 1935s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 55, 16, 344921, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:55:16,352 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:55:16,353 INFO sqlalchemy.engine.Engine [cached since 746.7s ago] ('supreme',)
2026-02-11 00:55:16,359 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:55:16,359 INFO sqlalchemy.engine.Engine [cached since 746.7s ago] (2,)
2026-02-11 00:55:16,366 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54020 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:55:20,164 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:55:20,165 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:55:20,166 INFO sqlalchemy.engine.Engine [cached since 1939s ago] ('Bagong99',)
2026-02-11 00:55:20,171 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54042 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:55:26,287 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:55:26,289 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:55:26,289 INFO sqlalchemy.engine.Engine [cached since 1945s ago] ('Bagong99',)
2026-02-11 00:55:26,296 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:55:26,296 INFO sqlalchemy.engine.Engine [cached since 1945s ago] (2,)
2026-02-11 00:55:26,303 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:55:26,303 INFO sqlalchemy.engine.Engine [cached since 1945s ago] ('active', 2)
2026-02-11 00:55:26,309 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:55:26,309 INFO sqlalchemy.engine.Engine [cached since 1945s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:55:26,316 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:26,316 INFO sqlalchemy.engine.Engine [cached since 1945s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 26, 295942, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:26,321 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:26,322 INFO sqlalchemy.engine.Engine [cached since 1945s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 26, 295942, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:26,327 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:55:26,327 INFO sqlalchemy.engine.Engine [cached since 1945s ago] (2,)
2026-02-11 00:55:26,332 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:55:26,333 INFO sqlalchemy.engine.Engine [cached since 1945s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 26, 295942, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:26,338 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:55:26,338 INFO sqlalchemy.engine.Engine [cached since 1945s ago] ('pending', 'running', 2, 10)
2026-02-11 00:55:26,348 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:55:26,348 INFO sqlalchemy.engine.Engine [cached since 1945s ago] (2,)
2026-02-11 00:55:26,354 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:26,354 INFO sqlalchemy.engine.Engine [cached since 1945s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 26, 295942, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:26,361 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:55:26,361 INFO sqlalchemy.engine.Engine [cached since 1945s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 55, 26, 359811, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:55:26,367 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:55:26,367 INFO sqlalchemy.engine.Engine [cached since 756.8s ago] ('supreme',)
2026-02-11 00:55:26,374 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:55:26,374 INFO sqlalchemy.engine.Engine [cached since 756.7s ago] (2,)
2026-02-11 00:55:26,384 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54053 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:55:30,169 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:55:30,170 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:55:30,170 INFO sqlalchemy.engine.Engine [cached since 1949s ago] ('Bagong99',)
2026-02-11 00:55:30,176 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54061 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:55:36,290 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:55:36,291 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:55:36,291 INFO sqlalchemy.engine.Engine [cached since 1955s ago] ('Bagong99',)
2026-02-11 00:55:36,298 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:55:36,298 INFO sqlalchemy.engine.Engine [cached since 1955s ago] (2,)
2026-02-11 00:55:36,303 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:55:36,304 INFO sqlalchemy.engine.Engine [cached since 1955s ago] ('active', 2)
2026-02-11 00:55:36,309 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:55:36,310 INFO sqlalchemy.engine.Engine [cached since 1955s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:55:36,317 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:36,317 INFO sqlalchemy.engine.Engine [cached since 1955s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 36, 297774, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:36,324 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:36,325 INFO sqlalchemy.engine.Engine [cached since 1955s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 36, 297774, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:36,331 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:55:36,331 INFO sqlalchemy.engine.Engine [cached since 1955s ago] (2,)
2026-02-11 00:55:36,338 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:55:36,338 INFO sqlalchemy.engine.Engine [cached since 1955s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 36, 297774, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:36,347 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:55:36,347 INFO sqlalchemy.engine.Engine [cached since 1955s ago] ('pending', 'running', 2, 10)
2026-02-11 00:55:36,354 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:55:36,354 INFO sqlalchemy.engine.Engine [cached since 1955s ago] (2,)
2026-02-11 00:55:36,360 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:36,361 INFO sqlalchemy.engine.Engine [cached since 1955s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 36, 297774, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:36,368 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:55:36,369 INFO sqlalchemy.engine.Engine [cached since 1955s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 55, 36, 367141, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:55:36,378 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:55:36,378 INFO sqlalchemy.engine.Engine [cached since 766.8s ago] ('supreme',)
2026-02-11 00:55:36,387 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:55:36,387 INFO sqlalchemy.engine.Engine [cached since 766.8s ago] (2,)
2026-02-11 00:55:36,396 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54073 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:55:40,166 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:55:40,167 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:55:40,167 INFO sqlalchemy.engine.Engine [cached since 1959s ago] ('Bagong99',)
2026-02-11 00:55:40,171 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54084 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:55:46,281 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:55:46,282 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:55:46,282 INFO sqlalchemy.engine.Engine [cached since 1965s ago] ('Bagong99',)
2026-02-11 00:55:46,288 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:55:46,288 INFO sqlalchemy.engine.Engine [cached since 1965s ago] (2,)
2026-02-11 00:55:46,293 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:55:46,293 INFO sqlalchemy.engine.Engine [cached since 1965s ago] ('active', 2)
2026-02-11 00:55:46,301 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:55:46,301 INFO sqlalchemy.engine.Engine [cached since 1965s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:55:46,308 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:46,308 INFO sqlalchemy.engine.Engine [cached since 1965s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 46, 287897, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:46,315 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:46,315 INFO sqlalchemy.engine.Engine [cached since 1965s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 46, 287897, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:46,321 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:55:46,321 INFO sqlalchemy.engine.Engine [cached since 1965s ago] (2,)
2026-02-11 00:55:46,326 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:55:46,326 INFO sqlalchemy.engine.Engine [cached since 1965s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 46, 287897, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:46,331 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:55:46,331 INFO sqlalchemy.engine.Engine [cached since 1965s ago] ('pending', 'running', 2, 10)
2026-02-11 00:55:46,337 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:55:46,338 INFO sqlalchemy.engine.Engine [cached since 1965s ago] (2,)
2026-02-11 00:55:46,343 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:46,343 INFO sqlalchemy.engine.Engine [cached since 1965s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 46, 287897, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:46,350 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:55:46,350 INFO sqlalchemy.engine.Engine [cached since 1965s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 55, 46, 348981, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:55:46,355 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:55:46,355 INFO sqlalchemy.engine.Engine [cached since 776.7s ago] ('supreme',)
2026-02-11 00:55:46,366 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:55:46,366 INFO sqlalchemy.engine.Engine [cached since 776.7s ago] (2,)
2026-02-11 00:55:46,370 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54097 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:55:50,171 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:55:50,171 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:55:50,171 INFO sqlalchemy.engine.Engine [cached since 1969s ago] ('Bagong99',)
2026-02-11 00:55:50,186 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54106 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:55:56,294 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:55:56,296 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:55:56,296 INFO sqlalchemy.engine.Engine [cached since 1975s ago] ('Bagong99',)
2026-02-11 00:55:56,311 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:55:56,312 INFO sqlalchemy.engine.Engine [cached since 1975s ago] (2,)
2026-02-11 00:55:56,317 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:55:56,317 INFO sqlalchemy.engine.Engine [cached since 1975s ago] ('active', 2)
2026-02-11 00:55:56,323 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:55:56,324 INFO sqlalchemy.engine.Engine [cached since 1975s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:55:56,330 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:56,331 INFO sqlalchemy.engine.Engine [cached since 1975s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 56, 310989, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:56,337 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:56,338 INFO sqlalchemy.engine.Engine [cached since 1975s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 56, 310989, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:56,344 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:55:56,345 INFO sqlalchemy.engine.Engine [cached since 1975s ago] (2,)
2026-02-11 00:55:56,350 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:55:56,351 INFO sqlalchemy.engine.Engine [cached since 1975s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 56, 310989, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:56,358 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:55:56,358 INFO sqlalchemy.engine.Engine [cached since 1975s ago] ('pending', 'running', 2, 10)
2026-02-11 00:55:56,366 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:55:56,366 INFO sqlalchemy.engine.Engine [cached since 1975s ago] (2,)
2026-02-11 00:55:56,371 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:55:56,371 INFO sqlalchemy.engine.Engine [cached since 1975s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 55, 56, 310989, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:55:56,379 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:55:56,380 INFO sqlalchemy.engine.Engine [cached since 1975s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 55, 56, 379327, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:55:56,387 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:55:56,387 INFO sqlalchemy.engine.Engine [cached since 786.8s ago] ('supreme',)
2026-02-11 00:55:56,394 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:55:56,394 INFO sqlalchemy.engine.Engine [cached since 786.8s ago] (2,)
2026-02-11 00:55:56,401 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54117 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:56:00,176 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:56:00,177 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:56:00,177 INFO sqlalchemy.engine.Engine [cached since 1979s ago] ('Bagong99',)
2026-02-11 00:56:00,182 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54128 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:56:06,287 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:56:06,288 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:56:06,289 INFO sqlalchemy.engine.Engine [cached since 1985s ago] ('Bagong99',)
2026-02-11 00:56:06,302 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:56:06,302 INFO sqlalchemy.engine.Engine [cached since 1985s ago] (2,)
2026-02-11 00:56:06,310 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:56:06,310 INFO sqlalchemy.engine.Engine [cached since 1985s ago] ('active', 2)
2026-02-11 00:56:06,317 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:56:06,317 INFO sqlalchemy.engine.Engine [cached since 1985s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:56:06,323 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:06,323 INFO sqlalchemy.engine.Engine [cached since 1985s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 6, 300816, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:06,329 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:06,329 INFO sqlalchemy.engine.Engine [cached since 1985s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 6, 300816, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:06,335 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:56:06,335 INFO sqlalchemy.engine.Engine [cached since 1985s ago] (2,)
2026-02-11 00:56:06,341 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:56:06,341 INFO sqlalchemy.engine.Engine [cached since 1985s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 6, 300816, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:06,356 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:56:06,357 INFO sqlalchemy.engine.Engine [cached since 1985s ago] ('pending', 'running', 2, 10)
2026-02-11 00:56:06,363 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:56:06,363 INFO sqlalchemy.engine.Engine [cached since 1985s ago] (2,)
2026-02-11 00:56:06,370 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:06,370 INFO sqlalchemy.engine.Engine [cached since 1985s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 6, 300816, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:06,379 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:56:06,379 INFO sqlalchemy.engine.Engine [cached since 1985s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 56, 6, 377909, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:56:06,387 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:56:06,387 INFO sqlalchemy.engine.Engine [cached since 796.8s ago] ('supreme',)
2026-02-11 00:56:06,393 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:56:06,394 INFO sqlalchemy.engine.Engine [cached since 796.8s ago] (2,)
2026-02-11 00:56:06,400 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54141 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:56:10,163 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:56:10,164 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:56:10,164 INFO sqlalchemy.engine.Engine [cached since 1989s ago] ('Bagong99',)
2026-02-11 00:56:10,171 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54151 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:56:16,289 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:56:16,291 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:56:16,291 INFO sqlalchemy.engine.Engine [cached since 1995s ago] ('Bagong99',)
2026-02-11 00:56:16,299 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:56:16,299 INFO sqlalchemy.engine.Engine [cached since 1995s ago] (2,)
2026-02-11 00:56:16,307 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:56:16,308 INFO sqlalchemy.engine.Engine [cached since 1995s ago] ('active', 2)
2026-02-11 00:56:16,316 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:56:16,317 INFO sqlalchemy.engine.Engine [cached since 1995s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:56:16,323 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:16,324 INFO sqlalchemy.engine.Engine [cached since 1995s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 16, 298367, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:16,331 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:16,332 INFO sqlalchemy.engine.Engine [cached since 1995s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 16, 298367, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:16,338 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:56:16,338 INFO sqlalchemy.engine.Engine [cached since 1995s ago] (2,)
2026-02-11 00:56:16,345 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:56:16,345 INFO sqlalchemy.engine.Engine [cached since 1995s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 16, 298367, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:16,352 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:56:16,353 INFO sqlalchemy.engine.Engine [cached since 1995s ago] ('pending', 'running', 2, 10)
2026-02-11 00:56:16,361 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:56:16,361 INFO sqlalchemy.engine.Engine [cached since 1995s ago] (2,)
2026-02-11 00:56:16,368 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:16,369 INFO sqlalchemy.engine.Engine [cached since 1995s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 16, 298367, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:16,377 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:56:16,377 INFO sqlalchemy.engine.Engine [cached since 1995s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 56, 16, 375864, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:56:16,383 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:56:16,383 INFO sqlalchemy.engine.Engine [cached since 806.8s ago] ('supreme',)
2026-02-11 00:56:16,389 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:56:16,390 INFO sqlalchemy.engine.Engine [cached since 806.8s ago] (2,)
2026-02-11 00:56:16,395 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54165 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:56:20,169 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:56:20,170 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:56:20,170 INFO sqlalchemy.engine.Engine [cached since 1999s ago] ('Bagong99',)
2026-02-11 00:56:20,179 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54172 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:56:26,287 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:56:26,289 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:56:26,289 INFO sqlalchemy.engine.Engine [cached since 2005s ago] ('Bagong99',)
2026-02-11 00:56:26,296 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:56:26,297 INFO sqlalchemy.engine.Engine [cached since 2005s ago] (2,)
2026-02-11 00:56:26,306 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:56:26,306 INFO sqlalchemy.engine.Engine [cached since 2005s ago] ('active', 2)
2026-02-11 00:56:26,312 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:56:26,312 INFO sqlalchemy.engine.Engine [cached since 2005s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:56:26,319 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:26,320 INFO sqlalchemy.engine.Engine [cached since 2005s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 26, 295967, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:26,326 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:26,326 INFO sqlalchemy.engine.Engine [cached since 2005s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 26, 295967, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:26,331 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:56:26,331 INFO sqlalchemy.engine.Engine [cached since 2005s ago] (2,)
2026-02-11 00:56:26,338 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:56:26,338 INFO sqlalchemy.engine.Engine [cached since 2005s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 26, 295967, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:26,344 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:56:26,344 INFO sqlalchemy.engine.Engine [cached since 2005s ago] ('pending', 'running', 2, 10)
2026-02-11 00:56:26,351 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:56:26,351 INFO sqlalchemy.engine.Engine [cached since 2005s ago] (2,)
2026-02-11 00:56:26,357 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:26,357 INFO sqlalchemy.engine.Engine [cached since 2005s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 26, 295967, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:26,364 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:56:26,364 INFO sqlalchemy.engine.Engine [cached since 2005s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 56, 26, 363443, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:56:26,370 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:56:26,371 INFO sqlalchemy.engine.Engine [cached since 816.8s ago] ('supreme',)
2026-02-11 00:56:26,377 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:56:26,378 INFO sqlalchemy.engine.Engine [cached since 816.8s ago] (2,)
2026-02-11 00:56:26,384 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54182 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:56:30,169 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:56:30,170 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:56:30,170 INFO sqlalchemy.engine.Engine [cached since 2009s ago] ('Bagong99',)
2026-02-11 00:56:30,183 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54190 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:56:36,279 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:56:36,280 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:56:36,280 INFO sqlalchemy.engine.Engine [cached since 2015s ago] ('Bagong99',)
2026-02-11 00:56:36,287 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:56:36,287 INFO sqlalchemy.engine.Engine [cached since 2015s ago] (2,)
2026-02-11 00:56:36,292 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:56:36,292 INFO sqlalchemy.engine.Engine [cached since 2015s ago] ('active', 2)
2026-02-11 00:56:36,298 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:56:36,298 INFO sqlalchemy.engine.Engine [cached since 2015s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:56:36,305 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:36,305 INFO sqlalchemy.engine.Engine [cached since 2015s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 36, 286338, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:36,312 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:36,312 INFO sqlalchemy.engine.Engine [cached since 2015s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 36, 286338, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:36,317 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:56:36,317 INFO sqlalchemy.engine.Engine [cached since 2015s ago] (2,)
2026-02-11 00:56:36,321 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:56:36,321 INFO sqlalchemy.engine.Engine [cached since 2015s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 36, 286338, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:36,327 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:56:36,327 INFO sqlalchemy.engine.Engine [cached since 2015s ago] ('pending', 'running', 2, 10)
2026-02-11 00:56:36,334 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:56:36,334 INFO sqlalchemy.engine.Engine [cached since 2015s ago] (2,)
2026-02-11 00:56:36,342 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:36,342 INFO sqlalchemy.engine.Engine [cached since 2015s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 36, 286338, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:36,350 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:56:36,350 INFO sqlalchemy.engine.Engine [cached since 2015s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 56, 36, 349314, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:56:36,366 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:56:36,366 INFO sqlalchemy.engine.Engine [cached since 826.8s ago] ('supreme',)
2026-02-11 00:56:36,376 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:56:36,376 INFO sqlalchemy.engine.Engine [cached since 826.8s ago] (2,)
2026-02-11 00:56:36,382 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54201 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
                ~~~~~~~~~~~~~^~~~~~~~
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:56:40,164 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:56:40,166 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:56:40,166 INFO sqlalchemy.engine.Engine [cached since 2019s ago] ('Bagong99',)
2026-02-11 00:56:40,173 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54219 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:56:46,290 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:56:46,291 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:56:46,291 INFO sqlalchemy.engine.Engine [cached since 2025s ago] ('Bagong99',)
2026-02-11 00:56:46,304 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:56:46,305 INFO sqlalchemy.engine.Engine [cached since 2025s ago] (2,)
2026-02-11 00:56:46,311 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:56:46,311 INFO sqlalchemy.engine.Engine [cached since 2025s ago] ('active', 2)
2026-02-11 00:56:46,319 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:56:46,319 INFO sqlalchemy.engine.Engine [cached since 2025s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:56:46,323 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:46,323 INFO sqlalchemy.engine.Engine [cached since 2025s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 46, 304166, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:46,329 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:46,329 INFO sqlalchemy.engine.Engine [cached since 2025s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 46, 304166, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:46,334 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:56:46,334 INFO sqlalchemy.engine.Engine [cached since 2025s ago] (2,)
2026-02-11 00:56:46,340 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:56:46,340 INFO sqlalchemy.engine.Engine [cached since 2025s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 46, 304166, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:46,345 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:56:46,346 INFO sqlalchemy.engine.Engine [cached since 2025s ago] ('pending', 'running', 2, 10)
2026-02-11 00:56:46,357 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:56:46,357 INFO sqlalchemy.engine.Engine [cached since 2025s ago] (2,)
2026-02-11 00:56:46,365 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:46,365 INFO sqlalchemy.engine.Engine [cached since 2025s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 46, 304166, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:46,385 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:56:46,385 INFO sqlalchemy.engine.Engine [cached since 2025s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 56, 46, 384190, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:56:46,392 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:56:46,392 INFO sqlalchemy.engine.Engine [cached since 836.8s ago] ('supreme',)
2026-02-11 00:56:46,399 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:56:46,400 INFO sqlalchemy.engine.Engine [cached since 836.8s ago] (2,)
2026-02-11 00:56:46,406 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54242 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:56:50,160 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:56:50,161 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:56:50,161 INFO sqlalchemy.engine.Engine [cached since 2029s ago] ('Bagong99',)
2026-02-11 00:56:50,170 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54252 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:56:56,287 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:56:56,289 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:56:56,289 INFO sqlalchemy.engine.Engine [cached since 2035s ago] ('Bagong99',)
2026-02-11 00:56:56,302 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:56:56,302 INFO sqlalchemy.engine.Engine [cached since 2035s ago] (2,)
2026-02-11 00:56:56,309 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:56:56,309 INFO sqlalchemy.engine.Engine [cached since 2035s ago] ('active', 2)
2026-02-11 00:56:56,319 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:56:56,320 INFO sqlalchemy.engine.Engine [cached since 2035s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:56:56,327 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:56,327 INFO sqlalchemy.engine.Engine [cached since 2035s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 56, 301338, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:56,333 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:56,334 INFO sqlalchemy.engine.Engine [cached since 2035s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 56, 301338, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:56,341 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:56:56,341 INFO sqlalchemy.engine.Engine [cached since 2035s ago] (2,)
2026-02-11 00:56:56,346 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:56:56,346 INFO sqlalchemy.engine.Engine [cached since 2035s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 56, 301338, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:56,354 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:56:56,354 INFO sqlalchemy.engine.Engine [cached since 2035s ago] ('pending', 'running', 2, 10)
2026-02-11 00:56:56,361 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:56:56,362 INFO sqlalchemy.engine.Engine [cached since 2035s ago] (2,)
2026-02-11 00:56:56,369 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:56:56,369 INFO sqlalchemy.engine.Engine [cached since 2035s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 56, 56, 301338, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:56:56,378 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:56:56,378 INFO sqlalchemy.engine.Engine [cached since 2035s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 56, 56, 377327, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:56:56,386 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:56:56,386 INFO sqlalchemy.engine.Engine [cached since 846.8s ago] ('supreme',)
2026-02-11 00:56:56,392 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:56:56,392 INFO sqlalchemy.engine.Engine [cached since 846.8s ago] (2,)
2026-02-11 00:56:56,400 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54269 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:00,183 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:00,184 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:00,184 INFO sqlalchemy.engine.Engine [cached since 2039s ago] ('Bagong99',)
2026-02-11 00:57:00,191 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54277 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:06,286 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:06,287 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:06,288 INFO sqlalchemy.engine.Engine [cached since 2045s ago] ('Bagong99',)
2026-02-11 00:57:06,292 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:57:06,292 INFO sqlalchemy.engine.Engine [cached since 2045s ago] (2,)
2026-02-11 00:57:06,301 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:57:06,302 INFO sqlalchemy.engine.Engine [cached since 2045s ago] ('active', 2)
2026-02-11 00:57:06,309 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:57:06,309 INFO sqlalchemy.engine.Engine [cached since 2045s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:57:06,316 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:06,316 INFO sqlalchemy.engine.Engine [cached since 2045s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 6, 292195, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:06,321 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:06,321 INFO sqlalchemy.engine.Engine [cached since 2045s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 6, 292195, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:06,327 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:57:06,327 INFO sqlalchemy.engine.Engine [cached since 2045s ago] (2,)
2026-02-11 00:57:06,333 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:57:06,334 INFO sqlalchemy.engine.Engine [cached since 2045s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 6, 292195, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:06,343 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:57:06,343 INFO sqlalchemy.engine.Engine [cached since 2045s ago] ('pending', 'running', 2, 10)
2026-02-11 00:57:06,370 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:57:06,370 INFO sqlalchemy.engine.Engine [cached since 2045s ago] (2,)
2026-02-11 00:57:06,378 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:06,378 INFO sqlalchemy.engine.Engine [cached since 2045s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 6, 292195, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:06,385 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:57:06,385 INFO sqlalchemy.engine.Engine [cached since 2045s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 57, 6, 384235, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:57:06,391 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:57:06,391 INFO sqlalchemy.engine.Engine [cached since 856.8s ago] ('supreme',)
2026-02-11 00:57:06,399 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:57:06,399 INFO sqlalchemy.engine.Engine [cached since 856.8s ago] (2,)
2026-02-11 00:57:06,406 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54289 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:10,168 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:10,169 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:10,169 INFO sqlalchemy.engine.Engine [cached since 2049s ago] ('Bagong99',)
2026-02-11 00:57:10,175 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54317 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:16,277 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:16,278 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:16,279 INFO sqlalchemy.engine.Engine [cached since 2055s ago] ('Bagong99',)
2026-02-11 00:57:16,285 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:57:16,285 INFO sqlalchemy.engine.Engine [cached since 2055s ago] (2,)
2026-02-11 00:57:16,291 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:57:16,291 INFO sqlalchemy.engine.Engine [cached since 2055s ago] ('active', 2)
2026-02-11 00:57:16,297 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:57:16,297 INFO sqlalchemy.engine.Engine [cached since 2055s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:57:16,304 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:16,304 INFO sqlalchemy.engine.Engine [cached since 2055s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 16, 284202, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:16,310 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:16,310 INFO sqlalchemy.engine.Engine [cached since 2055s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 16, 284202, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:16,315 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:57:16,315 INFO sqlalchemy.engine.Engine [cached since 2055s ago] (2,)
2026-02-11 00:57:16,320 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:57:16,320 INFO sqlalchemy.engine.Engine [cached since 2055s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 16, 284202, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:16,324 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:57:16,324 INFO sqlalchemy.engine.Engine [cached since 2055s ago] ('pending', 'running', 2, 10)
2026-02-11 00:57:16,335 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:57:16,336 INFO sqlalchemy.engine.Engine [cached since 2055s ago] (2,)
2026-02-11 00:57:16,342 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:16,342 INFO sqlalchemy.engine.Engine [cached since 2055s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 16, 284202, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:16,350 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:57:16,351 INFO sqlalchemy.engine.Engine [cached since 2055s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 57, 16, 349328, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:57:16,357 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:57:16,357 INFO sqlalchemy.engine.Engine [cached since 866.7s ago] ('supreme',)
2026-02-11 00:57:16,363 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:57:16,363 INFO sqlalchemy.engine.Engine [cached since 866.7s ago] (2,)
2026-02-11 00:57:16,370 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54336 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:20,160 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:20,162 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:20,162 INFO sqlalchemy.engine.Engine [cached since 2059s ago] ('Bagong99',)
2026-02-11 00:57:20,169 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54346 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:57:25,547 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:25,548 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:25,548 INFO sqlalchemy.engine.Engine [cached since 2064s ago] ('Bagong99',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:54364 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:57:25,554 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:25,596 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:25,597 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:25,597 INFO sqlalchemy.engine.Engine [cached since 2064s ago] ('Bagong99',)
2026-02-11 00:57:25,598 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:25,598 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:25,598 INFO sqlalchemy.engine.Engine [cached since 2064s ago] ('Bagong99',)
2026-02-11 00:57:25,608 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:57:25,609 INFO sqlalchemy.engine.Engine [cached since 2064s ago] (2,)
2026-02-11 00:57:25,612 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:57:25,612 INFO sqlalchemy.engine.Engine [cached since 2064s ago] (2,)
2026-02-11 00:57:25,615 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:57:25,615 INFO sqlalchemy.engine.Engine [cached since 2064s ago] ('active', 2)
2026-02-11 00:57:25,618 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:57:25,619 INFO sqlalchemy.engine.Engine [cached since 2064s ago] ('active', 2)
2026-02-11 00:57:25,621 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:57:25,621 INFO sqlalchemy.engine.Engine [cached since 2064s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:57:25,624 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:57:25,624 INFO sqlalchemy.engine.Engine [cached since 2064s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:57:25,627 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:25,627 INFO sqlalchemy.engine.Engine [cached since 2064s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 25, 607577, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:25,630 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:25,631 INFO sqlalchemy.engine.Engine [cached since 2064s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 25, 611561, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:25,633 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:25,633 INFO sqlalchemy.engine.Engine [cached since 2064s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 25, 607577, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:25,636 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:25,636 INFO sqlalchemy.engine.Engine [cached since 2064s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 25, 611561, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:25,637 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:57:25,637 INFO sqlalchemy.engine.Engine [cached since 2064s ago] (2,)
2026-02-11 00:57:25,642 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:57:25,642 INFO sqlalchemy.engine.Engine [cached since 2064s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 25, 607577, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:25,643 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:57:25,644 INFO sqlalchemy.engine.Engine [cached since 2064s ago] (2,)
2026-02-11 00:57:25,648 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:57:25,648 INFO sqlalchemy.engine.Engine [cached since 2064s ago] ('pending', 'running', 2, 10)
2026-02-11 00:57:25,650 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:57:25,650 INFO sqlalchemy.engine.Engine [cached since 2064s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 25, 611561, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:25,655 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:57:25,655 INFO sqlalchemy.engine.Engine [cached since 2064s ago] (2,)
2026-02-11 00:57:25,657 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:57:25,657 INFO sqlalchemy.engine.Engine [cached since 2064s ago] ('pending', 'running', 2, 10)
2026-02-11 00:57:25,660 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:25,660 INFO sqlalchemy.engine.Engine [cached since 2064s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 25, 607577, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:25,663 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:57:25,664 INFO sqlalchemy.engine.Engine [cached since 2064s ago] (2,)
2026-02-11 00:57:25,666 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:57:25,666 INFO sqlalchemy.engine.Engine [cached since 2064s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 57, 25, 665596, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:57:25,668 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:25,668 INFO sqlalchemy.engine.Engine [cached since 2064s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 25, 611561, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:25,671 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:57:25,671 INFO sqlalchemy.engine.Engine [cached since 876.1s ago] ('supreme',)
2026-02-11 00:57:25,675 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:57:25,675 INFO sqlalchemy.engine.Engine [cached since 2064s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 57, 25, 674302, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:57:25,677 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:57:25,677 INFO sqlalchemy.engine.Engine [cached since 876.1s ago] (2,)
2026-02-11 00:57:25,680 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:57:25,680 INFO sqlalchemy.engine.Engine [cached since 876.1s ago] ('supreme',)
2026-02-11 00:57:25,681 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:57:25,684 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:57:25,684 INFO sqlalchemy.engine.Engine [cached since 876.1s ago] (2,)
2026-02-11 00:57:25,688 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54367 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:54364 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:57:26,336 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:26,337 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:26,338 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('Bagong99',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:54373 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:57:26,348 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:26,393 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:26,394 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:26,394 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('Bagong99',)
2026-02-11 00:57:26,399 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:57:26,400 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,405 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:57:26,405 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('active', 2)
2026-02-11 00:57:26,405 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:26,406 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:26,406 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('Bagong99',)
2026-02-11 00:57:26,410 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:57:26,410 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:57:26,412 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:57:26,412 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,415 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,415 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 398440, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,417 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:57:26,417 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('active', 2)
2026-02-11 00:57:26,420 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,420 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 398440, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,422 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:57:26,422 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:57:26,425 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:57:26,425 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,427 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,427 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 411676, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:57:26,432 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:57:26,432 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 398440, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,435 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,435 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 411676, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,438 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:57:26,439 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('pending', 'running', 2, 10)
2026-02-11 00:57:26,440 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:57:26,440 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,445 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:57:26,445 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,447 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:57:26,447 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 411676, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,449 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,449 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 398440, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,451 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:57:26,452 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('pending', 'running', 2, 10)
2026-02-11 00:57:26,455 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:57:26,455 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 57, 26, 454571, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:57:26,457 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:57:26,457 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,460 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:57:26,461 INFO sqlalchemy.engine.Engine [cached since 876.8s ago] ('supreme',)
2026-02-11 00:57:26,462 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,463 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 411676, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,469 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:57:26,470 INFO sqlalchemy.engine.Engine [cached since 876.8s ago] (2,)
2026-02-11 00:57:26,472 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:57:26,472 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 57, 26, 471528, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:57:26,474 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:57:26,475 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:26,475 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:26,475 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('Bagong99',)
2026-02-11 00:57:26,477 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:57:26,477 INFO sqlalchemy.engine.Engine [cached since 876.9s ago] ('supreme',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:54381 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:57:26,481 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:57:26,482 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:57:26,482 INFO sqlalchemy.engine.Engine [cached since 876.9s ago] (2,)
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
2026-02-11 00:57:26,488 INFO sqlalchemy.engine.Engine ROLLBACK
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:26,534 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:26,534 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:26,534 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('Bagong99',)
2026-02-11 00:57:26,535 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:26,535 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:26,535 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('Bagong99',)
2026-02-11 00:57:26,540 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:57:26,540 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,541 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:57:26,541 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,546 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:57:26,546 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('active', 2)
2026-02-11 00:57:26,546 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:57:26,547 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('active', 2)
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:57:26,561 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:57:26,561 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:57:26,562 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:57:26,562 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:57:26,567 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,567 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 539756, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,568 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,568 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 541191, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,574 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,574 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 539756, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,578 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,578 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 541191, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,579 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:57:26,579 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,583 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:57:26,583 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,585 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:57:26,586 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 539756, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,588 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:57:26,588 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 541191, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,590 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:57:26,590 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('pending', 'running', 2, 10)
2026-02-11 00:57:26,592 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:57:26,592 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('pending', 'running', 2, 10)
2026-02-11 00:57:26,595 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:57:26,595 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,597 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:57:26,598 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,600 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,600 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 539756, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,602 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,602 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 541191, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,605 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:57:26,605 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 57, 26, 604506, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:57:26,606 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:26,606 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:26,606 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('Bagong99',)
2026-02-11 00:57:26,608 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:57:26,608 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 57, 26, 607381, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:57:26,615 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:57:26,615 INFO sqlalchemy.engine.Engine [cached since 877s ago] ('supreme',)
2026-02-11 00:57:26,616 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:57:26,616 INFO sqlalchemy.engine.Engine [cached since 877s ago] ('supreme',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:54389 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:57:26,617 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:57:26,621 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:57:26,621 INFO sqlalchemy.engine.Engine [cached since 877s ago] (2,)
2026-02-11 00:57:26,622 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:57:26,622 INFO sqlalchemy.engine.Engine [cached since 877s ago] (2,)
2026-02-11 00:57:26,625 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:26,629 INFO sqlalchemy.engine.Engine ROLLBACK
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:26,662 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:26,663 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:26,663 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('Bagong99',)
2026-02-11 00:57:26,663 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:26,663 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:26,663 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('Bagong99',)
2026-02-11 00:57:26,667 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:57:26,667 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,669 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:57:26,669 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,673 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:57:26,673 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('active', 2)
2026-02-11 00:57:26,674 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:57:26,675 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('active', 2)
2026-02-11 00:57:26,681 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:57:26,681 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:57:26,683 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:57:26,683 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:57:26,687 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,687 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 667328, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,690 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,690 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 668886, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,692 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,692 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 667328, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,695 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,696 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 668886, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,697 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:57:26,697 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,700 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:57:26,700 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,702 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:57:26,703 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 667328, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,707 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:57:26,707 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 668886, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,708 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:57:26,708 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('pending', 'running', 2, 10)
2026-02-11 00:57:26,713 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:57:26,713 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('pending', 'running', 2, 10)
2026-02-11 00:57:26,715 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:57:26,715 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,729 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:57:26,729 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2,)
2026-02-11 00:57:26,730 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,730 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 667328, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,736 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:26,736 INFO sqlalchemy.engine.Engine [cached since 2065s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 26, 668886, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:26,738 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:57:26,738 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 57, 26, 737618, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:57:26,742 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:57:26,742 INFO sqlalchemy.engine.Engine [cached since 2065s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 57, 26, 742267, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:57:26,745 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:57:26,745 INFO sqlalchemy.engine.Engine [cached since 877.1s ago] ('supreme',)
2026-02-11 00:57:26,747 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:57:26,747 INFO sqlalchemy.engine.Engine [cached since 877.1s ago] ('supreme',)
2026-02-11 00:57:26,749 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:57:26,749 INFO sqlalchemy.engine.Engine [cached since 877.1s ago] (2,)
2026-02-11 00:57:26,753 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:57:26,754 INFO sqlalchemy.engine.Engine [cached since 877.1s ago] (2,)
2026-02-11 00:57:26,755 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:57:26,760 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54392 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:54389 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:30,178 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:30,179 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:30,179 INFO sqlalchemy.engine.Engine [cached since 2069s ago] ('Bagong99',)
2026-02-11 00:57:30,187 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54401 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:37,007 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:37,008 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:37,008 INFO sqlalchemy.engine.Engine [cached since 2075s ago] ('Bagong99',)
2026-02-11 00:57:37,017 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:57:37,017 INFO sqlalchemy.engine.Engine [cached since 2075s ago] (2,)
2026-02-11 00:57:37,024 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:57:37,024 INFO sqlalchemy.engine.Engine [cached since 2075s ago] ('active', 2)
2026-02-11 00:57:37,032 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:57:37,032 INFO sqlalchemy.engine.Engine [cached since 2075s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:57:37,039 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:37,040 INFO sqlalchemy.engine.Engine [cached since 2075s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 37, 16301, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:37,047 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:37,047 INFO sqlalchemy.engine.Engine [cached since 2075s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 37, 16301, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:37,054 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:57:37,054 INFO sqlalchemy.engine.Engine [cached since 2075s ago] (2,)
2026-02-11 00:57:37,061 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:57:37,062 INFO sqlalchemy.engine.Engine [cached since 2075s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 37, 16301, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:37,068 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:57:37,068 INFO sqlalchemy.engine.Engine [cached since 2075s ago] ('pending', 'running', 2, 10)
2026-02-11 00:57:37,075 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:57:37,075 INFO sqlalchemy.engine.Engine [cached since 2075s ago] (2,)
2026-02-11 00:57:37,081 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:37,081 INFO sqlalchemy.engine.Engine [cached since 2075s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 37, 16301, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:37,089 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:57:37,089 INFO sqlalchemy.engine.Engine [cached since 2075s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 57, 37, 88472, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:57:37,095 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:57:37,095 INFO sqlalchemy.engine.Engine [cached since 887.5s ago] ('supreme',)
2026-02-11 00:57:37,102 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:57:37,102 INFO sqlalchemy.engine.Engine [cached since 887.5s ago] (2,)
2026-02-11 00:57:37,108 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54412 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:40,169 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:40,169 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:40,170 INFO sqlalchemy.engine.Engine [cached since 2079s ago] ('Bagong99',)
2026-02-11 00:57:40,177 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54419 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:47,008 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:47,008 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:47,009 INFO sqlalchemy.engine.Engine [cached since 2085s ago] ('Bagong99',)
2026-02-11 00:57:47,015 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:57:47,015 INFO sqlalchemy.engine.Engine [cached since 2085s ago] (2,)
2026-02-11 00:57:47,021 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:57:47,021 INFO sqlalchemy.engine.Engine [cached since 2085s ago] ('active', 2)
2026-02-11 00:57:47,027 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:57:47,027 INFO sqlalchemy.engine.Engine [cached since 2085s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:57:47,035 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:47,036 INFO sqlalchemy.engine.Engine [cached since 2085s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 47, 14732, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:47,043 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:47,044 INFO sqlalchemy.engine.Engine [cached since 2085s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 47, 14732, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:47,051 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:57:47,051 INFO sqlalchemy.engine.Engine [cached since 2085s ago] (2,)
2026-02-11 00:57:47,058 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:57:47,058 INFO sqlalchemy.engine.Engine [cached since 2085s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 47, 14732, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:47,066 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:57:47,066 INFO sqlalchemy.engine.Engine [cached since 2085s ago] ('pending', 'running', 2, 10)
2026-02-11 00:57:47,076 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:57:47,076 INFO sqlalchemy.engine.Engine [cached since 2085s ago] (2,)
2026-02-11 00:57:47,083 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:47,083 INFO sqlalchemy.engine.Engine [cached since 2085s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 47, 14732, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:47,091 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:57:47,092 INFO sqlalchemy.engine.Engine [cached since 2085s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 57, 47, 90968, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:57:47,098 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:57:47,099 INFO sqlalchemy.engine.Engine [cached since 897.5s ago] ('supreme',)
2026-02-11 00:57:47,105 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:57:47,106 INFO sqlalchemy.engine.Engine [cached since 897.5s ago] (2,)
2026-02-11 00:57:47,112 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54436 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:50,157 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:50,158 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:50,158 INFO sqlalchemy.engine.Engine [cached since 2089s ago] ('Bagong99',)
2026-02-11 00:57:50,164 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54445 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: POST /api/v1/accounts/auth/login
2026-02-11 00:57:58,716 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:58,717 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:58,717 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('Bagong99',)
2026-02-11 00:57:58,741 INFO sqlalchemy.engine.Engine UPDATE users SET last_jti=%s WHERE users.id = %s
2026-02-11 00:57:58,741 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('a99396b6-17d0-4f64-8e56-533a9440604b', 2)
2026-02-11 00:57:58,745 INFO sqlalchemy.engine.Engine COMMIT
âœ… Response: POST /api/v1/accounts/auth/login -> 200
INFO:     127.0.0.1:54474 - "POST /api/v1/accounts/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:54474 - "OPTIONS /api/v1/accounts/auth/me HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:57:58,794 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:58,795 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:58,795 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('Bagong99',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:54474 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:57:58,802 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54474 - "OPTIONS /api/v1/dashboard/stats HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:58,837 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:58,837 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:58,837 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('Bagong99',)
2026-02-11 00:57:58,843 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:57:58,843 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (2,)
2026-02-11 00:57:58,849 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:57:58,850 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('active', 2)
2026-02-11 00:57:58,854 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:57:58,854 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:57:58,860 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:58,860 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 58, 842646, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:58,866 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:58,866 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 58, 842646, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:58,873 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:57:58,874 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (2,)
2026-02-11 00:57:58,879 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:57:58,879 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 58, 842646, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:58,883 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:57:58,883 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('pending', 'running', 2, 10)
2026-02-11 00:57:58,890 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:57:58,890 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (2,)
2026-02-11 00:57:58,896 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:58,896 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 58, 842646, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:58,902 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:57:58,902 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 57, 58, 901946, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:57:58,908 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:57:58,908 INFO sqlalchemy.engine.Engine [cached since 909.3s ago] ('supreme',)
2026-02-11 00:57:58,913 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:57:58,913 INFO sqlalchemy.engine.Engine [cached since 909.3s ago] (2,)
2026-02-11 00:57:58,919 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54474 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
INFO:     127.0.0.1:54482 - "OPTIONS /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:57:59,001 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:59,002 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:59,002 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('Bagong99',)
2026-02-11 00:57:59,002 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:57:59,002 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:57:59,002 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('Bagong99',)
2026-02-11 00:57:59,007 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:57:59,007 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (2,)
2026-02-11 00:57:59,010 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:57:59,010 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (2,)
2026-02-11 00:57:59,012 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:57:59,012 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('active', 2)
2026-02-11 00:57:59,014 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:57:59,014 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('active', 2)
2026-02-11 00:57:59,017 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:57:59,018 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:57:59,020 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:57:59,020 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:57:59,024 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:59,025 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 59, 6631, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:59,026 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:59,026 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 59, 9231, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:59,032 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:59,032 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 59, 6631, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:59,034 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:59,034 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 59, 9231, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:59,036 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:57:59,036 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (2,)
2026-02-11 00:57:59,038 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:57:59,039 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (2,)
2026-02-11 00:57:59,042 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:57:59,043 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 59, 6631, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:59,045 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:57:59,045 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 59, 9231, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:59,048 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:57:59,048 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('pending', 'running', 2, 10)
2026-02-11 00:57:59,051 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:57:59,051 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('pending', 'running', 2, 10)
2026-02-11 00:57:59,054 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:57:59,054 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (2,)
2026-02-11 00:57:59,058 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:57:59,059 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (2,)
2026-02-11 00:57:59,060 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:59,060 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 59, 6631, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:59,062 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:57:59,062 INFO sqlalchemy.engine.Engine [cached since 2097s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 57, 59, 9231, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:57:59,066 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:57:59,067 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 57, 59, 65291, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:57:59,070 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:57:59,070 INFO sqlalchemy.engine.Engine [cached since 2097s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 57, 59, 69144, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:57:59,072 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:57:59,072 INFO sqlalchemy.engine.Engine [cached since 909.5s ago] ('supreme',)
2026-02-11 00:57:59,075 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:57:59,075 INFO sqlalchemy.engine.Engine [cached since 909.5s ago] ('supreme',)
2026-02-11 00:57:59,077 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:57:59,077 INFO sqlalchemy.engine.Engine [cached since 909.5s ago] (2,)
2026-02-11 00:57:59,080 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:57:59,080 INFO sqlalchemy.engine.Engine [cached since 909.5s ago] (2,)
2026-02-11 00:57:59,082 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:57:59,086 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54482 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:54481 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:58:00,171 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:58:00,172 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:58:00,172 INFO sqlalchemy.engine.Engine [cached since 2099s ago] ('Bagong99',)
2026-02-11 00:58:00,187 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54488 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:58:10,193 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:58:10,194 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:58:10,194 INFO sqlalchemy.engine.Engine [cached since 2109s ago] ('Bagong99',)
2026-02-11 00:58:10,200 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54516 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:58:20,188 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:58:20,189 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:58:20,189 INFO sqlalchemy.engine.Engine [cached since 2119s ago] ('Bagong99',)
2026-02-11 00:58:20,198 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54543 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:58:30,167 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:58:30,168 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:58:30,168 INFO sqlalchemy.engine.Engine [cached since 2129s ago] ('Bagong99',)
2026-02-11 00:58:30,173 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54574 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: POST /api/v1/accounts/auth/login
2026-02-11 00:58:35,190 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:58:35,191 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:58:35,191 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('Bagong99',)
2026-02-11 00:58:35,225 INFO sqlalchemy.engine.Engine UPDATE users SET last_jti=%s WHERE users.id = %s
2026-02-11 00:58:35,225 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('16163852-21ec-43ab-a1d1-7d3dcc839fae', 2)
2026-02-11 00:58:35,229 INFO sqlalchemy.engine.Engine COMMIT
âœ… Response: POST /api/v1/accounts/auth/login -> 200
INFO:     127.0.0.1:54586 - "POST /api/v1/accounts/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:54586 - "OPTIONS /api/v1/accounts/auth/me HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 00:58:35,277 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:58:35,278 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:58:35,278 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('Bagong99',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:54586 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 00:58:35,283 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54586 - "OPTIONS /api/v1/dashboard/stats HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:58:35,319 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:58:35,320 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:58:35,320 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('Bagong99',)
2026-02-11 00:58:35,331 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:58:35,331 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (2,)
2026-02-11 00:58:35,337 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:58:35,337 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('active', 2)
2026-02-11 00:58:35,343 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:58:35,343 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:58:35,349 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:58:35,349 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 35, 329905, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:35,355 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:58:35,355 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 35, 329905, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:35,361 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:58:35,361 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (2,)
2026-02-11 00:58:35,364 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:58:35,365 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 35, 329905, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:35,371 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:58:35,371 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('pending', 'running', 2, 10)
2026-02-11 00:58:35,377 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:58:35,378 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (2,)
2026-02-11 00:58:35,383 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:58:35,383 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 35, 329905, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:35,392 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:58:35,393 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 58, 35, 390900, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:58:35,400 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:58:35,400 INFO sqlalchemy.engine.Engine [cached since 945.8s ago] ('supreme',)
2026-02-11 00:58:35,406 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:58:35,406 INFO sqlalchemy.engine.Engine [cached since 945.8s ago] (2,)
2026-02-11 00:58:35,412 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54586 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
INFO:     127.0.0.1:54596 - "OPTIONS /api/v1/dashboard/stats?period=today HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:58:35,516 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:58:35,517 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:58:35,517 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('Bagong99',)
2026-02-11 00:58:35,518 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:58:35,518 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:58:35,519 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('Bagong99',)
2026-02-11 00:58:35,524 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:58:35,524 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (2,)
2026-02-11 00:58:35,525 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:58:35,525 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (2,)
2026-02-11 00:58:35,529 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:58:35,529 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('active', 2)
2026-02-11 00:58:35,531 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:58:35,531 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('active', 2)
2026-02-11 00:58:35,535 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:58:35,535 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:58:35,537 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:58:35,538 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:58:35,540 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:58:35,540 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 35, 523823, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:35,543 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:58:35,543 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 35, 525129, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:35,545 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:58:35,545 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 35, 523823, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:35,549 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:58:35,549 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 35, 525129, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:35,550 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:58:35,551 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (2,)
2026-02-11 00:58:35,553 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:58:35,554 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (2,)
2026-02-11 00:58:35,554 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:58:35,555 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 35, 523823, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:35,558 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:58:35,558 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 35, 525129, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:35,560 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:58:35,560 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('pending', 'running', 2, 10)
2026-02-11 00:58:35,564 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:58:35,564 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('pending', 'running', 2, 10)
2026-02-11 00:58:35,567 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:58:35,567 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (2,)
2026-02-11 00:58:35,572 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:58:35,572 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (2,)
2026-02-11 00:58:35,574 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:58:35,574 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 35, 523823, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:35,576 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:58:35,576 INFO sqlalchemy.engine.Engine [cached since 2134s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 35, 525129, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:35,580 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:58:35,580 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 58, 35, 579391, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:58:35,581 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:58:35,581 INFO sqlalchemy.engine.Engine [cached since 2134s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 58, 35, 581155, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:58:35,586 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:58:35,586 INFO sqlalchemy.engine.Engine [cached since 946s ago] ('supreme',)
2026-02-11 00:58:35,587 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:58:35,587 INFO sqlalchemy.engine.Engine [cached since 946s ago] ('supreme',)
2026-02-11 00:58:35,591 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:58:35,591 INFO sqlalchemy.engine.Engine [cached since 946s ago] (2,)
2026-02-11 00:58:35,592 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:58:35,592 INFO sqlalchemy.engine.Engine [cached since 946s ago] (2,)
2026-02-11 00:58:35,597 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 00:58:35,598 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54595 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:54596 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:58:40,165 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:58:40,166 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:58:40,166 INFO sqlalchemy.engine.Engine [cached since 2139s ago] ('Bagong99',)
2026-02-11 00:58:40,174 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54610 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:58:45,498 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:58:45,499 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:58:45,499 INFO sqlalchemy.engine.Engine [cached since 2144s ago] ('Bagong99',)
2026-02-11 00:58:45,507 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:58:45,507 INFO sqlalchemy.engine.Engine [cached since 2144s ago] (2,)
2026-02-11 00:58:45,513 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:58:45,513 INFO sqlalchemy.engine.Engine [cached since 2144s ago] ('active', 2)
2026-02-11 00:58:45,518 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:58:45,518 INFO sqlalchemy.engine.Engine [cached since 2144s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:58:45,524 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:58:45,525 INFO sqlalchemy.engine.Engine [cached since 2144s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 45, 506274, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:45,532 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:58:45,532 INFO sqlalchemy.engine.Engine [cached since 2144s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 45, 506274, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:45,539 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:58:45,539 INFO sqlalchemy.engine.Engine [cached since 2144s ago] (2,)
2026-02-11 00:58:45,545 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:58:45,545 INFO sqlalchemy.engine.Engine [cached since 2144s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 45, 506274, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:45,550 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:58:45,550 INFO sqlalchemy.engine.Engine [cached since 2144s ago] ('pending', 'running', 2, 10)
2026-02-11 00:58:45,578 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:58:45,578 INFO sqlalchemy.engine.Engine [cached since 2144s ago] (2,)
2026-02-11 00:58:45,584 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:58:45,584 INFO sqlalchemy.engine.Engine [cached since 2144s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 45, 506274, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:45,591 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:58:45,592 INFO sqlalchemy.engine.Engine [cached since 2144s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 58, 45, 591281, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:58:45,598 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:58:45,598 INFO sqlalchemy.engine.Engine [cached since 956s ago] ('supreme',)
2026-02-11 00:58:45,606 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:58:45,607 INFO sqlalchemy.engine.Engine [cached since 956s ago] (2,)
2026-02-11 00:58:45,612 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54621 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:58:50,159 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:58:50,160 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:58:50,160 INFO sqlalchemy.engine.Engine [cached since 2149s ago] ('Bagong99',)
2026-02-11 00:58:50,170 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54633 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:58:55,509 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:58:55,511 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:58:55,511 INFO sqlalchemy.engine.Engine [cached since 2154s ago] ('Bagong99',)
2026-02-11 00:58:55,528 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:58:55,528 INFO sqlalchemy.engine.Engine [cached since 2154s ago] (2,)
2026-02-11 00:58:55,534 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:58:55,534 INFO sqlalchemy.engine.Engine [cached since 2154s ago] ('active', 2)
2026-02-11 00:58:55,540 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:58:55,540 INFO sqlalchemy.engine.Engine [cached since 2154s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:58:55,545 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:58:55,545 INFO sqlalchemy.engine.Engine [cached since 2154s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 55, 527537, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:55,552 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:58:55,552 INFO sqlalchemy.engine.Engine [cached since 2154s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 55, 527537, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:55,557 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:58:55,557 INFO sqlalchemy.engine.Engine [cached since 2154s ago] (2,)
2026-02-11 00:58:55,562 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:58:55,563 INFO sqlalchemy.engine.Engine [cached since 2154s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 55, 527537, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:55,571 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:58:55,571 INFO sqlalchemy.engine.Engine [cached since 2154s ago] ('pending', 'running', 2, 10)
2026-02-11 00:58:55,578 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:58:55,578 INFO sqlalchemy.engine.Engine [cached since 2154s ago] (2,)
2026-02-11 00:58:55,585 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:58:55,585 INFO sqlalchemy.engine.Engine [cached since 2154s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 58, 55, 527537, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:58:55,595 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:58:55,595 INFO sqlalchemy.engine.Engine [cached since 2154s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 58, 55, 593589, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:58:55,603 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:58:55,603 INFO sqlalchemy.engine.Engine [cached since 966s ago] ('supreme',)
2026-02-11 00:58:55,611 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:58:55,612 INFO sqlalchemy.engine.Engine [cached since 966s ago] (2,)
2026-02-11 00:58:55,617 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54644 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:59:00,169 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:59:00,170 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:59:00,170 INFO sqlalchemy.engine.Engine [cached since 2159s ago] ('Bagong99',)
2026-02-11 00:59:00,186 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54654 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:59:05,493 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:59:05,494 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:59:05,495 INFO sqlalchemy.engine.Engine [cached since 2164s ago] ('Bagong99',)
2026-02-11 00:59:05,501 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:59:05,501 INFO sqlalchemy.engine.Engine [cached since 2164s ago] (2,)
2026-02-11 00:59:05,506 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:59:05,507 INFO sqlalchemy.engine.Engine [cached since 2164s ago] ('active', 2)
2026-02-11 00:59:05,513 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:59:05,513 INFO sqlalchemy.engine.Engine [cached since 2164s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:59:05,519 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:05,519 INFO sqlalchemy.engine.Engine [cached since 2164s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 5, 500118, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:05,524 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:05,524 INFO sqlalchemy.engine.Engine [cached since 2164s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 5, 500118, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:05,528 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:59:05,528 INFO sqlalchemy.engine.Engine [cached since 2164s ago] (2,)
2026-02-11 00:59:05,532 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:59:05,532 INFO sqlalchemy.engine.Engine [cached since 2164s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 5, 500118, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:05,539 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:59:05,540 INFO sqlalchemy.engine.Engine [cached since 2164s ago] ('pending', 'running', 2, 10)
2026-02-11 00:59:05,549 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:59:05,549 INFO sqlalchemy.engine.Engine [cached since 2164s ago] (2,)
2026-02-11 00:59:05,554 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:05,554 INFO sqlalchemy.engine.Engine [cached since 2164s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 5, 500118, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:05,562 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:59:05,562 INFO sqlalchemy.engine.Engine [cached since 2164s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 59, 5, 560901, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:59:05,568 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:59:05,568 INFO sqlalchemy.engine.Engine [cached since 976s ago] ('supreme',)
2026-02-11 00:59:05,573 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:59:05,573 INFO sqlalchemy.engine.Engine [cached since 975.9s ago] (2,)
2026-02-11 00:59:05,580 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54664 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:59:10,166 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:59:10,167 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:59:10,167 INFO sqlalchemy.engine.Engine [cached since 2169s ago] ('Bagong99',)
2026-02-11 00:59:10,173 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54673 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:59:15,503 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:59:15,504 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:59:15,504 INFO sqlalchemy.engine.Engine [cached since 2174s ago] ('Bagong99',)
2026-02-11 00:59:15,511 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:59:15,511 INFO sqlalchemy.engine.Engine [cached since 2174s ago] (2,)
2026-02-11 00:59:15,517 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:59:15,517 INFO sqlalchemy.engine.Engine [cached since 2174s ago] ('active', 2)
2026-02-11 00:59:15,523 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:59:15,523 INFO sqlalchemy.engine.Engine [cached since 2174s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:59:15,531 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:15,531 INFO sqlalchemy.engine.Engine [cached since 2174s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 15, 510584, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:15,538 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:15,539 INFO sqlalchemy.engine.Engine [cached since 2174s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 15, 510584, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:15,546 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:59:15,546 INFO sqlalchemy.engine.Engine [cached since 2174s ago] (2,)
2026-02-11 00:59:15,554 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:59:15,554 INFO sqlalchemy.engine.Engine [cached since 2174s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 15, 510584, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:15,561 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:59:15,561 INFO sqlalchemy.engine.Engine [cached since 2174s ago] ('pending', 'running', 2, 10)
2026-02-11 00:59:15,572 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:59:15,573 INFO sqlalchemy.engine.Engine [cached since 2174s ago] (2,)
2026-02-11 00:59:15,584 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:15,584 INFO sqlalchemy.engine.Engine [cached since 2174s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 15, 510584, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:15,608 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:59:15,608 INFO sqlalchemy.engine.Engine [cached since 2174s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 59, 15, 607224, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:59:15,616 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:59:15,616 INFO sqlalchemy.engine.Engine [cached since 986s ago] ('supreme',)
2026-02-11 00:59:15,623 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:59:15,623 INFO sqlalchemy.engine.Engine [cached since 986s ago] (2,)
2026-02-11 00:59:15,629 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54685 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:59:20,173 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:59:20,174 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:59:20,174 INFO sqlalchemy.engine.Engine [cached since 2179s ago] ('Bagong99',)
2026-02-11 00:59:20,185 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54693 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:59:25,504 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:59:25,505 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:59:25,505 INFO sqlalchemy.engine.Engine [cached since 2184s ago] ('Bagong99',)
2026-02-11 00:59:25,515 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:59:25,516 INFO sqlalchemy.engine.Engine [cached since 2184s ago] (2,)
2026-02-11 00:59:25,522 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:59:25,522 INFO sqlalchemy.engine.Engine [cached since 2184s ago] ('active', 2)
2026-02-11 00:59:25,528 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:59:25,528 INFO sqlalchemy.engine.Engine [cached since 2184s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:59:25,534 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:25,534 INFO sqlalchemy.engine.Engine [cached since 2184s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 25, 514789, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:25,541 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:25,541 INFO sqlalchemy.engine.Engine [cached since 2184s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 25, 514789, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:25,548 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:59:25,548 INFO sqlalchemy.engine.Engine [cached since 2184s ago] (2,)
2026-02-11 00:59:25,554 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:59:25,554 INFO sqlalchemy.engine.Engine [cached since 2184s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 25, 514789, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:25,562 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:59:25,562 INFO sqlalchemy.engine.Engine [cached since 2184s ago] ('pending', 'running', 2, 10)
2026-02-11 00:59:25,574 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:59:25,574 INFO sqlalchemy.engine.Engine [cached since 2184s ago] (2,)
2026-02-11 00:59:25,580 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:25,580 INFO sqlalchemy.engine.Engine [cached since 2184s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 25, 514789, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:25,592 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:59:25,593 INFO sqlalchemy.engine.Engine [cached since 2184s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 59, 25, 591260, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:59:25,601 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:59:25,601 INFO sqlalchemy.engine.Engine [cached since 996s ago] ('supreme',)
2026-02-11 00:59:25,608 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:59:25,608 INFO sqlalchemy.engine.Engine [cached since 996s ago] (2,)
2026-02-11 00:59:25,615 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54704 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:59:30,159 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:59:30,160 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:59:30,160 INFO sqlalchemy.engine.Engine [cached since 2189s ago] ('Bagong99',)
2026-02-11 00:59:30,166 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54713 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:59:35,503 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:59:35,504 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:59:35,505 INFO sqlalchemy.engine.Engine [cached since 2194s ago] ('Bagong99',)
2026-02-11 00:59:35,522 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:59:35,523 INFO sqlalchemy.engine.Engine [cached since 2194s ago] (2,)
2026-02-11 00:59:35,530 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:59:35,530 INFO sqlalchemy.engine.Engine [cached since 2194s ago] ('active', 2)
2026-02-11 00:59:35,538 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:59:35,538 INFO sqlalchemy.engine.Engine [cached since 2194s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:59:35,545 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:35,545 INFO sqlalchemy.engine.Engine [cached since 2194s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 35, 521347, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:35,552 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:35,552 INFO sqlalchemy.engine.Engine [cached since 2194s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 35, 521347, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:35,558 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:59:35,559 INFO sqlalchemy.engine.Engine [cached since 2194s ago] (2,)
2026-02-11 00:59:35,566 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:59:35,566 INFO sqlalchemy.engine.Engine [cached since 2194s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 35, 521347, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:35,573 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:59:35,573 INFO sqlalchemy.engine.Engine [cached since 2194s ago] ('pending', 'running', 2, 10)
2026-02-11 00:59:35,590 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:59:35,590 INFO sqlalchemy.engine.Engine [cached since 2194s ago] (2,)
2026-02-11 00:59:35,597 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:35,597 INFO sqlalchemy.engine.Engine [cached since 2194s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 35, 521347, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:35,604 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:59:35,605 INFO sqlalchemy.engine.Engine [cached since 2194s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 59, 35, 603895, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:59:35,613 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:59:35,613 INFO sqlalchemy.engine.Engine [cached since 1006s ago] ('supreme',)
2026-02-11 00:59:35,620 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:59:35,620 INFO sqlalchemy.engine.Engine [cached since 1006s ago] (2,)
2026-02-11 00:59:35,627 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54723 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:59:40,163 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:59:40,164 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:59:40,164 INFO sqlalchemy.engine.Engine [cached since 2199s ago] ('Bagong99',)
2026-02-11 00:59:40,171 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54733 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:59:45,506 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:59:45,507 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:59:45,507 INFO sqlalchemy.engine.Engine [cached since 2204s ago] ('Bagong99',)
2026-02-11 00:59:45,515 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:59:45,515 INFO sqlalchemy.engine.Engine [cached since 2204s ago] (2,)
2026-02-11 00:59:45,521 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:59:45,522 INFO sqlalchemy.engine.Engine [cached since 2204s ago] ('active', 2)
2026-02-11 00:59:45,528 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:59:45,528 INFO sqlalchemy.engine.Engine [cached since 2204s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:59:45,535 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:45,535 INFO sqlalchemy.engine.Engine [cached since 2204s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 45, 514115, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:45,543 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:45,543 INFO sqlalchemy.engine.Engine [cached since 2204s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 45, 514115, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:45,550 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:59:45,550 INFO sqlalchemy.engine.Engine [cached since 2204s ago] (2,)
2026-02-11 00:59:45,556 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:59:45,556 INFO sqlalchemy.engine.Engine [cached since 2204s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 45, 514115, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:45,563 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:59:45,564 INFO sqlalchemy.engine.Engine [cached since 2204s ago] ('pending', 'running', 2, 10)
2026-02-11 00:59:45,571 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:59:45,572 INFO sqlalchemy.engine.Engine [cached since 2204s ago] (2,)
2026-02-11 00:59:45,580 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:45,580 INFO sqlalchemy.engine.Engine [cached since 2204s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 45, 514115, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:45,589 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:59:45,590 INFO sqlalchemy.engine.Engine [cached since 2204s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 59, 45, 588043, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:59:45,597 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:59:45,597 INFO sqlalchemy.engine.Engine [cached since 1016s ago] ('supreme',)
2026-02-11 00:59:45,605 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:59:45,606 INFO sqlalchemy.engine.Engine [cached since 1016s ago] (2,)
2026-02-11 00:59:45,614 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54743 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:59:50,166 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:59:50,167 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:59:50,167 INFO sqlalchemy.engine.Engine [cached since 2209s ago] ('Bagong99',)
2026-02-11 00:59:50,175 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54754 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 00:59:55,504 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 00:59:55,505 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 00:59:55,505 INFO sqlalchemy.engine.Engine [cached since 2214s ago] ('Bagong99',)
2026-02-11 00:59:55,512 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 00:59:55,513 INFO sqlalchemy.engine.Engine [cached since 2214s ago] (2,)
2026-02-11 00:59:55,520 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 00:59:55,520 INFO sqlalchemy.engine.Engine [cached since 2214s ago] ('active', 2)
2026-02-11 00:59:55,526 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 00:59:55,526 INFO sqlalchemy.engine.Engine [cached since 2214s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 00:59:55,533 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:55,533 INFO sqlalchemy.engine.Engine [cached since 2214s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 55, 511864, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:55,541 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:55,541 INFO sqlalchemy.engine.Engine [cached since 2214s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 55, 511864, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:55,551 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 00:59:55,551 INFO sqlalchemy.engine.Engine [cached since 2214s ago] (2,)
2026-02-11 00:59:55,557 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 00:59:55,557 INFO sqlalchemy.engine.Engine [cached since 2214s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 55, 511864, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:55,565 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 00:59:55,565 INFO sqlalchemy.engine.Engine [cached since 2214s ago] ('pending', 'running', 2, 10)
2026-02-11 00:59:55,572 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 00:59:55,572 INFO sqlalchemy.engine.Engine [cached since 2214s ago] (2,)
2026-02-11 00:59:55,579 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 00:59:55,579 INFO sqlalchemy.engine.Engine [cached since 2214s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 0, 59, 55, 511864, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 00:59:55,587 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 00:59:55,587 INFO sqlalchemy.engine.Engine [cached since 2214s ago] (2, 'active', datetime.datetime(2026, 2, 11, 0, 59, 55, 586567, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 00:59:55,594 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 00:59:55,594 INFO sqlalchemy.engine.Engine [cached since 1026s ago] ('supreme',)
2026-02-11 00:59:55,600 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 00:59:55,601 INFO sqlalchemy.engine.Engine [cached since 1026s ago] (2,)
2026-02-11 00:59:55,609 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54764 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 01:00:00,164 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:00,165 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:00,166 INFO sqlalchemy.engine.Engine [cached since 2219s ago] ('Bagong99',)
2026-02-11 01:00:00,172 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54773 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 01:00:05,503 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:05,504 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:05,504 INFO sqlalchemy.engine.Engine [cached since 2224s ago] ('Bagong99',)
2026-02-11 01:00:05,511 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 01:00:05,512 INFO sqlalchemy.engine.Engine [cached since 2224s ago] (2,)
2026-02-11 01:00:05,518 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 01:00:05,518 INFO sqlalchemy.engine.Engine [cached since 2224s ago] ('active', 2)
2026-02-11 01:00:05,522 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 01:00:05,523 INFO sqlalchemy.engine.Engine [cached since 2224s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 01:00:05,529 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 01:00:05,530 INFO sqlalchemy.engine.Engine [cached since 2224s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 5, 510717, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 01:00:05,537 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 01:00:05,538 INFO sqlalchemy.engine.Engine [cached since 2224s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 5, 510717, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 01:00:05,545 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 01:00:05,545 INFO sqlalchemy.engine.Engine [cached since 2224s ago] (2,)
2026-02-11 01:00:05,553 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 01:00:05,554 INFO sqlalchemy.engine.Engine [cached since 2224s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 5, 510717, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 01:00:05,560 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 01:00:05,560 INFO sqlalchemy.engine.Engine [cached since 2224s ago] ('pending', 'running', 2, 10)
2026-02-11 01:00:05,574 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 01:00:05,575 INFO sqlalchemy.engine.Engine [cached since 2224s ago] (2,)
2026-02-11 01:00:05,582 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 01:00:05,582 INFO sqlalchemy.engine.Engine [cached since 2224s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 5, 510717, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 01:00:05,600 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 01:00:05,601 INFO sqlalchemy.engine.Engine [cached since 2224s ago] (2, 'active', datetime.datetime(2026, 2, 11, 1, 0, 5, 599194, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:05,606 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 01:00:05,606 INFO sqlalchemy.engine.Engine [cached since 1036s ago] ('supreme',)
2026-02-11 01:00:05,615 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 01:00:05,615 INFO sqlalchemy.engine.Engine [cached since 1036s ago] (2,)
2026-02-11 01:00:05,622 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54784 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 01:00:10,165 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:10,166 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:10,166 INFO sqlalchemy.engine.Engine [cached since 2229s ago] ('Bagong99',)
2026-02-11 01:00:10,174 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54795 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 01:00:15,510 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:15,511 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:15,511 INFO sqlalchemy.engine.Engine [cached since 2234s ago] ('Bagong99',)
2026-02-11 01:00:15,527 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 01:00:15,527 INFO sqlalchemy.engine.Engine [cached since 2234s ago] (2,)
2026-02-11 01:00:15,535 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 01:00:15,536 INFO sqlalchemy.engine.Engine [cached since 2234s ago] ('active', 2)
2026-02-11 01:00:15,542 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 01:00:15,542 INFO sqlalchemy.engine.Engine [cached since 2234s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 01:00:15,549 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 01:00:15,549 INFO sqlalchemy.engine.Engine [cached since 2234s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 15, 526720, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 01:00:15,556 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 01:00:15,556 INFO sqlalchemy.engine.Engine [cached since 2234s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 15, 526720, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 01:00:15,562 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 01:00:15,563 INFO sqlalchemy.engine.Engine [cached since 2234s ago] (2,)
2026-02-11 01:00:15,570 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 01:00:15,570 INFO sqlalchemy.engine.Engine [cached since 2234s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 15, 526720, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 01:00:15,577 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 01:00:15,577 INFO sqlalchemy.engine.Engine [cached since 2234s ago] ('pending', 'running', 2, 10)
2026-02-11 01:00:15,586 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 01:00:15,586 INFO sqlalchemy.engine.Engine [cached since 2234s ago] (2,)
2026-02-11 01:00:15,594 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 01:00:15,595 INFO sqlalchemy.engine.Engine [cached since 2234s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 15, 526720, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 01:00:15,604 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 01:00:15,605 INFO sqlalchemy.engine.Engine [cached since 2234s ago] (2, 'active', datetime.datetime(2026, 2, 11, 1, 0, 15, 603144, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:15,612 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 01:00:15,613 INFO sqlalchemy.engine.Engine [cached since 1046s ago] ('supreme',)
2026-02-11 01:00:15,621 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 01:00:15,622 INFO sqlalchemy.engine.Engine [cached since 1046s ago] (2,)
2026-02-11 01:00:15,629 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54807 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 01:00:20,165 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:20,166 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:20,166 INFO sqlalchemy.engine.Engine [cached since 2239s ago] ('Bagong99',)
2026-02-11 01:00:20,180 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/dashboard/stats -> 401
INFO:     127.0.0.1:54821 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 401 Unauthorized
ðŸ” Incoming: POST /api/v1/accounts/auth/login
2026-02-11 01:00:22,613 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:22,614 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:22,614 INFO sqlalchemy.engine.Engine [cached since 2241s ago] ('admin',)
2026-02-11 01:00:22,647 INFO sqlalchemy.engine.Engine UPDATE users SET last_jti=%s WHERE users.id = %s
2026-02-11 01:00:22,648 INFO sqlalchemy.engine.Engine [cached since 2241s ago] ('727b9f6f-6fb7-426b-bbde-cc87fd9d62ea', 1)
2026-02-11 01:00:22,652 INFO sqlalchemy.engine.Engine COMMIT
âœ… Response: POST /api/v1/accounts/auth/login -> 200
INFO:     127.0.0.1:54821 - "POST /api/v1/accounts/auth/login HTTP/1.1" 200 OK
INFO:     127.0.0.1:54821 - "OPTIONS /api/v1/accounts/auth/me HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 01:00:22,711 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:22,712 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:22,712 INFO sqlalchemy.engine.Engine [cached since 2241s ago] ('admin',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:54821 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 01:00:22,729 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54821 - "OPTIONS /api/v1/dashboard/stats HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 01:00:22,776 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:22,777 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:22,777 INFO sqlalchemy.engine.Engine [cached since 2241s ago] ('admin',)
2026-02-11 01:00:22,784 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts
2026-02-11 01:00:22,784 INFO sqlalchemy.engine.Engine [generated in 0.00066s] ()
2026-02-11 01:00:22,791 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s
2026-02-11 01:00:22,791 INFO sqlalchemy.engine.Engine [generated in 0.00030s] ('active',)
2026-02-11 01:00:22,799 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s)
2026-02-11 01:00:22,800 INFO sqlalchemy.engine.Engine [generated in 0.00074s] ('failed', 'challenge', 'banned')
2026-02-11 01:00:22,807 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s
2026-02-11 01:00:22,807 INFO sqlalchemy.engine.Engine [generated in 0.00034s] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 22, 782852, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:22,816 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:22,816 INFO sqlalchemy.engine.Engine [generated in 0.00060s] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 22, 782852, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:22,824 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates
2026-02-11 01:00:22,824 INFO sqlalchemy.engine.Engine [generated in 0.00046s] ()
2026-02-11 01:00:22,831 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL
2026-02-11 01:00:22,831 INFO sqlalchemy.engine.Engine [generated in 0.00026s] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 22, 782852, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:22,843 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 01:00:22,843 INFO sqlalchemy.engine.Engine [generated in 0.00059s] ('pending', 'running', 10)
2026-02-11 01:00:22,852 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts GROUP BY accounts.status
2026-02-11 01:00:22,853 INFO sqlalchemy.engine.Engine [generated in 0.00052s] ()
2026-02-11 01:00:22,865 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:22,865 INFO sqlalchemy.engine.Engine [generated in 0.00043s] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 22, 782852, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:22,878 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 01:00:22,878 INFO sqlalchemy.engine.Engine [cached since 2241s ago] (1, 'active', datetime.datetime(2026, 2, 11, 1, 0, 22, 876545, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:22,887 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 01:00:22,887 INFO sqlalchemy.engine.Engine [cached since 1053s ago] ('premium',)
2026-02-11 01:00:22,896 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 01:00:22,896 INFO sqlalchemy.engine.Engine [cached since 1053s ago] (1,)
2026-02-11 01:00:22,903 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54821 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
INFO:     127.0.0.1:54837 - "OPTIONS /api/v1/accounts/users HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/users
INFO:     127.0.0.1:54839 - "OPTIONS /api/v1/tickets HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:54839 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
INFO:     127.0.0.1:54839 - "OPTIONS /api/v1/tickets/ HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 01:00:23,000 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:23,001 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:23,001 INFO sqlalchemy.engine.Engine [cached since 2241s ago] ('admin',)
2026-02-11 01:00:23,008 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts
2026-02-11 01:00:23,008 INFO sqlalchemy.engine.Engine [cached since 0.2242s ago] ()
2026-02-11 01:00:23,009 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:23,009 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:23,009 INFO sqlalchemy.engine.Engine [cached since 2241s ago] ('admin',)
2026-02-11 01:00:23,014 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s
2026-02-11 01:00:23,015 INFO sqlalchemy.engine.Engine [cached since 0.2238s ago] ('active',)
2026-02-11 01:00:23,018 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users
2026-02-11 01:00:23,018 INFO sqlalchemy.engine.Engine [generated in 0.00052s] ()
2026-02-11 01:00:23,019 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:23,019 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:23,019 INFO sqlalchemy.engine.Engine [cached since 2241s ago] ('admin',)
2026-02-11 01:00:23,021 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s)
2026-02-11 01:00:23,021 INFO sqlalchemy.engine.Engine [cached since 0.2222s ago] ('failed', 'challenge', 'banned')
2026-02-11 01:00:23,033 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s
2026-02-11 01:00:23,033 INFO sqlalchemy.engine.Engine [cached since 0.2263s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 23, 7529, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/accounts/users -> 200
INFO:     127.0.0.1:54837 - "GET /api/v1/accounts/users HTTP/1.1" 200 OK
2026-02-11 01:00:23,035 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:23,040 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:23,040 INFO sqlalchemy.engine.Engine [cached since 0.2246s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 23, 7529, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:23,046 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates
2026-02-11 01:00:23,046 INFO sqlalchemy.engine.Engine [cached since 0.2225s ago] ()
2026-02-11 01:00:23,054 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL
2026-02-11 01:00:23,054 INFO sqlalchemy.engine.Engine [cached since 0.2228s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 23, 7529, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:23,059 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 01:00:23,060 INFO sqlalchemy.engine.Engine [cached since 0.2174s ago] ('pending', 'running', 10)
2026-02-11 01:00:23,066 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts GROUP BY accounts.status
2026-02-11 01:00:23,067 INFO sqlalchemy.engine.Engine [cached since 0.2145s ago] ()
2026-02-11 01:00:23,072 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:23,072 INFO sqlalchemy.engine.Engine [cached since 0.2068s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 23, 7529, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:23,073 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:23,074 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets ORDER BY tickets.updated_at DESC
2026-02-11 01:00:23,075 INFO sqlalchemy.engine.Engine [generated in 0.00037s] ()
2026-02-11 01:00:23,082 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 01:00:23,082 INFO sqlalchemy.engine.Engine [cached since 2241s ago] (1, 'active', datetime.datetime(2026, 2, 11, 1, 0, 23, 81543, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:54839 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 01:00:23,083 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:23,090 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 01:00:23,090 INFO sqlalchemy.engine.Engine [cached since 1053s ago] ('premium',)
2026-02-11 01:00:23,098 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 01:00:23,098 INFO sqlalchemy.engine.Engine [cached since 1053s ago] (1,)
2026-02-11 01:00:23,100 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:23,105 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54835 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 01:00:23,163 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:23,164 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:23,164 INFO sqlalchemy.engine.Engine [cached since 2242s ago] ('admin',)
2026-02-11 01:00:23,170 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts
2026-02-11 01:00:23,170 INFO sqlalchemy.engine.Engine [cached since 0.3862s ago] ()
2026-02-11 01:00:23,176 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s
2026-02-11 01:00:23,176 INFO sqlalchemy.engine.Engine [cached since 0.3858s ago] ('active',)
2026-02-11 01:00:23,183 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s)
2026-02-11 01:00:23,184 INFO sqlalchemy.engine.Engine [cached since 0.3846s ago] ('failed', 'challenge', 'banned')
2026-02-11 01:00:23,191 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s
2026-02-11 01:00:23,191 INFO sqlalchemy.engine.Engine [cached since 0.3841s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 23, 169714, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:23,197 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:23,197 INFO sqlalchemy.engine.Engine [cached since 0.3815s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 23, 169714, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:23,202 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates
2026-02-11 01:00:23,202 INFO sqlalchemy.engine.Engine [cached since 0.3783s ago] ()
2026-02-11 01:00:23,207 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL
2026-02-11 01:00:23,208 INFO sqlalchemy.engine.Engine [cached since 0.3767s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 23, 169714, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:23,213 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 01:00:23,214 INFO sqlalchemy.engine.Engine [cached since 0.3713s ago] ('pending', 'running', 10)
2026-02-11 01:00:23,219 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts GROUP BY accounts.status
2026-02-11 01:00:23,219 INFO sqlalchemy.engine.Engine [cached since 0.3673s ago] ()
2026-02-11 01:00:23,224 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:23,224 INFO sqlalchemy.engine.Engine [cached since 0.3593s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 23, 169714, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:23,236 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 01:00:23,236 INFO sqlalchemy.engine.Engine [cached since 2242s ago] (1, 'active', datetime.datetime(2026, 2, 11, 1, 0, 23, 235060, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:23,244 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 01:00:23,244 INFO sqlalchemy.engine.Engine [cached since 1054s ago] ('premium',)
2026-02-11 01:00:23,250 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 01:00:23,250 INFO sqlalchemy.engine.Engine [cached since 1054s ago] (1,)
2026-02-11 01:00:23,256 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54839 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 01:00:25,505 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:25,506 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:25,506 INFO sqlalchemy.engine.Engine [cached since 2244s ago] ('Bagong99',)
2026-02-11 01:00:25,523 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 01:00:25,523 INFO sqlalchemy.engine.Engine [cached since 2244s ago] (2,)
2026-02-11 01:00:25,529 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 01:00:25,530 INFO sqlalchemy.engine.Engine [cached since 2244s ago] ('active', 2)
2026-02-11 01:00:25,536 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 01:00:25,536 INFO sqlalchemy.engine.Engine [cached since 2244s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 01:00:25,543 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 01:00:25,543 INFO sqlalchemy.engine.Engine [cached since 2244s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 25, 522211, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 01:00:25,549 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 01:00:25,549 INFO sqlalchemy.engine.Engine [cached since 2244s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 25, 522211, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 01:00:25,556 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 01:00:25,556 INFO sqlalchemy.engine.Engine [cached since 2244s ago] (2,)
2026-02-11 01:00:25,563 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 01:00:25,563 INFO sqlalchemy.engine.Engine [cached since 2244s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 25, 522211, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 01:00:25,571 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 01:00:25,572 INFO sqlalchemy.engine.Engine [cached since 2244s ago] ('pending', 'running', 2, 10)
2026-02-11 01:00:25,580 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 01:00:25,581 INFO sqlalchemy.engine.Engine [cached since 2244s ago] (2,)
2026-02-11 01:00:25,588 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 01:00:25,588 INFO sqlalchemy.engine.Engine [cached since 2244s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 25, 522211, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 01:00:25,596 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 01:00:25,597 INFO sqlalchemy.engine.Engine [cached since 2244s ago] (2, 'active', datetime.datetime(2026, 2, 11, 1, 0, 25, 595338, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:25,604 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 01:00:25,605 INFO sqlalchemy.engine.Engine [cached since 1056s ago] ('supreme',)
2026-02-11 01:00:25,613 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 01:00:25,613 INFO sqlalchemy.engine.Engine [cached since 1056s ago] (2,)
2026-02-11 01:00:25,620 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54852 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 01:00:32,274 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:32,275 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:32,275 INFO sqlalchemy.engine.Engine [cached since 2251s ago] ('admin',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:54876 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 01:00:32,283 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/accounts/users
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:54881 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 01:00:32,334 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:32,335 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:32,335 INFO sqlalchemy.engine.Engine [cached since 2251s ago] ('admin',)
2026-02-11 01:00:32,342 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts
2026-02-11 01:00:32,342 INFO sqlalchemy.engine.Engine [cached since 9.558s ago] ()
2026-02-11 01:00:32,343 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:32,343 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:32,343 INFO sqlalchemy.engine.Engine [cached since 2251s ago] ('admin',)
2026-02-11 01:00:32,348 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s
2026-02-11 01:00:32,348 INFO sqlalchemy.engine.Engine [cached since 9.557s ago] ('active',)
2026-02-11 01:00:32,352 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users
2026-02-11 01:00:32,352 INFO sqlalchemy.engine.Engine [cached since 9.334s ago] ()
2026-02-11 01:00:32,353 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:32,353 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:32,353 INFO sqlalchemy.engine.Engine [cached since 2251s ago] ('admin',)
2026-02-11 01:00:32,355 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s)
2026-02-11 01:00:32,355 INFO sqlalchemy.engine.Engine [cached since 9.556s ago] ('failed', 'challenge', 'banned')
âœ… Response: GET /api/v1/accounts/users -> 200
INFO:     127.0.0.1:54880 - "GET /api/v1/accounts/users HTTP/1.1" 200 OK
2026-02-11 01:00:32,359 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:32,361 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s
2026-02-11 01:00:32,361 INFO sqlalchemy.engine.Engine [cached since 9.554s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 32, 341428, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:32,366 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:32,366 INFO sqlalchemy.engine.Engine [cached since 9.55s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 32, 341428, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:32,370 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates
2026-02-11 01:00:32,370 INFO sqlalchemy.engine.Engine [cached since 9.546s ago] ()
2026-02-11 01:00:32,374 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL
2026-02-11 01:00:32,374 INFO sqlalchemy.engine.Engine [cached since 9.543s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 32, 341428, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:32,382 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 01:00:32,382 INFO sqlalchemy.engine.Engine [cached since 9.539s ago] ('pending', 'running', 10)
2026-02-11 01:00:32,388 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts GROUP BY accounts.status
2026-02-11 01:00:32,388 INFO sqlalchemy.engine.Engine [cached since 9.536s ago] ()
2026-02-11 01:00:32,393 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:32,394 INFO sqlalchemy.engine.Engine [cached since 9.529s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 32, 341428, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:32,401 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 01:00:32,401 INFO sqlalchemy.engine.Engine [cached since 2251s ago] (1, 'active', datetime.datetime(2026, 2, 11, 1, 0, 32, 400422, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:32,402 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:32,402 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets ORDER BY tickets.updated_at DESC
2026-02-11 01:00:32,403 INFO sqlalchemy.engine.Engine [cached since 9.328s ago] ()
2026-02-11 01:00:32,409 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 01:00:32,410 INFO sqlalchemy.engine.Engine [cached since 1063s ago] ('premium',)
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:54881 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 01:00:32,414 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:32,417 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 01:00:32,417 INFO sqlalchemy.engine.Engine [cached since 1063s ago] (1,)
2026-02-11 01:00:32,423 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:32,424 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54876 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 01:00:32,486 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:32,486 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:32,486 INFO sqlalchemy.engine.Engine [cached since 2251s ago] ('admin',)
2026-02-11 01:00:32,493 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts
2026-02-11 01:00:32,493 INFO sqlalchemy.engine.Engine [cached since 9.709s ago] ()
2026-02-11 01:00:32,498 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s
2026-02-11 01:00:32,498 INFO sqlalchemy.engine.Engine [cached since 9.707s ago] ('active',)
2026-02-11 01:00:32,503 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s)
2026-02-11 01:00:32,503 INFO sqlalchemy.engine.Engine [cached since 9.704s ago] ('failed', 'challenge', 'banned')
2026-02-11 01:00:32,508 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s
2026-02-11 01:00:32,508 INFO sqlalchemy.engine.Engine [cached since 9.701s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 32, 492565, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:32,514 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:32,514 INFO sqlalchemy.engine.Engine [cached since 9.699s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 32, 492565, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:32,520 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates
2026-02-11 01:00:32,520 INFO sqlalchemy.engine.Engine [cached since 9.696s ago] ()
2026-02-11 01:00:32,526 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL
2026-02-11 01:00:32,526 INFO sqlalchemy.engine.Engine [cached since 9.695s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 32, 492565, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:32,532 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 01:00:32,532 INFO sqlalchemy.engine.Engine [cached since 9.69s ago] ('pending', 'running', 10)
2026-02-11 01:00:32,541 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts GROUP BY accounts.status
2026-02-11 01:00:32,541 INFO sqlalchemy.engine.Engine [cached since 9.689s ago] ()
2026-02-11 01:00:32,548 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:32,548 INFO sqlalchemy.engine.Engine [cached since 9.683s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 32, 492565, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:32,557 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 01:00:32,557 INFO sqlalchemy.engine.Engine [cached since 2251s ago] (1, 'active', datetime.datetime(2026, 2, 11, 1, 0, 32, 555996, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:32,565 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 01:00:32,565 INFO sqlalchemy.engine.Engine [cached since 1063s ago] ('premium',)
2026-02-11 01:00:32,573 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 01:00:32,573 INFO sqlalchemy.engine.Engine [cached since 1063s ago] (1,)
2026-02-11 01:00:32,578 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54881 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 01:00:33,058 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:33,059 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:33,060 INFO sqlalchemy.engine.Engine [cached since 2251s ago] ('admin',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:54880 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 01:00:33,069 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/accounts/users
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:54894 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 01:00:33,111 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:33,112 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:33,112 INFO sqlalchemy.engine.Engine [cached since 2251s ago] ('admin',)
2026-02-11 01:00:33,118 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts
2026-02-11 01:00:33,118 INFO sqlalchemy.engine.Engine [cached since 10.33s ago] ()
2026-02-11 01:00:33,118 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:33,119 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:33,119 INFO sqlalchemy.engine.Engine [cached since 2251s ago] ('admin',)
2026-02-11 01:00:33,119 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:33,119 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:33,119 INFO sqlalchemy.engine.Engine [cached since 2251s ago] ('admin',)
2026-02-11 01:00:33,125 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s
2026-02-11 01:00:33,125 INFO sqlalchemy.engine.Engine [cached since 10.33s ago] ('active',)
2026-02-11 01:00:33,126 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users
2026-02-11 01:00:33,126 INFO sqlalchemy.engine.Engine [cached since 10.11s ago] ()
2026-02-11 01:00:33,131 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s)
2026-02-11 01:00:33,131 INFO sqlalchemy.engine.Engine [cached since 10.33s ago] ('failed', 'challenge', 'banned')
âœ… Response: GET /api/v1/accounts/users -> 200
INFO:     127.0.0.1:54893 - "GET /api/v1/accounts/users HTTP/1.1" 200 OK
2026-02-11 01:00:33,135 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:33,138 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s
2026-02-11 01:00:33,138 INFO sqlalchemy.engine.Engine [cached since 10.33s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 33, 117696, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,145 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:33,145 INFO sqlalchemy.engine.Engine [cached since 10.33s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 33, 117696, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,151 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates
2026-02-11 01:00:33,151 INFO sqlalchemy.engine.Engine [cached since 10.33s ago] ()
2026-02-11 01:00:33,155 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL
2026-02-11 01:00:33,155 INFO sqlalchemy.engine.Engine [cached since 10.32s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 33, 117696, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,161 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 01:00:33,161 INFO sqlalchemy.engine.Engine [cached since 10.32s ago] ('pending', 'running', 10)
2026-02-11 01:00:33,163 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:33,164 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets ORDER BY tickets.updated_at DESC
2026-02-11 01:00:33,164 INFO sqlalchemy.engine.Engine [cached since 10.09s ago] ()
2026-02-11 01:00:33,168 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts GROUP BY accounts.status
2026-02-11 01:00:33,169 INFO sqlalchemy.engine.Engine [cached since 10.32s ago] ()
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:54894 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 01:00:33,171 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:33,175 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:33,175 INFO sqlalchemy.engine.Engine [cached since 10.31s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 33, 117696, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,183 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 01:00:33,183 INFO sqlalchemy.engine.Engine [cached since 2251s ago] (1, 'active', datetime.datetime(2026, 2, 11, 1, 0, 33, 182296, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,184 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:33,193 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 01:00:33,193 INFO sqlalchemy.engine.Engine [cached since 1064s ago] ('premium',)
2026-02-11 01:00:33,200 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 01:00:33,200 INFO sqlalchemy.engine.Engine [cached since 1064s ago] (1,)
2026-02-11 01:00:33,206 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54880 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 01:00:33,261 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:33,261 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:33,261 INFO sqlalchemy.engine.Engine [cached since 2252s ago] ('admin',)
2026-02-11 01:00:33,269 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts
2026-02-11 01:00:33,269 INFO sqlalchemy.engine.Engine [cached since 10.49s ago] ()
2026-02-11 01:00:33,275 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s
2026-02-11 01:00:33,275 INFO sqlalchemy.engine.Engine [cached since 10.48s ago] ('active',)
2026-02-11 01:00:33,281 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s)
2026-02-11 01:00:33,282 INFO sqlalchemy.engine.Engine [cached since 10.48s ago] ('failed', 'challenge', 'banned')
2026-02-11 01:00:33,288 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s
2026-02-11 01:00:33,288 INFO sqlalchemy.engine.Engine [cached since 10.48s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 33, 268554, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,294 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:33,294 INFO sqlalchemy.engine.Engine [cached since 10.48s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 33, 268554, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,300 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates
2026-02-11 01:00:33,301 INFO sqlalchemy.engine.Engine [cached since 10.48s ago] ()
2026-02-11 01:00:33,307 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL
2026-02-11 01:00:33,307 INFO sqlalchemy.engine.Engine [cached since 10.48s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 33, 268554, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,315 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 01:00:33,316 INFO sqlalchemy.engine.Engine [cached since 10.47s ago] ('pending', 'running', 10)
2026-02-11 01:00:33,324 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts GROUP BY accounts.status
2026-02-11 01:00:33,324 INFO sqlalchemy.engine.Engine [cached since 10.47s ago] ()
2026-02-11 01:00:33,331 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:33,331 INFO sqlalchemy.engine.Engine [cached since 10.47s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 33, 268554, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,340 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 01:00:33,340 INFO sqlalchemy.engine.Engine [cached since 2252s ago] (1, 'active', datetime.datetime(2026, 2, 11, 1, 0, 33, 339266, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,347 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 01:00:33,348 INFO sqlalchemy.engine.Engine [cached since 1064s ago] ('premium',)
2026-02-11 01:00:33,354 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 01:00:33,354 INFO sqlalchemy.engine.Engine [cached since 1064s ago] (1,)
2026-02-11 01:00:33,361 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54894 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/accounts/auth/me
2026-02-11 01:00:33,606 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:33,607 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:33,607 INFO sqlalchemy.engine.Engine [cached since 2252s ago] ('admin',)
âœ… Response: GET /api/v1/accounts/auth/me -> 200
INFO:     127.0.0.1:54893 - "GET /api/v1/accounts/auth/me HTTP/1.1" 200 OK
2026-02-11 01:00:33,626 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/dashboard/stats
ðŸ” Incoming: GET /api/v1/accounts/users
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:54907 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 01:00:33,685 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:33,685 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:33,685 INFO sqlalchemy.engine.Engine [cached since 2252s ago] ('admin',)
2026-02-11 01:00:33,686 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:33,686 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:33,686 INFO sqlalchemy.engine.Engine [cached since 2252s ago] ('admin',)
2026-02-11 01:00:33,691 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts
2026-02-11 01:00:33,691 INFO sqlalchemy.engine.Engine [cached since 10.91s ago] ()
2026-02-11 01:00:33,693 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users
2026-02-11 01:00:33,694 INFO sqlalchemy.engine.Engine [cached since 10.68s ago] ()
2026-02-11 01:00:33,696 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:33,696 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:33,696 INFO sqlalchemy.engine.Engine [cached since 2252s ago] ('admin',)
2026-02-11 01:00:33,720 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s
2026-02-11 01:00:33,720 INFO sqlalchemy.engine.Engine [cached since 10.93s ago] ('active',)
âœ… Response: GET /api/v1/accounts/users -> 200
INFO:     127.0.0.1:54906 - "GET /api/v1/accounts/users HTTP/1.1" 200 OK
2026-02-11 01:00:33,723 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:33,729 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s)
2026-02-11 01:00:33,729 INFO sqlalchemy.engine.Engine [cached since 10.93s ago] ('failed', 'challenge', 'banned')
2026-02-11 01:00:33,736 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s
2026-02-11 01:00:33,736 INFO sqlalchemy.engine.Engine [cached since 10.93s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 33, 690398, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,742 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:33,742 INFO sqlalchemy.engine.Engine [cached since 10.93s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 33, 690398, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,750 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates
2026-02-11 01:00:33,751 INFO sqlalchemy.engine.Engine [cached since 10.93s ago] ()
2026-02-11 01:00:33,756 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL
2026-02-11 01:00:33,756 INFO sqlalchemy.engine.Engine [cached since 10.92s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 33, 690398, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,761 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 01:00:33,761 INFO sqlalchemy.engine.Engine [cached since 10.92s ago] ('pending', 'running', 10)
2026-02-11 01:00:33,764 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:33,765 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets ORDER BY tickets.updated_at DESC
2026-02-11 01:00:33,765 INFO sqlalchemy.engine.Engine [cached since 10.69s ago] ()
2026-02-11 01:00:33,769 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts GROUP BY accounts.status
2026-02-11 01:00:33,769 INFO sqlalchemy.engine.Engine [cached since 10.92s ago] ()
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:54907 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 01:00:33,770 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:33,774 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:33,774 INFO sqlalchemy.engine.Engine [cached since 10.91s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 33, 690398, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,785 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 01:00:33,786 INFO sqlalchemy.engine.Engine [cached since 2252s ago] (1, 'active', datetime.datetime(2026, 2, 11, 1, 0, 33, 784356, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,786 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:33,793 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 01:00:33,794 INFO sqlalchemy.engine.Engine [cached since 1064s ago] ('premium',)
2026-02-11 01:00:33,800 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 01:00:33,800 INFO sqlalchemy.engine.Engine [cached since 1064s ago] (1,)
2026-02-11 01:00:33,806 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54893 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 01:00:33,867 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:33,868 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:33,868 INFO sqlalchemy.engine.Engine [cached since 2252s ago] ('admin',)
2026-02-11 01:00:33,876 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts
2026-02-11 01:00:33,876 INFO sqlalchemy.engine.Engine [cached since 11.09s ago] ()
2026-02-11 01:00:33,882 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s
2026-02-11 01:00:33,882 INFO sqlalchemy.engine.Engine [cached since 11.09s ago] ('active',)
2026-02-11 01:00:33,886 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s)
2026-02-11 01:00:33,887 INFO sqlalchemy.engine.Engine [cached since 11.09s ago] ('failed', 'challenge', 'banned')
2026-02-11 01:00:33,897 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s
2026-02-11 01:00:33,898 INFO sqlalchemy.engine.Engine [cached since 11.09s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 33, 875330, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,904 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:33,904 INFO sqlalchemy.engine.Engine [cached since 11.09s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 33, 875330, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,910 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates
2026-02-11 01:00:33,911 INFO sqlalchemy.engine.Engine [cached since 11.09s ago] ()
2026-02-11 01:00:33,918 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL
2026-02-11 01:00:33,918 INFO sqlalchemy.engine.Engine [cached since 11.09s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 33, 875330, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,923 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 01:00:33,924 INFO sqlalchemy.engine.Engine [cached since 11.08s ago] ('pending', 'running', 10)
2026-02-11 01:00:33,931 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts GROUP BY accounts.status
2026-02-11 01:00:33,931 INFO sqlalchemy.engine.Engine [cached since 11.08s ago] ()
2026-02-11 01:00:33,937 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:33,937 INFO sqlalchemy.engine.Engine [cached since 11.07s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 33, 875330, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,944 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 01:00:33,944 INFO sqlalchemy.engine.Engine [cached since 2252s ago] (1, 'active', datetime.datetime(2026, 2, 11, 1, 0, 33, 943290, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:33,951 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 01:00:33,952 INFO sqlalchemy.engine.Engine [cached since 1064s ago] ('premium',)
2026-02-11 01:00:33,961 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 01:00:33,961 INFO sqlalchemy.engine.Engine [cached since 1064s ago] (1,)
2026-02-11 01:00:33,969 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54907 - "GET /api/v1/dashboard/stats HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 01:00:35,509 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:35,510 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:35,510 INFO sqlalchemy.engine.Engine [cached since 2254s ago] ('Bagong99',)
2026-02-11 01:00:35,523 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s
2026-02-11 01:00:35,523 INFO sqlalchemy.engine.Engine [cached since 2254s ago] (2,)
2026-02-11 01:00:35,529 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s AND accounts.user_id = %s
2026-02-11 01:00:35,529 INFO sqlalchemy.engine.Engine [cached since 2254s ago] ('active', 2)
2026-02-11 01:00:35,536 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s) AND accounts.user_id = %s
2026-02-11 01:00:35,536 INFO sqlalchemy.engine.Engine [cached since 2254s ago] ('failed', 'challenge', 'banned', 2)
2026-02-11 01:00:35,545 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s AND tasks.user_id = %s
2026-02-11 01:00:35,545 INFO sqlalchemy.engine.Engine [cached since 2254s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 35, 521607, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 01:00:35,553 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 01:00:35,553 INFO sqlalchemy.engine.Engine [cached since 2254s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 35, 521607, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 01:00:35,560 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates 
WHERE proxy_templates.user_id = %s
2026-02-11 01:00:35,560 INFO sqlalchemy.engine.Engine [cached since 2254s ago] (2,)
2026-02-11 01:00:35,567 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL AND tasks.user_id = %s
2026-02-11 01:00:35,567 INFO sqlalchemy.engine.Engine [cached since 2254s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 35, 521607, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 01:00:35,575 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) AND tasks.user_id = %s ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 01:00:35,575 INFO sqlalchemy.engine.Engine [cached since 2254s ago] ('pending', 'running', 2, 10)
2026-02-11 01:00:35,584 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.user_id = %s GROUP BY accounts.status
2026-02-11 01:00:35,585 INFO sqlalchemy.engine.Engine [cached since 2254s ago] (2,)
2026-02-11 01:00:35,592 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.user_id = %s
2026-02-11 01:00:35,593 INFO sqlalchemy.engine.Engine [cached since 2254s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 35, 521607, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), 2)
2026-02-11 01:00:35,612 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 01:00:35,612 INFO sqlalchemy.engine.Engine [cached since 2254s ago] (2, 'active', datetime.datetime(2026, 2, 11, 1, 0, 35, 611218, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:35,618 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 01:00:35,619 INFO sqlalchemy.engine.Engine [cached since 1066s ago] ('supreme',)
2026-02-11 01:00:35,629 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 01:00:35,629 INFO sqlalchemy.engine.Engine [cached since 1066s ago] (2,)
2026-02-11 01:00:35,637 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54921 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
ðŸ” Incoming: GET /api/v1/dashboard/stats
2026-02-11 01:00:36,404 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:36,405 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:36,405 INFO sqlalchemy.engine.Engine [cached since 2255s ago] ('admin',)
2026-02-11 01:00:36,412 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts
2026-02-11 01:00:36,412 INFO sqlalchemy.engine.Engine [cached since 13.63s ago] ()
2026-02-11 01:00:36,418 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status = %s
2026-02-11 01:00:36,418 INFO sqlalchemy.engine.Engine [cached since 13.63s ago] ('active',)
2026-02-11 01:00:36,423 INFO sqlalchemy.engine.Engine SELECT count(accounts.id) AS count_1 
FROM accounts 
WHERE accounts.status IN (%s, %s, %s)
2026-02-11 01:00:36,424 INFO sqlalchemy.engine.Engine [cached since 13.62s ago] ('failed', 'challenge', 'banned')
2026-02-11 01:00:36,429 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.created_at >= %s AND tasks.created_at <= %s
2026-02-11 01:00:36,429 INFO sqlalchemy.engine.Engine [cached since 13.62s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 36, 411674, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:36,434 INFO sqlalchemy.engine.Engine SELECT count(tasks.id) AS count_1 
FROM tasks 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:36,434 INFO sqlalchemy.engine.Engine [cached since 13.62s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 36, 411674, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:36,441 INFO sqlalchemy.engine.Engine SELECT count(proxy_templates.id) AS count_1 
FROM proxy_templates
2026-02-11 01:00:36,442 INFO sqlalchemy.engine.Engine [cached since 13.62s ago] ()
2026-02-11 01:00:36,448 INFO sqlalchemy.engine.Engine SELECT tasks.executed_at, tasks.status 
FROM tasks 
WHERE tasks.executed_at >= %s AND tasks.executed_at <= %s AND tasks.executed_at IS NOT NULL
2026-02-11 01:00:36,448 INFO sqlalchemy.engine.Engine [cached since 13.62s ago] (datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 36, 411674, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:36,455 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status IN (%s, %s) ORDER BY tasks.scheduled_at ASC 
 LIMIT %s
2026-02-11 01:00:36,455 INFO sqlalchemy.engine.Engine [cached since 13.61s ago] ('pending', 'running', 10)
2026-02-11 01:00:36,462 INFO sqlalchemy.engine.Engine SELECT accounts.status, count(accounts.id) AS count_1 
FROM accounts GROUP BY accounts.status
2026-02-11 01:00:36,462 INFO sqlalchemy.engine.Engine [cached since 13.61s ago] ()
2026-02-11 01:00:36,469 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.account_id, tasks.batch_id, tasks.task_type, tasks.params, tasks.scheduled_at, tasks.executed_at, tasks.status, tasks.error_message, tasks.user_id, tasks.created_at, accounts_1.id AS id_1, accounts_1.username, accounts_1.password_encrypted, accounts_1.seed_2fa, accounts_1.proxy, accounts_1.login_method, accounts_1.cookies, accounts_1.last_login_state, accounts_1.fingerprint_id, accounts_1.is_active, accounts_1.is_checker, accounts_1.status AS status_1, accounts_1.last_error, accounts_1.threads_profile_id, accounts_1.has_threads, accounts_1.user_id AS user_id_1, accounts_1.created_at AS created_at_1, accounts_1.last_login 
FROM tasks LEFT OUTER JOIN accounts AS accounts_1 ON accounts_1.id = tasks.account_id 
WHERE tasks.status = %s AND tasks.executed_at >= %s AND tasks.executed_at <= %s
2026-02-11 01:00:36,470 INFO sqlalchemy.engine.Engine [cached since 13.6s ago] ('completed', datetime.datetime(2026, 2, 11, 0, 0, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')), datetime.datetime(2026, 2, 11, 1, 0, 36, 411674, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:36,478 INFO sqlalchemy.engine.Engine SELECT subscriptions.id, subscriptions.user_id, subscriptions.plan_id, subscriptions.start_date, subscriptions.end_date, subscriptions.status 
FROM subscriptions INNER JOIN subscription_plans ON subscription_plans.id = subscriptions.plan_id 
WHERE subscriptions.user_id = %s AND subscriptions.status = %s AND subscriptions.end_date > %s
2026-02-11 01:00:36,478 INFO sqlalchemy.engine.Engine [cached since 2255s ago] (1, 'active', datetime.datetime(2026, 2, 11, 1, 0, 36, 477311, tzinfo=zoneinfo.ZoneInfo(key='Asia/Jakarta')))
2026-02-11 01:00:36,488 INFO sqlalchemy.engine.Engine SELECT subscription_plans.id AS subscription_plans_id, subscription_plans.name AS subscription_plans_name, subscription_plans.price_idr AS subscription_plans_price_idr, subscription_plans.duration_days AS subscription_plans_duration_days, subscription_plans.ig_account_limit AS subscription_plans_ig_account_limit, subscription_plans.proxy_slot_limit AS subscription_plans_proxy_slot_limit, subscription_plans.features AS subscription_plans_features, subscription_plans.allow_addons AS subscription_plans_allow_addons, subscription_plans.is_active AS subscription_plans_is_active 
FROM subscription_plans 
WHERE subscription_plans.id IN (%s)
2026-02-11 01:00:36,488 INFO sqlalchemy.engine.Engine [cached since 1067s ago] ('premium',)
2026-02-11 01:00:36,494 INFO sqlalchemy.engine.Engine SELECT subscription_addons.id, subscription_addons.user_id, subscription_addons.addon_type, subscription_addons.sub_type, subscription_addons.quantity, subscription_addons.price_paid, subscription_addons.start_date, subscription_addons.end_date, subscription_addons.is_active, subscription_addons.fulfilled_at 
FROM subscription_addons 
WHERE subscription_addons.user_id = %s AND subscription_addons.is_active = true
2026-02-11 01:00:36,494 INFO sqlalchemy.engine.Engine [cached since 1067s ago] (1,)
2026-02-11 01:00:36,499 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54906 - "GET /api/v1/dashboard/stats?period=today HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/protocols/http/h11_impl.py", line 410, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/applications.py", line 1138, in __call__
    await super().__call__(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_utils.py", line 87, in collapse_excgroups
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/main.py", line 17, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 124, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 110, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 432, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/fastapi/routing.py", line 320, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/apink/Documents/web/project-tools/instatools/backend/app/routers/dashboard.py", line 276, in get_dashboard_stats
    remaining = sub.end_date - now_tz
            ^^^^^^^^^^^^^^^^^^^^^
TypeError: can't subtract offset-naive and offset-aware datetimes
INFO:     127.0.0.1:54931 - "OPTIONS /api/v1/accounts/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:54933 - "OPTIONS /api/v1/proxies/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:54935 - "OPTIONS /api/v1/proxies/my-proxies HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/accounts/
ðŸ” Incoming: GET /api/v1/proxies/my-proxies
ðŸ” Incoming: GET /api/v1/proxies/
2026-02-11 01:00:38,693 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:38,694 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:38,694 INFO sqlalchemy.engine.Engine [cached since 2257s ago] ('admin',)
2026-02-11 01:00:38,703 INFO sqlalchemy.engine.Engine SELECT accounts.id, accounts.username, accounts.password_encrypted, accounts.seed_2fa, accounts.proxy, accounts.login_method, accounts.cookies, accounts.last_login_state, accounts.fingerprint_id, accounts.is_active, accounts.is_checker, accounts.status, accounts.last_error, accounts.threads_profile_id, accounts.has_threads, accounts.user_id, accounts.created_at, accounts.last_login 
FROM accounts ORDER BY accounts.created_at DESC 
 LIMIT %s, %s
2026-02-11 01:00:38,703 INFO sqlalchemy.engine.Engine [generated in 0.00024s] (0, 100)
2026-02-11 01:00:38,711 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:38,712 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:38,712 INFO sqlalchemy.engine.Engine [cached since 2257s ago] ('admin',)
2026-02-11 01:00:38,712 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:38,712 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:38,712 INFO sqlalchemy.engine.Engine [cached since 2257s ago] ('admin',)
2026-02-11 01:00:38,723 INFO sqlalchemy.engine.Engine SELECT proxy_assignments.id, proxy_assignments.addon_id, proxy_assignments.user_id, proxy_assignments.proxy_ip, proxy_assignments.proxy_port, proxy_assignments.proxy_username, proxy_assignments.proxy_password, proxy_assignments.assigned_by, proxy_assignments.assigned_at 
FROM proxy_assignments 
WHERE proxy_assignments.user_id = %s ORDER BY proxy_assignments.assigned_at DESC
2026-02-11 01:00:38,723 INFO sqlalchemy.engine.Engine [generated in 0.00051s] (1,)
2026-02-11 01:00:38,729 INFO sqlalchemy.engine.Engine SELECT proxy_templates.id, proxy_templates.name, proxy_templates.proxy_url, proxy_templates.description, proxy_templates.created_at, proxy_templates.updated_at, count(accounts.id) AS accounts_count 
FROM proxy_templates LEFT OUTER JOIN accounts ON proxy_templates.proxy_url = accounts.proxy GROUP BY proxy_templates.id ORDER BY proxy_templates.created_at DESC
2026-02-11 01:00:38,729 INFO sqlalchemy.engine.Engine [generated in 0.00059s] ()
âœ… Response: GET /api/v1/proxies/my-proxies -> 200
INFO:     127.0.0.1:54935 - "GET /api/v1/proxies/my-proxies HTTP/1.1" 200 OK
2026-02-11 01:00:38,736 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/accounts/ -> 200
INFO:     127.0.0.1:54933 - "GET /api/v1/accounts/ HTTP/1.1" 200 OK
âœ… Response: GET /api/v1/proxies/ -> 200
INFO:     127.0.0.1:54931 - "GET /api/v1/proxies/ HTTP/1.1" 200 OK
2026-02-11 01:00:38,751 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:38,752 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:54931 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 01:00:39,873 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:39,874 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:39,874 INFO sqlalchemy.engine.Engine [cached since 2258s ago] ('admin',)
2026-02-11 01:00:39,919 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:39,919 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets ORDER BY tickets.updated_at DESC
2026-02-11 01:00:39,919 INFO sqlalchemy.engine.Engine [cached since 16.85s ago] ()
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:54931 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 01:00:39,927 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:39,938 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/accounts/
ðŸ” Incoming: GET /api/v1/proxies/
ðŸ” Incoming: GET /api/v1/proxies/my-proxies
2026-02-11 01:00:40,489 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:40,490 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:40,490 INFO sqlalchemy.engine.Engine [cached since 2259s ago] ('admin',)
2026-02-11 01:00:40,491 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:40,491 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:40,492 INFO sqlalchemy.engine.Engine [cached since 2259s ago] ('admin',)
2026-02-11 01:00:40,492 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:40,493 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:40,493 INFO sqlalchemy.engine.Engine [cached since 2259s ago] ('admin',)
2026-02-11 01:00:40,498 INFO sqlalchemy.engine.Engine SELECT accounts.id, accounts.username, accounts.password_encrypted, accounts.seed_2fa, accounts.proxy, accounts.login_method, accounts.cookies, accounts.last_login_state, accounts.fingerprint_id, accounts.is_active, accounts.is_checker, accounts.status, accounts.last_error, accounts.threads_profile_id, accounts.has_threads, accounts.user_id, accounts.created_at, accounts.last_login 
FROM accounts ORDER BY accounts.created_at DESC 
 LIMIT %s, %s
2026-02-11 01:00:40,498 INFO sqlalchemy.engine.Engine [cached since 1.795s ago] (0, 100)
2026-02-11 01:00:40,502 INFO sqlalchemy.engine.Engine SELECT proxy_templates.id, proxy_templates.name, proxy_templates.proxy_url, proxy_templates.description, proxy_templates.created_at, proxy_templates.updated_at, count(accounts.id) AS accounts_count 
FROM proxy_templates LEFT OUTER JOIN accounts ON proxy_templates.proxy_url = accounts.proxy GROUP BY proxy_templates.id ORDER BY proxy_templates.created_at DESC
2026-02-11 01:00:40,502 INFO sqlalchemy.engine.Engine [cached since 1.773s ago] ()
2026-02-11 01:00:40,504 INFO sqlalchemy.engine.Engine SELECT proxy_assignments.id, proxy_assignments.addon_id, proxy_assignments.user_id, proxy_assignments.proxy_ip, proxy_assignments.proxy_port, proxy_assignments.proxy_username, proxy_assignments.proxy_password, proxy_assignments.assigned_by, proxy_assignments.assigned_at 
FROM proxy_assignments 
WHERE proxy_assignments.user_id = %s ORDER BY proxy_assignments.assigned_at DESC
2026-02-11 01:00:40,504 INFO sqlalchemy.engine.Engine [cached since 1.781s ago] (1,)
âœ… Response: GET /api/v1/proxies/ -> 200
INFO:     127.0.0.1:54933 - "GET /api/v1/proxies/ HTTP/1.1" 200 OK
âœ… Response: GET /api/v1/proxies/my-proxies -> 200
INFO:     127.0.0.1:54935 - "GET /api/v1/proxies/my-proxies HTTP/1.1" 200 OK
2026-02-11 01:00:40,514 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:40,515 INFO sqlalchemy.engine.Engine ROLLBACK
âœ… Response: GET /api/v1/accounts/ -> 200
INFO:     127.0.0.1:54931 - "GET /api/v1/accounts/ HTTP/1.1" 200 OK
2026-02-11 01:00:40,547 INFO sqlalchemy.engine.Engine ROLLBACK
ðŸ” Incoming: GET /api/v1/tickets
âœ… Response: GET /api/v1/tickets -> 307
INFO:     127.0.0.1:54931 - "GET /api/v1/tickets HTTP/1.1" 307 Temporary Redirect
ðŸ” Incoming: GET /api/v1/tickets/
2026-02-11 01:00:41,609 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:41,610 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:41,610 INFO sqlalchemy.engine.Engine [cached since 2260s ago] ('admin',)
2026-02-11 01:00:41,657 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:41,657 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets ORDER BY tickets.updated_at DESC
2026-02-11 01:00:41,657 INFO sqlalchemy.engine.Engine [cached since 18.58s ago] ()
âœ… Response: GET /api/v1/tickets/ -> 200
INFO:     127.0.0.1:54931 - "GET /api/v1/tickets/ HTTP/1.1" 200 OK
2026-02-11 01:00:41,665 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:41,675 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:54931 - "OPTIONS /api/v1/tickets/5 HTTP/1.1" 200 OK
ðŸ” Incoming: GET /api/v1/tickets/5
2026-02-11 01:00:44,389 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:44,389 INFO sqlalchemy.engine.Engine SELECT users.id, users.username, users.hashed_password, users.full_name, users.avatar, users.email, users.google_id, users.role, users.is_active, users.is_password_set, users.last_jti 
FROM users 
WHERE users.username = %s
2026-02-11 01:00:44,390 INFO sqlalchemy.engine.Engine [cached since 2263s ago] ('admin',)
2026-02-11 01:00:44,438 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-11 01:00:44,440 INFO sqlalchemy.engine.Engine SELECT tickets.id, tickets.user_id, tickets.subject, tickets.status, tickets.priority, tickets.created_at, tickets.updated_at 
FROM tickets 
WHERE tickets.id = %s
2026-02-11 01:00:44,440 INFO sqlalchemy.engine.Engine [generated in 0.00028s] (5,)
2026-02-11 01:00:44,450 INFO sqlalchemy.engine.Engine SELECT ticket_messages.ticket_id AS ticket_messages_ticket_id, ticket_messages.id AS ticket_messages_id, ticket_messages.user_id AS ticket_messages_user_id, ticket_messages.message AS ticket_messages_message, ticket_messages.created_at AS ticket_messages_created_at 
FROM ticket_messages 
WHERE ticket_messages.ticket_id IN (%s)
2026-02-11 01:00:44,450 INFO sqlalchemy.engine.Engine [generated in 0.00076s] (5,)
âœ… Response: GET /api/v1/tickets/5 -> 200
INFO:     127.0.0.1:54931 - "GET /api/v1/tickets/5 HTTP/1.1" 200 OK
2026-02-11 01:00:44,463 INFO sqlalchemy.engine.Engine ROLLBACK
2026-02-11 01:00:44,475 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [38562]
